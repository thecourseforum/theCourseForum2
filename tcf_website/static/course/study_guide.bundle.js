var nc=Object.create;var ds=Object.defineProperty;var rc=Object.getOwnPropertyDescriptor;var ic=Object.getOwnPropertyNames;var oc=Object.getPrototypeOf,sc=Object.prototype.hasOwnProperty;var hs=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var ac=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ic(t))!sc.call(n,i)&&i!==e&&ds(n,i,{get:()=>t[i],enumerable:!(r=rc(t,i))||r.enumerable});return n};var ps=(n,t,e)=>(e=n!=null?nc(oc(n)):{},ac(t||!n||!n.__esModule?ds(e,"default",{value:n,enumerable:!0}):e,n));var gs=hs((lr,Vi)=>{(function(t,e){typeof lr=="object"&&typeof Vi=="object"?Vi.exports=e():typeof define=="function"&&define.amd?define([],e):typeof lr=="object"?lr.Quill=e():t.Quill=e()})(typeof self<"u"?self:lr,function(){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=t,e.d=function(r,i,o){e.o(r,i)||Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(i,"a",i),i},e.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},e.p="",e(e.s=109)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(17),i=e(18),o=e(19),s=e(45),f=e(46),l=e(47),u=e(48),a=e(49),d=e(12),m=e(32),v=e(33),y=e(31),g=e(1),p={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:r.default,Format:i.default,Leaf:o.default,Embed:u.default,Scroll:s.default,Block:l.default,Inline:f.default,Text:a.default,Attributor:{Attribute:d.default,Class:m.default,Style:v.default,Store:y.default}};t.default=p},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,p){g.__proto__=p}||function(g,p){for(var h in p)p.hasOwnProperty(h)&&(g[h]=p[h])};return function(g,p){y(g,p);function h(){this.constructor=g}g.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(y){r(g,y);function g(p){var h=this;return p="[Parchment] "+p,h=y.call(this,p)||this,h.message=p,h.name=h.constructor.name,h}return g}(Error);t.ParchmentError=i;var o={},s={},f={},l={};t.DATA_KEY="__blot";var u;(function(y){y[y.TYPE=3]="TYPE",y[y.LEVEL=12]="LEVEL",y[y.ATTRIBUTE=13]="ATTRIBUTE",y[y.BLOT=14]="BLOT",y[y.INLINE=7]="INLINE",y[y.BLOCK=11]="BLOCK",y[y.BLOCK_BLOT=10]="BLOCK_BLOT",y[y.INLINE_BLOT=6]="INLINE_BLOT",y[y.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",y[y.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",y[y.ANY=15]="ANY"})(u=t.Scope||(t.Scope={}));function a(y,g){var p=m(y);if(p==null)throw new i("Unable to create "+y+" blot");var h=p,c=y instanceof Node||y.nodeType===Node.TEXT_NODE?y:h.create(g);return new h(c,g)}t.create=a;function d(y,g){return g===void 0&&(g=!1),y==null?null:y[t.DATA_KEY]!=null?y[t.DATA_KEY].blot:g?d(y.parentNode,g):null}t.find=d;function m(y,g){g===void 0&&(g=u.ANY);var p;if(typeof y=="string")p=l[y]||o[y];else if(y instanceof Text||y.nodeType===Node.TEXT_NODE)p=l.text;else if(typeof y=="number")y&u.LEVEL&u.BLOCK?p=l.block:y&u.LEVEL&u.INLINE&&(p=l.inline);else if(y instanceof HTMLElement){var h=(y.getAttribute("class")||"").split(/\s+/);for(var c in h)if(p=s[h[c]],p)break;p=p||f[y.tagName]}return p==null?null:g&u.LEVEL&p.scope&&g&u.TYPE&p.scope?p:null}t.query=m;function v(){for(var y=[],g=0;g<arguments.length;g++)y[g]=arguments[g];if(y.length>1)return y.map(function(c){return v(c)});var p=y[0];if(typeof p.blotName!="string"&&typeof p.attrName!="string")throw new i("Invalid definition");if(p.blotName==="abstract")throw new i("Cannot register abstract class");if(l[p.blotName||p.attrName]=p,typeof p.keyName=="string")o[p.keyName]=p;else if(p.className!=null&&(s[p.className]=p),p.tagName!=null){Array.isArray(p.tagName)?p.tagName=p.tagName.map(function(c){return c.toUpperCase()}):p.tagName=p.tagName.toUpperCase();var h=Array.isArray(p.tagName)?p.tagName:[p.tagName];h.forEach(function(c){(f[c]==null||p.className==null)&&(f[c]=p)})}return p}t.register=v},function(n,t,e){var r=e(51),i=e(11),o=e(3),s=e(20),f="\0",l=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};l.prototype.insert=function(u,a){var d={};return u.length===0?this:(d.insert=u,a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(d.attributes=a),this.push(d))},l.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},l.prototype.retain=function(u,a){if(u<=0)return this;var d={retain:u};return a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(d.attributes=a),this.push(d)},l.prototype.push=function(u){var a=this.ops.length,d=this.ops[a-1];if(u=o(!0,{},u),typeof d=="object"){if(typeof u.delete=="number"&&typeof d.delete=="number")return this.ops[a-1]={delete:d.delete+u.delete},this;if(typeof d.delete=="number"&&u.insert!=null&&(a-=1,d=this.ops[a-1],typeof d!="object"))return this.ops.unshift(u),this;if(i(u.attributes,d.attributes)){if(typeof u.insert=="string"&&typeof d.insert=="string")return this.ops[a-1]={insert:d.insert+u.insert},typeof u.attributes=="object"&&(this.ops[a-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof d.retain=="number")return this.ops[a-1]={retain:d.retain+u.retain},typeof u.attributes=="object"&&(this.ops[a-1].attributes=u.attributes),this}}return a===this.ops.length?this.ops.push(u):this.ops.splice(a,0,u),this},l.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},l.prototype.filter=function(u){return this.ops.filter(u)},l.prototype.forEach=function(u){this.ops.forEach(u)},l.prototype.map=function(u){return this.ops.map(u)},l.prototype.partition=function(u){var a=[],d=[];return this.forEach(function(m){var v=u(m)?a:d;v.push(m)}),[a,d]},l.prototype.reduce=function(u,a){return this.ops.reduce(u,a)},l.prototype.changeLength=function(){return this.reduce(function(u,a){return a.insert?u+s.length(a):a.delete?u-a.delete:u},0)},l.prototype.length=function(){return this.reduce(function(u,a){return u+s.length(a)},0)},l.prototype.slice=function(u,a){u=u||0,typeof a!="number"&&(a=1/0);for(var d=[],m=s.iterator(this.ops),v=0;v<a&&m.hasNext();){var y;v<u?y=m.next(u-v):(y=m.next(a-v),d.push(y)),v+=s.length(y)}return new l(d)},l.prototype.compose=function(u){var a=s.iterator(this.ops),d=s.iterator(u.ops),m=[],v=d.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var y=v.retain;a.peekType()==="insert"&&a.peekLength()<=y;)y-=a.peekLength(),m.push(a.next());v.retain-y>0&&d.next(v.retain-y)}for(var g=new l(m);a.hasNext()||d.hasNext();)if(d.peekType()==="insert")g.push(d.next());else if(a.peekType()==="delete")g.push(a.next());else{var p=Math.min(a.peekLength(),d.peekLength()),h=a.next(p),c=d.next(p);if(typeof c.retain=="number"){var b={};typeof h.retain=="number"?b.retain=p:b.insert=h.insert;var _=s.attributes.compose(h.attributes,c.attributes,typeof h.retain=="number");if(_&&(b.attributes=_),g.push(b),!d.hasNext()&&i(g.ops[g.ops.length-1],b)){var w=new l(a.rest());return g.concat(w).chop()}}else typeof c.delete=="number"&&typeof h.retain=="number"&&g.push(c)}return g.chop()},l.prototype.concat=function(u){var a=new l(this.ops.slice());return u.ops.length>0&&(a.push(u.ops[0]),a.ops=a.ops.concat(u.ops.slice(1))),a},l.prototype.diff=function(u,a){if(this.ops===u.ops)return new l;var d=[this,u].map(function(p){return p.map(function(h){if(h.insert!=null)return typeof h.insert=="string"?h.insert:f;var c=p===u?"on":"with";throw new Error("diff() called "+c+" non-document")}).join("")}),m=new l,v=r(d[0],d[1],a),y=s.iterator(this.ops),g=s.iterator(u.ops);return v.forEach(function(p){for(var h=p[1].length;h>0;){var c=0;switch(p[0]){case r.INSERT:c=Math.min(g.peekLength(),h),m.push(g.next(c));break;case r.DELETE:c=Math.min(h,y.peekLength()),y.next(c),m.delete(c);break;case r.EQUAL:c=Math.min(y.peekLength(),g.peekLength(),h);var b=y.next(c),_=g.next(c);i(b.insert,_.insert)?m.retain(c,s.attributes.diff(b.attributes,_.attributes)):m.push(_).delete(c);break}h-=c}}),m.chop()},l.prototype.eachLine=function(u,a){a=a||`
`;for(var d=s.iterator(this.ops),m=new l,v=0;d.hasNext();){if(d.peekType()!=="insert")return;var y=d.peek(),g=s.length(y)-d.peekLength(),p=typeof y.insert=="string"?y.insert.indexOf(a,g)-g:-1;if(p<0)m.push(d.next());else if(p>0)m.push(d.next(p));else{if(u(m,d.next(1).attributes||{},v)===!1)return;v+=1,m=new l}}m.length()>0&&u(m,{},v)},l.prototype.transform=function(u,a){if(a=!!a,typeof u=="number")return this.transformPosition(u,a);for(var d=s.iterator(this.ops),m=s.iterator(u.ops),v=new l;d.hasNext()||m.hasNext();)if(d.peekType()==="insert"&&(a||m.peekType()!=="insert"))v.retain(s.length(d.next()));else if(m.peekType()==="insert")v.push(m.next());else{var y=Math.min(d.peekLength(),m.peekLength()),g=d.next(y),p=m.next(y);if(g.delete)continue;p.delete?v.push(p):v.retain(y,s.attributes.transform(g.attributes,p.attributes,a))}return v.chop()},l.prototype.transformPosition=function(u,a){a=!!a;for(var d=s.iterator(this.ops),m=0;d.hasNext()&&m<=u;){var v=d.peekLength(),y=d.peekType();if(d.next(),y==="delete"){u-=Math.min(v,u-m);continue}else y==="insert"&&(m<u||!a)&&(u+=v);m+=v}return u},n.exports=l},function(n,t){"use strict";var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=function(d){return typeof Array.isArray=="function"?Array.isArray(d):r.call(d)==="[object Array]"},f=function(d){if(!d||r.call(d)!=="[object Object]")return!1;var m=e.call(d,"constructor"),v=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!v)return!1;var y;for(y in d);return typeof y>"u"||e.call(d,y)},l=function(d,m){i&&m.name==="__proto__"?i(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},u=function(d,m){if(m==="__proto__")if(e.call(d,m)){if(o)return o(d,m).value}else return;return d[m]};n.exports=function a(){var d,m,v,y,g,p,h=arguments[0],c=1,b=arguments.length,_=!1;for(typeof h=="boolean"&&(_=h,h=arguments[1]||{},c=2),(h==null||typeof h!="object"&&typeof h!="function")&&(h={});c<b;++c)if(d=arguments[c],d!=null)for(m in d)v=u(h,m),y=u(d,m),h!==y&&(_&&y&&(f(y)||(g=s(y)))?(g?(g=!1,p=v&&s(v)?v:[]):p=v&&f(v)?v:{},l(h,{name:m,newValue:a(_,p,y)})):typeof y<"u"&&l(h,{name:m,newValue:y}));return h}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var r=function(){function E(A,k){for(var T=0;T<k.length;T++){var I=k[T];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,k,T){return k&&E(A.prototype,k),T&&E(A,T),A}}(),i=function E(A,k,T){A===null&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,k);if(I===void 0){var R=Object.getPrototypeOf(A);return R===null?void 0:E(R,k,T)}else{if("value"in I)return I.value;var U=I.get;return U===void 0?void 0:U.call(T)}},o=e(3),s=h(o),f=e(2),l=h(f),u=e(0),a=h(u),d=e(16),m=h(d),v=e(6),y=h(v),g=e(7),p=h(g);function h(E){return E&&E.__esModule?E:{default:E}}function c(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function b(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function _(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var w=1,S=function(E){_(A,E);function A(){return c(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return r(A,[{key:"attach",value:function(){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new l.default().insert(this.value(),(0,s.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(T,I){var R=a.default.query(T,a.default.Scope.BLOCK_ATTRIBUTE);R!=null&&this.attributes.attribute(R,I)}},{key:"formatAt",value:function(T,I,R,U){this.format(R,U)}},{key:"insertAt",value:function(T,I,R){if(typeof I=="string"&&I.endsWith(`
`)){var U=a.default.create(x.blotName);this.parent.insertBefore(U,T===0?this:this.next),U.insertAt(0,I.slice(0,-1))}else i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,T,I,R)}}]),A}(a.default.Embed);S.scope=a.default.Scope.BLOCK_BLOT;var x=function(E){_(A,E);function A(k){c(this,A);var T=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k));return T.cache={},T}return r(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(a.default.Leaf).reduce(function(T,I){return I.length()===0?T:T.insert(I.value(),O(I))},new l.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(T,I){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,T,I),this.cache={}}},{key:"formatAt",value:function(T,I,R,U){I<=0||(a.default.query(R,a.default.Scope.BLOCK)?T+I===this.length()&&this.format(R,U):i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,T,Math.min(I,this.length()-T-1),R,U),this.cache={})}},{key:"insertAt",value:function(T,I,R){if(R!=null)return i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,T,I,R);if(I.length!==0){var U=I.split(`
`),z=U.shift();z.length>0&&(T<this.length()-1||this.children.tail==null?i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(T,this.length()-1),z):this.children.tail.insertAt(this.children.tail.length(),z),this.cache={});var j=this;U.reduce(function(P,N){return j=j.split(P,!0),j.insertAt(0,N),N.length},T+z.length)}}},{key:"insertBefore",value:function(T,I){var R=this.children.head;i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,T,I),R instanceof m.default&&R.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+w),this.cache.length}},{key:"moveChildren",value:function(T,I){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,T,I),this.cache={}}},{key:"optimize",value:function(T){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,T),this.cache={}}},{key:"path",value:function(T){return i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,T,!0)}},{key:"removeChild",value:function(T){i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,T),this.cache={}}},{key:"split",value:function(T){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I&&(T===0||T>=this.length()-w)){var R=this.clone();return T===0?(this.parent.insertBefore(R,this),this):(this.parent.insertBefore(R,this.next),R)}else{var U=i(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,T,I);return this.cache={},U}}}]),A}(a.default.Block);x.blotName="block",x.tagName="P",x.defaultChild="break",x.allowedChildren=[y.default,a.default.Embed,p.default];function O(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(A=(0,s.default)(A,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?A:O(E.parent,A)}t.bubbleFormats=O,t.BlockEmbed=S,t.default=x},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},i=function(){function j(P,N){var D=[],C=!0,H=!1,q=void 0;try{for(var L=P[Symbol.iterator](),M;!(C=(M=L.next()).done)&&(D.push(M.value),!(N&&D.length===N));C=!0);}catch(V){H=!0,q=V}finally{try{!C&&L.return&&L.return()}finally{if(H)throw q}}return D}return function(P,N){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return j(P,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function j(P,N){for(var D=0;D<N.length;D++){var C=N[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(P,C.key,C)}}return function(P,N,D){return N&&j(P.prototype,N),D&&j(P,D),P}}();e(50);var s=e(2),f=O(s),l=e(14),u=O(l),a=e(8),d=O(a),m=e(9),v=O(m),y=e(0),g=O(y),p=e(15),h=O(p),c=e(3),b=O(c),_=e(10),w=O(_),S=e(34),x=O(S);function O(j){return j&&j.__esModule?j:{default:j}}function E(j,P,N){return P in j?Object.defineProperty(j,P,{value:N,enumerable:!0,configurable:!0,writable:!0}):j[P]=N,j}function A(j,P){if(!(j instanceof P))throw new TypeError("Cannot call a class as a function")}var k=(0,w.default)("quill"),T=function(){o(j,null,[{key:"debug",value:function(N){N===!0&&(N="log"),w.default.level(N)}},{key:"find",value:function(N){return N.__quill||g.default.find(N)}},{key:"import",value:function(N){return this.imports[N]==null&&k.error("Cannot import "+N+". Are you sure it was registered?"),this.imports[N]}},{key:"register",value:function(N,D){var C=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof N!="string"){var q=N.attrName||N.blotName;typeof q=="string"?this.register("formats/"+q,N,D):Object.keys(N).forEach(function(L){C.register(L,N[L],D)})}else this.imports[N]!=null&&!H&&k.warn("Overwriting "+N+" with",D),this.imports[N]=D,(N.startsWith("blots/")||N.startsWith("formats/"))&&D.blotName!=="abstract"?g.default.register(D):N.startsWith("modules")&&typeof D.register=="function"&&D.register()}}]);function j(P){var N=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,j),this.options=I(P,D),this.container=this.options.container,this.container==null)return k.error("Invalid Quill container",P);this.options.debug&&j.debug(this.options.debug);var C=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(q){q===d.default.events.TEXT_CHANGE&&N.root.classList.toggle("ql-blank",N.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(q,L){var M=N.selection.lastRange,V=M&&M.length===0?M.index:void 0;R.call(N,function(){return N.editor.update(null,L,V)},q)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+C+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(j,[{key:"addContainer",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof N=="string"){var C=N;N=document.createElement("div"),N.classList.add(C)}return this.container.insertBefore(N,D),N}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(N,D,C){var H=this,q=U(N,D,C),L=i(q,4);return N=L[0],D=L[1],C=L[3],R.call(this,function(){return H.editor.deleteText(N,D)},C,N,-1*D)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(N),this.container.classList.toggle("ql-disabled",!N)}},{key:"focus",value:function(){var N=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=N,this.scrollIntoView()}},{key:"format",value:function(N,D){var C=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return R.call(this,function(){var q=C.getSelection(!0),L=new f.default;if(q==null)return L;if(g.default.query(N,g.default.Scope.BLOCK))L=C.editor.formatLine(q.index,q.length,E({},N,D));else{if(q.length===0)return C.selection.format(N,D),L;L=C.editor.formatText(q.index,q.length,E({},N,D))}return C.setSelection(q,d.default.sources.SILENT),L},H)}},{key:"formatLine",value:function(N,D,C,H,q){var L=this,M=void 0,V=U(N,D,C,H,q),$=i(V,4);return N=$[0],D=$[1],M=$[2],q=$[3],R.call(this,function(){return L.editor.formatLine(N,D,M)},q,N,0)}},{key:"formatText",value:function(N,D,C,H,q){var L=this,M=void 0,V=U(N,D,C,H,q),$=i(V,4);return N=$[0],D=$[1],M=$[2],q=$[3],R.call(this,function(){return L.editor.formatText(N,D,M)},q,N,0)}},{key:"getBounds",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=void 0;typeof N=="number"?C=this.selection.getBounds(N,D):C=this.selection.getBounds(N.index,N.length);var H=this.container.getBoundingClientRect();return{bottom:C.bottom-H.top,height:C.height,left:C.left-H.left,right:C.right-H.left,top:C.top-H.top,width:C.width}}},{key:"getContents",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,C=U(N,D),H=i(C,2);return N=H[0],D=H[1],this.editor.getContents(N,D)}},{key:"getFormat",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof N=="number"?this.editor.getFormat(N,D):this.editor.getFormat(N.index,N.length)}},{key:"getIndex",value:function(N){return N.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(N){return this.scroll.leaf(N)}},{key:"getLine",value:function(N){return this.scroll.line(N)}},{key:"getLines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof N!="number"?this.scroll.lines(N.index,N.length):this.scroll.lines(N,D)}},{key:"getModule",value:function(N){return this.theme.modules[N]}},{key:"getSelection",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return N&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,C=U(N,D),H=i(C,2);return N=H[0],D=H[1],this.editor.getText(N,D)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(N,D,C){var H=this,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j.sources.API;return R.call(this,function(){return H.editor.insertEmbed(N,D,C)},q,N)}},{key:"insertText",value:function(N,D,C,H,q){var L=this,M=void 0,V=U(N,0,C,H,q),$=i(V,4);return N=$[0],M=$[2],q=$[3],R.call(this,function(){return L.editor.insertText(N,D,M)},q,N,D.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(N,D,C){this.clipboard.dangerouslyPasteHTML(N,D,C)}},{key:"removeFormat",value:function(N,D,C){var H=this,q=U(N,D,C),L=i(q,4);return N=L[0],D=L[1],C=L[3],R.call(this,function(){return H.editor.removeFormat(N,D)},C,N)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(N){var D=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return R.call(this,function(){N=new f.default(N);var H=D.getLength(),q=D.editor.deleteText(0,H),L=D.editor.applyDelta(N),M=L.ops[L.ops.length-1];M!=null&&typeof M.insert=="string"&&M.insert[M.insert.length-1]===`
`&&(D.editor.deleteText(D.getLength()-1,1),L.delete(1));var V=q.compose(L);return V},C)}},{key:"setSelection",value:function(N,D,C){if(N==null)this.selection.setRange(null,D||j.sources.API);else{var H=U(N,D,C),q=i(H,4);N=q[0],D=q[1],C=q[3],this.selection.setRange(new p.Range(N,D),C),C!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,C=new f.default().insert(N);return this.setContents(C,D)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,D=this.scroll.update(N);return this.selection.update(N),D}},{key:"updateContents",value:function(N){var D=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return R.call(this,function(){return N=new f.default(N),D.editor.applyDelta(N,C)},C,!0)}}]),j}();T.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},T.events=d.default.events,T.sources=d.default.sources,T.version="1.3.7",T.imports={delta:f.default,parchment:g.default,"core/module":v.default,"core/theme":x.default};function I(j,P){if(P=(0,b.default)(!0,{container:j,modules:{clipboard:!0,keyboard:!0,history:!0}},P),!P.theme||P.theme===T.DEFAULTS.theme)P.theme=x.default;else if(P.theme=T.import("themes/"+P.theme),P.theme==null)throw new Error("Invalid theme "+P.theme+". Did you register it?");var N=(0,b.default)(!0,{},P.theme.DEFAULTS);[N,P].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(q){H.modules[q]===!0&&(H.modules[q]={})})});var D=Object.keys(N.modules).concat(Object.keys(P.modules)),C=D.reduce(function(H,q){var L=T.import("modules/"+q);return L==null?k.error("Cannot load "+q+" module. Are you sure you registered it?"):H[q]=L.DEFAULTS||{},H},{});return P.modules!=null&&P.modules.toolbar&&P.modules.toolbar.constructor!==Object&&(P.modules.toolbar={container:P.modules.toolbar}),P=(0,b.default)(!0,{},T.DEFAULTS,{modules:C},N,P),["bounds","container","scrollingContainer"].forEach(function(H){typeof P[H]=="string"&&(P[H]=document.querySelector(P[H]))}),P.modules=Object.keys(P.modules).reduce(function(H,q){return P.modules[q]&&(H[q]=P.modules[q]),H},{}),P}function R(j,P,N,D){if(this.options.strict&&!this.isEnabled()&&P===d.default.sources.USER)return new f.default;var C=N==null?null:this.getSelection(),H=this.editor.delta,q=j();if(C!=null&&(N===!0&&(N=C.index),D==null?C=z(C,q,P):D!==0&&(C=z(C,N,D,P)),this.setSelection(C,d.default.sources.SILENT)),q.length()>0){var L,M=[d.default.events.TEXT_CHANGE,q,H,P];if((L=this.emitter).emit.apply(L,[d.default.events.EDITOR_CHANGE].concat(M)),P!==d.default.sources.SILENT){var V;(V=this.emitter).emit.apply(V,M)}}return q}function U(j,P,N,D,C){var H={};return typeof j.index=="number"&&typeof j.length=="number"?typeof P!="number"?(C=D,D=N,N=P,P=j.length,j=j.index):(P=j.length,j=j.index):typeof P!="number"&&(C=D,D=N,N=P,P=0),(typeof N>"u"?"undefined":r(N))==="object"?(H=N,C=D):typeof N=="string"&&(D!=null?H[N]=D:C=N),C=C||d.default.sources.API,[j,P,H,C]}function z(j,P,N,D){if(j==null)return null;var C=void 0,H=void 0;if(P instanceof f.default){var q=[j.index,j.index+j.length].map(function($){return P.transformPosition($,D!==d.default.sources.USER)}),L=i(q,2);C=L[0],H=L[1]}else{var M=[j.index,j.index+j.length].map(function($){return $<P||$===P&&D===d.default.sources.USER?$:N>=0?$+N:Math.max(P,$+N)}),V=i(M,2);C=V[0],H=V[1]}return new p.Range(C,H-C)}t.expandConfig=I,t.overload=U,t.default=T},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function y(g,p){for(var h=0;h<p.length;h++){var c=p[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}return function(g,p,h){return p&&y(g.prototype,p),h&&y(g,h),g}}(),i=function y(g,p,h){g===null&&(g=Function.prototype);var c=Object.getOwnPropertyDescriptor(g,p);if(c===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,p,h)}else{if("value"in c)return c.value;var _=c.get;return _===void 0?void 0:_.call(h)}},o=e(7),s=u(o),f=e(0),l=u(f);function u(y){return y&&y.__esModule?y:{default:y}}function a(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function d(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var v=function(y){m(g,y);function g(){return a(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return r(g,[{key:"formatAt",value:function(h,c,b,_){if(g.compare(this.statics.blotName,b)<0&&l.default.query(b,l.default.Scope.BLOT)){var w=this.isolate(h,c);_&&w.wrap(b,_)}else i(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,h,c,b,_)}},{key:"optimize",value:function(h){if(i(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,h),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var c=this.parent.isolate(this.offset(),this.length());this.moveChildren(c),c.wrap(this)}}}],[{key:"compare",value:function(h,c){var b=g.order.indexOf(h),_=g.order.indexOf(c);return b>=0||_>=0?b-_:h===c?0:h<c?-1:1}}]),g}(l.default.Inline);v.allowedChildren=[v,l.default.Embed,s.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=v},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}function s(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function f(a,d){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:a}function l(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}var u=function(a){l(d,a);function d(){return s(this,d),f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(i.default.Text);t.default=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function p(h,c){for(var b=0;b<c.length;b++){var _=c[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,_.key,_)}}return function(h,c,b){return c&&p(h.prototype,c),b&&p(h,b),h}}(),i=function p(h,c,b){h===null&&(h=Function.prototype);var _=Object.getOwnPropertyDescriptor(h,c);if(_===void 0){var w=Object.getPrototypeOf(h);return w===null?void 0:p(w,c,b)}else{if("value"in _)return _.value;var S=_.get;return S===void 0?void 0:S.call(b)}},o=e(54),s=u(o),f=e(10),l=u(f);function u(p){return p&&p.__esModule?p:{default:p}}function a(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function m(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var v=(0,l.default)("quill:events"),y=["selectionchange","mousedown","mouseup","click"];y.forEach(function(p){document.addEventListener(p,function(){for(var h=arguments.length,c=Array(h),b=0;b<h;b++)c[b]=arguments[b];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(_){if(_.__quill&&_.__quill.emitter){var w;(w=_.__quill.emitter).handleDOM.apply(w,c)}})})});var g=function(p){m(h,p);function h(){a(this,h);var c=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return c.listeners={},c.on("error",v.error),c}return r(h,[{key:"emit",value:function(){v.log.apply(v,arguments),i(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(b){for(var _=arguments.length,w=Array(_>1?_-1:0),S=1;S<_;S++)w[S-1]=arguments[S];(this.listeners[b.type]||[]).forEach(function(x){var O=x.node,E=x.handler;(b.target===O||O.contains(b.target))&&E.apply(void 0,[b].concat(w))})}},{key:"listenDOM",value:function(b,_,w){this.listeners[b]||(this.listeners[b]=[]),this.listeners[b].push({node:_,handler:w})}}]),h}(s.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},t.default=g},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}var i=function o(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r(this,o),this.quill=s,this.options=f};i.DEFAULTS={},t.default=i},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["error","warn","log","info"],i="warn";function o(f){if(r.indexOf(f)<=r.indexOf(i)){for(var l,u=arguments.length,a=Array(u>1?u-1:0),d=1;d<u;d++)a[d-1]=arguments[d];(l=console)[f].apply(l,a)}}function s(f){return r.reduce(function(l,u){return l[u]=o.bind(console,u,f),l},{})}o.level=s.level=function(f){i=f},t.default=s},function(n,t,e){var r=Array.prototype.slice,i=e(52),o=e(53),s=n.exports=function(a,d,m){return m||(m={}),a===d?!0:a instanceof Date&&d instanceof Date?a.getTime()===d.getTime():!a||!d||typeof a!="object"&&typeof d!="object"?m.strict?a===d:a==d:u(a,d,m)};function f(a){return a==null}function l(a){return!(!a||typeof a!="object"||typeof a.length!="number"||typeof a.copy!="function"||typeof a.slice!="function"||a.length>0&&typeof a[0]!="number")}function u(a,d,m){var v,y;if(f(a)||f(d)||a.prototype!==d.prototype)return!1;if(o(a))return o(d)?(a=r.call(a),d=r.call(d),s(a,d,m)):!1;if(l(a)){if(!l(d)||a.length!==d.length)return!1;for(v=0;v<a.length;v++)if(a[v]!==d[v])return!1;return!0}try{var g=i(a),p=i(d)}catch{return!1}if(g.length!=p.length)return!1;for(g.sort(),p.sort(),v=g.length-1;v>=0;v--)if(g[v]!=p[v])return!1;for(v=g.length-1;v>=0;v--)if(y=g[v],!s(a[y],d[y],m))return!1;return typeof a==typeof d}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(1),i=function(){function o(s,f,l){l===void 0&&(l={}),this.attrName=s,this.keyName=f;var u=r.Scope.TYPE&r.Scope.ATTRIBUTE;l.scope!=null?this.scope=l.scope&r.Scope.LEVEL|u:this.scope=r.Scope.ATTRIBUTE,l.whitelist!=null&&(this.whitelist=l.whitelist)}return o.keys=function(s){return[].map.call(s.attributes,function(f){return f.name})},o.prototype.add=function(s,f){return this.canAdd(s,f)?(s.setAttribute(this.keyName,f),!0):!1},o.prototype.canAdd=function(s,f){var l=r.query(s,r.Scope.BLOT&(this.scope|r.Scope.TYPE));return l==null?!1:this.whitelist==null?!0:typeof f=="string"?this.whitelist.indexOf(f.replace(/["']/g,""))>-1:this.whitelist.indexOf(f)>-1},o.prototype.remove=function(s){s.removeAttribute(this.keyName)},o.prototype.value=function(s){var f=s.getAttribute(this.keyName);return this.canAdd(s,f)&&f?f:""},o}();t.default=i},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var r=function(){function S(x,O){var E=[],A=!0,k=!1,T=void 0;try{for(var I=x[Symbol.iterator](),R;!(A=(R=I.next()).done)&&(E.push(R.value),!(O&&E.length===O));A=!0);}catch(U){k=!0,T=U}finally{try{!A&&I.return&&I.return()}finally{if(k)throw T}}return E}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return S(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function S(x,O){for(var E=0;E<O.length;E++){var A=O[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}return function(x,O,E){return O&&S(x.prototype,O),E&&S(x,E),x}}(),o=function S(x,O,E){x===null&&(x=Function.prototype);var A=Object.getOwnPropertyDescriptor(x,O);if(A===void 0){var k=Object.getPrototypeOf(x);return k===null?void 0:S(k,O,E)}else{if("value"in A)return A.value;var T=A.get;return T===void 0?void 0:T.call(E)}},s=e(2),f=p(s),l=e(0),u=p(l),a=e(4),d=p(a),m=e(6),v=p(m),y=e(7),g=p(y);function p(S){return S&&S.__esModule?S:{default:S}}function h(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}function c(S,x){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:S}function b(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);S.prototype=Object.create(x&&x.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(S,x):S.__proto__=x)}var _=function(S){b(x,S);function x(){return h(this,x),c(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(v.default);_.blotName="code",_.tagName="CODE";var w=function(S){b(x,S);function x(){return h(this,x),c(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"delta",value:function(){var E=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(k,T){return k.insert(T).insert(`
`,E.formats())},new f.default)}},{key:"format",value:function(E,A){if(!(E===this.statics.blotName&&A)){var k=this.descendant(g.default,this.length()-1),T=r(k,1),I=T[0];I?.deleteAt(I.length()-1,1),o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,E,A)}}},{key:"formatAt",value:function(E,A,k,T){if(A!==0&&!(u.default.query(k,u.default.Scope.BLOCK)==null||k===this.statics.blotName&&T===this.statics.formats(this.domNode))){var I=this.newlineIndex(E);if(!(I<0||I>=E+A)){var R=this.newlineIndex(E,!0)+1,U=I-R+1,z=this.isolate(R,U),j=z.next;z.format(k,T),j instanceof x&&j.formatAt(0,E-R+A-U,k,T)}}}},{key:"insertAt",value:function(E,A,k){if(k==null){var T=this.descendant(g.default,E),I=r(T,2),R=I[0],U=I[1];R.insertAt(U,A)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var k=this.domNode.textContent.slice(E).indexOf(`
`);return k>-1?E+k:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,E);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(E),A.moveChildren(this),A.remove())}},{key:"replace",value:function(E){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var k=u.default.find(A);k==null?A.parentNode.removeChild(A):k instanceof u.default.Embed?k.remove():k.unwrap()})}}],[{key:"create",value:function(E){var A=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,E);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),x}(d.default);w.blotName="code-block",w.tagName="PRE",w.TAB="  ",t.Code=_,t.default=w},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},i=function(){function j(P,N){var D=[],C=!0,H=!1,q=void 0;try{for(var L=P[Symbol.iterator](),M;!(C=(M=L.next()).done)&&(D.push(M.value),!(N&&D.length===N));C=!0);}catch(V){H=!0,q=V}finally{try{!C&&L.return&&L.return()}finally{if(H)throw q}}return D}return function(P,N){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return j(P,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function j(P,N){for(var D=0;D<N.length;D++){var C=N[D];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(P,C.key,C)}}return function(P,N,D){return N&&j(P.prototype,N),D&&j(P,D),P}}(),s=e(2),f=A(s),l=e(20),u=A(l),a=e(0),d=A(a),m=e(13),v=A(m),y=e(24),g=A(y),p=e(4),h=A(p),c=e(16),b=A(c),_=e(21),w=A(_),S=e(11),x=A(S),O=e(3),E=A(O);function A(j){return j&&j.__esModule?j:{default:j}}function k(j,P,N){return P in j?Object.defineProperty(j,P,{value:N,enumerable:!0,configurable:!0,writable:!0}):j[P]=N,j}function T(j,P){if(!(j instanceof P))throw new TypeError("Cannot call a class as a function")}var I=/^[ -~]*$/,R=function(){function j(P){T(this,j),this.scroll=P,this.delta=this.getDelta()}return o(j,[{key:"applyDelta",value:function(N){var D=this,C=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),N=z(N),N.reduce(function(q,L){var M=L.retain||L.delete||L.insert.length||1,V=L.attributes||{};if(L.insert!=null){if(typeof L.insert=="string"){var $=L.insert;$.endsWith(`
`)&&C&&(C=!1,$=$.slice(0,-1)),q>=H&&!$.endsWith(`
`)&&(C=!0),D.scroll.insertAt(q,$);var Z=D.scroll.line(q),et=i(Z,2),ct=et[0],ft=et[1],at=(0,E.default)({},(0,p.bubbleFormats)(ct));if(ct instanceof h.default){var bt=ct.descendant(d.default.Leaf,ft),Pt=i(bt,1),Ct=Pt[0];at=(0,E.default)(at,(0,p.bubbleFormats)(Ct))}V=u.default.attributes.diff(at,V)||{}}else if(r(L.insert)==="object"){var G=Object.keys(L.insert)[0];if(G==null)return q;D.scroll.insertAt(q,G,L.insert[G])}H+=M}return Object.keys(V).forEach(function(W){D.scroll.formatAt(q,M,W,V[W])}),q+M},0),N.reduce(function(q,L){return typeof L.delete=="number"?(D.scroll.deleteAt(q,L.delete),q):q+(L.retain||L.insert.length||1)},0),this.scroll.batchEnd(),this.update(N)}},{key:"deleteText",value:function(N,D){return this.scroll.deleteAt(N,D),this.update(new f.default().retain(N).delete(D))}},{key:"formatLine",value:function(N,D){var C=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(q){if(!(C.scroll.whitelist!=null&&!C.scroll.whitelist[q])){var L=C.scroll.lines(N,Math.max(D,1)),M=D;L.forEach(function(V){var $=V.length();if(!(V instanceof v.default))V.format(q,H[q]);else{var Z=N-V.offset(C.scroll),et=V.newlineIndex(Z+M)-Z+1;V.formatAt(Z,et,q,H[q])}M-=$})}}),this.scroll.optimize(),this.update(new f.default().retain(N).retain(D,(0,w.default)(H)))}},{key:"formatText",value:function(N,D){var C=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(q){C.scroll.formatAt(N,D,q,H[q])}),this.update(new f.default().retain(N).retain(D,(0,w.default)(H)))}},{key:"getContents",value:function(N,D){return this.delta.slice(N,N+D)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(N,D){return N.concat(D.delta())},new f.default)}},{key:"getFormat",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=[],H=[];D===0?this.scroll.path(N).forEach(function(L){var M=i(L,1),V=M[0];V instanceof h.default?C.push(V):V instanceof d.default.Leaf&&H.push(V)}):(C=this.scroll.lines(N,D),H=this.scroll.descendants(d.default.Leaf,N,D));var q=[C,H].map(function(L){if(L.length===0)return{};for(var M=(0,p.bubbleFormats)(L.shift());Object.keys(M).length>0;){var V=L.shift();if(V==null)return M;M=U((0,p.bubbleFormats)(V),M)}return M});return E.default.apply(E.default,q)}},{key:"getText",value:function(N,D){return this.getContents(N,D).filter(function(C){return typeof C.insert=="string"}).map(function(C){return C.insert}).join("")}},{key:"insertEmbed",value:function(N,D,C){return this.scroll.insertAt(N,D,C),this.update(new f.default().retain(N).insert(k({},D,C)))}},{key:"insertText",value:function(N,D){var C=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D=D.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(N,D),Object.keys(H).forEach(function(q){C.scroll.formatAt(N,D.length,q,H[q])}),this.update(new f.default().retain(N).insert(D,(0,w.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var N=this.scroll.children.head;return N.statics.blotName!==h.default.blotName||N.children.length>1?!1:N.children.head instanceof b.default}},{key:"removeFormat",value:function(N,D){var C=this.getText(N,D),H=this.scroll.line(N+D),q=i(H,2),L=q[0],M=q[1],V=0,$=new f.default;L!=null&&(L instanceof v.default?V=L.newlineIndex(M)-M+1:V=L.length()-M,$=L.delta().slice(M,M+V-1).insert(`
`));var Z=this.getContents(N,D+V),et=Z.diff(new f.default().insert(C).concat($)),ct=new f.default().retain(N).concat(et);return this.applyDelta(ct)}},{key:"update",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(D.length===1&&D[0].type==="characterData"&&D[0].target.data.match(I)&&d.default.find(D[0].target)){var q=d.default.find(D[0].target),L=(0,p.bubbleFormats)(q),M=q.offset(this.scroll),V=D[0].oldValue.replace(g.default.CONTENTS,""),$=new f.default().insert(V),Z=new f.default().insert(q.value()),et=new f.default().retain(M).concat($.diff(Z,C));N=et.reduce(function(ct,ft){return ft.insert?ct.insert(ft.insert,L):ct.push(ft)},new f.default),this.delta=H.compose(N)}else this.delta=this.getDelta(),(!N||!(0,x.default)(H.compose(N),this.delta))&&(N=H.diff(this.delta,C));return N}}]),j}();function U(j,P){return Object.keys(P).reduce(function(N,D){return j[D]==null||(P[D]===j[D]?N[D]=P[D]:Array.isArray(P[D])?P[D].indexOf(j[D])<0&&(N[D]=P[D].concat([j[D]])):N[D]=[P[D],j[D]]),N},{})}function z(j){return j.reduce(function(P,N){if(N.insert===1){var D=(0,w.default)(N.attributes);return delete D.image,P.insert({image:N.attributes.image},D)}if(N.attributes!=null&&(N.attributes.list===!0||N.attributes.bullet===!0)&&(N=(0,w.default)(N),N.attributes.list?N.attributes.list="ordered":(N.attributes.list="bullet",delete N.attributes.bullet)),typeof N.insert=="string"){var C=N.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return P.insert(C,N.attributes)}return P.push(N)},new f.default)}t.default=R},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var r=function(){function S(x,O){var E=[],A=!0,k=!1,T=void 0;try{for(var I=x[Symbol.iterator](),R;!(A=(R=I.next()).done)&&(E.push(R.value),!(O&&E.length===O));A=!0);}catch(U){k=!0,T=U}finally{try{!A&&I.return&&I.return()}finally{if(k)throw T}}return E}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return S(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function S(x,O){for(var E=0;E<O.length;E++){var A=O[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(x,A.key,A)}}return function(x,O,E){return O&&S(x.prototype,O),E&&S(x,E),x}}(),o=e(0),s=g(o),f=e(21),l=g(f),u=e(11),a=g(u),d=e(8),m=g(d),v=e(10),y=g(v);function g(S){return S&&S.__esModule?S:{default:S}}function p(S){if(Array.isArray(S)){for(var x=0,O=Array(S.length);x<S.length;x++)O[x]=S[x];return O}else return Array.from(S)}function h(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}var c=(0,y.default)("quill:selection"),b=function S(x){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;h(this,S),this.index=x,this.length=O},_=function(){function S(x,O){var E=this;h(this,S),this.emitter=O,this.scroll=x,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=s.default.create("cursor",this),this.lastRange=this.savedRange=new b(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,m.default.sources.USER),1)}),this.emitter.on(m.default.events.EDITOR_CHANGE,function(A,k){A===m.default.events.TEXT_CHANGE&&k.length()>0&&E.update(m.default.sources.SILENT)}),this.emitter.on(m.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var A=E.getNativeRange();A!=null&&A.start.node!==E.cursor.textNode&&E.emitter.once(m.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(m.default.events.SCROLL_OPTIMIZE,function(A,k){if(k.range){var T=k.range,I=T.startNode,R=T.startOffset,U=T.endNode,z=T.endOffset;E.setNativeRange(I,R,U,z)}}),this.update(m.default.sources.SILENT)}return i(S,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var E=O.cursor.restore();if(!E)return;setTimeout(function(){O.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(m.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||s.default.query(O,s.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var k=s.default.find(A.start.node,!1);if(k==null)return;if(k instanceof s.default.Leaf){var T=k.split(A.start.offset);k.parent.insertBefore(this.cursor,T)}else k.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(O,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();O=Math.min(O,A-1),E=Math.min(O+E,A-1)-O;var k=void 0,T=this.scroll.leaf(O),I=r(T,2),R=I[0],U=I[1];if(R==null)return null;var z=R.position(U,!0),j=r(z,2);k=j[0],U=j[1];var P=document.createRange();if(E>0){P.setStart(k,U);var N=this.scroll.leaf(O+E),D=r(N,2);if(R=D[0],U=D[1],R==null)return null;var C=R.position(U,!0),H=r(C,2);return k=H[0],U=H[1],P.setEnd(k,U),P.getBoundingClientRect()}else{var q="left",L=void 0;return k instanceof Text?(U<k.data.length?(P.setStart(k,U),P.setEnd(k,U+1)):(P.setStart(k,U-1),P.setEnd(k,U),q="right"),L=P.getBoundingClientRect()):(L=R.domNode.getBoundingClientRect(),U>0&&(q="right")),{bottom:L.top+L.height,height:L.height,left:L[q],right:L[q],top:L.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var E=O.getRangeAt(0);if(E==null)return null;var A=this.normalizeNative(E);return c.info("getNativeRange",A),A}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var E=this.normalizedToRange(O);return[E,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var E=this,A=[[O.start.node,O.start.offset]];O.native.collapsed||A.push([O.end.node,O.end.offset]);var k=A.map(function(R){var U=r(R,2),z=U[0],j=U[1],P=s.default.find(z,!0),N=P.offset(E.scroll);return j===0?N:P instanceof s.default.Container?N+P.length():N+P.index(z,j)}),T=Math.min(Math.max.apply(Math,p(k)),this.scroll.length()-1),I=Math.min.apply(Math,[T].concat(p(k)));return new b(I,T-I)}},{key:"normalizeNative",value:function(O){if(!w(this.root,O.startContainer)||!O.collapsed&&!w(this.root,O.endContainer))return null;var E={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[E.start,E.end].forEach(function(A){for(var k=A.node,T=A.offset;!(k instanceof Text)&&k.childNodes.length>0;)if(k.childNodes.length>T)k=k.childNodes[T],T=0;else if(k.childNodes.length===T)k=k.lastChild,T=k instanceof Text?k.data.length:k.childNodes.length+1;else break;A.node=k,A.offset=T}),E}},{key:"rangeToNative",value:function(O){var E=this,A=O.collapsed?[O.index]:[O.index,O.index+O.length],k=[],T=this.scroll.length();return A.forEach(function(I,R){I=Math.min(T-1,I);var U=void 0,z=E.scroll.leaf(I),j=r(z,2),P=j[0],N=j[1],D=P.position(N,R!==0),C=r(D,2);U=C[0],N=C[1],k.push(U,N)}),k.length<2&&(k=k.concat(k)),k}},{key:"scrollIntoView",value:function(O){var E=this.lastRange;if(E!=null){var A=this.getBounds(E.index,E.length);if(A!=null){var k=this.scroll.length()-1,T=this.scroll.line(Math.min(E.index,k)),I=r(T,1),R=I[0],U=R;if(E.length>0){var z=this.scroll.line(Math.min(E.index+E.length,k)),j=r(z,1);U=j[0]}if(!(R==null||U==null)){var P=O.getBoundingClientRect();A.top<P.top?O.scrollTop-=P.top-A.top:A.bottom>P.bottom&&(O.scrollTop+=A.bottom-P.bottom)}}}}},{key:"setNativeRange",value:function(O,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(c.info("setNativeRange",O,E,A,k),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||A.parentNode==null))){var I=document.getSelection();if(I!=null)if(O!=null){this.hasFocus()||this.root.focus();var R=(this.getNativeRange()||{}).native;if(R==null||T||O!==R.startContainer||E!==R.startOffset||A!==R.endContainer||k!==R.endOffset){O.tagName=="BR"&&(E=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),A.tagName=="BR"&&(k=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var U=document.createRange();U.setStart(O,E),U.setEnd(A,k),I.removeAllRanges(),I.addRange(U)}}else I.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;if(typeof E=="string"&&(A=E,E=!1),c.info("setRange",O),O!=null){var k=this.rangeToNative(O);this.setNativeRange.apply(this,p(k).concat([E]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,E=this.lastRange,A=this.getRange(),k=r(A,2),T=k[0],I=k[1];if(this.lastRange=T,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,a.default)(E,this.lastRange)){var R;!this.composing&&I!=null&&I.native.collapsed&&I.start.node!==this.cursor.textNode&&this.cursor.restore();var U=[m.default.events.SELECTION_CHANGE,(0,l.default)(this.lastRange),(0,l.default)(E),O];if((R=this.emitter).emit.apply(R,[m.default.events.EDITOR_CHANGE].concat(U)),O!==m.default.sources.SILENT){var z;(z=this.emitter).emit.apply(z,U)}}}}]),S}();function w(S,x){try{x.parentNode}catch{return!1}return x instanceof Text&&(x=x.parentNode),S.contains(x)}t.Range=b,t.default=_},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function m(v,y){for(var g=0;g<y.length;g++){var p=y[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}return function(v,y,g){return y&&m(v.prototype,y),g&&m(v,g),v}}(),i=function m(v,y,g){v===null&&(v=Function.prototype);var p=Object.getOwnPropertyDescriptor(v,y);if(p===void 0){var h=Object.getPrototypeOf(v);return h===null?void 0:m(h,y,g)}else{if("value"in p)return p.value;var c=p.get;return c===void 0?void 0:c.call(g)}},o=e(0),s=f(o);function f(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function u(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function a(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d=function(m){a(v,m);function v(){return l(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return r(v,[{key:"insertInto",value:function(g,p){g.children.length===0?i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,g,p):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(s.default.Embed);d.blotName="break",d.tagName="BR",t.default=d},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var m in d)d.hasOwnProperty(m)&&(a[m]=d[m])};return function(a,d){u(a,d);function m(){this.constructor=a}a.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(44),o=e(30),s=e(1),f=function(u){r(a,u);function a(d){var m=u.call(this,d)||this;return m.build(),m}return a.prototype.appendChild=function(d){this.insertBefore(d)},a.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},a.prototype.build=function(){var d=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(m){try{var v=l(m);d.insertBefore(v,d.children.head||void 0)}catch(y){if(y instanceof s.ParchmentError)return;throw y}})},a.prototype.deleteAt=function(d,m){if(d===0&&m===this.length())return this.remove();this.children.forEachAt(d,m,function(v,y,g){v.deleteAt(y,g)})},a.prototype.descendant=function(d,m){var v=this.children.find(m),y=v[0],g=v[1];return d.blotName==null&&d(y)||d.blotName!=null&&y instanceof d?[y,g]:y instanceof a?y.descendant(d,g):[null,-1]},a.prototype.descendants=function(d,m,v){m===void 0&&(m=0),v===void 0&&(v=Number.MAX_VALUE);var y=[],g=v;return this.children.forEachAt(m,v,function(p,h,c){(d.blotName==null&&d(p)||d.blotName!=null&&p instanceof d)&&y.push(p),p instanceof a&&(y=y.concat(p.descendants(d,h,g))),g-=c}),y},a.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),u.prototype.detach.call(this)},a.prototype.formatAt=function(d,m,v,y){this.children.forEachAt(d,m,function(g,p,h){g.formatAt(p,h,v,y)})},a.prototype.insertAt=function(d,m,v){var y=this.children.find(d),g=y[0],p=y[1];if(g)g.insertAt(p,m,v);else{var h=v==null?s.create("text",m):s.create(m,v);this.appendChild(h)}},a.prototype.insertBefore=function(d,m){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return d instanceof v}))throw new s.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,m)},a.prototype.length=function(){return this.children.reduce(function(d,m){return d+m.length()},0)},a.prototype.moveChildren=function(d,m){this.children.forEach(function(v){d.insertBefore(v,m)})},a.prototype.optimize=function(d){if(u.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var m=s.create(this.statics.defaultChild);this.appendChild(m),m.optimize(d)}else this.remove()},a.prototype.path=function(d,m){m===void 0&&(m=!1);var v=this.children.find(d,m),y=v[0],g=v[1],p=[[this,d]];return y instanceof a?p.concat(y.path(g,m)):(y!=null&&p.push([y,g]),p)},a.prototype.removeChild=function(d){this.children.remove(d)},a.prototype.replace=function(d){d instanceof a&&d.moveChildren(this),u.prototype.replace.call(this,d)},a.prototype.split=function(d,m){if(m===void 0&&(m=!1),!m){if(d===0)return this;if(d===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(d,this.length(),function(y,g,p){y=y.split(g,m),v.appendChild(y)}),v},a.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},a.prototype.update=function(d,m){var v=this,y=[],g=[];d.forEach(function(p){p.target===v.domNode&&p.type==="childList"&&(y.push.apply(y,p.addedNodes),g.push.apply(g,p.removedNodes))}),g.forEach(function(p){if(!(p.parentNode!=null&&p.tagName!=="IFRAME"&&document.body.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var h=s.find(p);h!=null&&(h.domNode.parentNode==null||h.domNode.parentNode===v.domNode)&&h.detach()}}),y.filter(function(p){return p.parentNode==v.domNode}).sort(function(p,h){return p===h?0:p.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(p){var h=null;p.nextSibling!=null&&(h=s.find(p.nextSibling));var c=l(p);(c.next!=h||c.next==null)&&(c.parent!=null&&c.parent.removeChild(v),v.insertBefore(c,h||void 0))})},a}(o.default);function l(u){var a=s.find(u);if(a==null)try{a=s.create(u)}catch{a=s.create(s.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(m){a.domNode.appendChild(m)}),u.parentNode&&u.parentNode.replaceChild(a.domNode,u),a.attach()}return a}t.default=f},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var m in d)d.hasOwnProperty(m)&&(a[m]=d[m])};return function(a,d){u(a,d);function m(){this.constructor=a}a.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(12),o=e(31),s=e(17),f=e(1),l=function(u){r(a,u);function a(d){var m=u.call(this,d)||this;return m.attributes=new o.default(m.domNode),m}return a.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},a.prototype.format=function(d,m){var v=f.query(d);v instanceof i.default?this.attributes.attribute(v,m):m&&v!=null&&(d!==this.statics.blotName||this.formats()[d]!==m)&&this.replaceWith(d,m)},a.prototype.formats=function(){var d=this.attributes.values(),m=this.statics.formats(this.domNode);return m!=null&&(d[this.statics.blotName]=m),d},a.prototype.replaceWith=function(d,m){var v=u.prototype.replaceWith.call(this,d,m);return this.attributes.copy(v),v},a.prototype.update=function(d,m){var v=this;u.prototype.update.call(this,d,m),d.some(function(y){return y.target===v.domNode&&y.type==="attributes"})&&this.attributes.build()},a.prototype.wrap=function(d,m){var v=u.prototype.wrap.call(this,d,m);return v instanceof a&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},a}(s.default);t.default=l},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var a in u)u.hasOwnProperty(a)&&(l[a]=u[a])};return function(l,u){f(l,u);function a(){this.constructor=l}l.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(30),o=e(1),s=function(f){r(l,f);function l(){return f!==null&&f.apply(this,arguments)||this}return l.value=function(u){return!0},l.prototype.index=function(u,a){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(a,1):-1},l.prototype.position=function(u,a){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(d+=1),[this.parent.domNode,d]},l.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},l.scope=o.Scope.INLINE_BLOT,l}(i.default);t.default=s},function(n,t,e){var r=e(11),i=e(3),o={attributes:{compose:function(f,l,u){typeof f!="object"&&(f={}),typeof l!="object"&&(l={});var a=i(!0,{},l);u||(a=Object.keys(a).reduce(function(m,v){return a[v]!=null&&(m[v]=a[v]),m},{}));for(var d in f)f[d]!==void 0&&l[d]===void 0&&(a[d]=f[d]);return Object.keys(a).length>0?a:void 0},diff:function(f,l){typeof f!="object"&&(f={}),typeof l!="object"&&(l={});var u=Object.keys(f).concat(Object.keys(l)).reduce(function(a,d){return r(f[d],l[d])||(a[d]=l[d]===void 0?null:l[d]),a},{});return Object.keys(u).length>0?u:void 0},transform:function(f,l,u){if(typeof f!="object")return l;if(typeof l=="object"){if(!u)return l;var a=Object.keys(l).reduce(function(d,m){return f[m]===void 0&&(d[m]=l[m]),d},{});return Object.keys(a).length>0?a:void 0}}},iterator:function(f){return new s(f)},length:function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}};function s(f){this.ops=f,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(f){f||(f=1/0);var l=this.ops[this.index];if(l){var u=this.offset,a=o.length(l);if(f>=a-u?(f=a-u,this.index+=1,this.offset=0):this.offset+=f,typeof l.delete=="number")return{delete:f};var d={};return l.attributes&&(d.attributes=l.attributes),typeof l.retain=="number"?d.retain=f:typeof l.insert=="string"?d.insert=l.insert.substr(u,f):d.insert=l.insert,d}else return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,l=this.index,u=this.next(),a=this.ops.slice(this.index);return this.offset=f,this.index=l,[u].concat(a)}else return[]},n.exports=o},function(n,t){var e=function(){"use strict";function r(v,y){return y!=null&&v instanceof y}var i;try{i=Map}catch{i=function(){}}var o;try{o=Set}catch{o=function(){}}var s;try{s=Promise}catch{s=function(){}}function f(v,y,g,p,h){typeof y=="object"&&(g=y.depth,p=y.prototype,h=y.includeNonEnumerable,y=y.circular);var c=[],b=[],_=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof g>"u"&&(g=1/0);function w(S,x){if(S===null)return null;if(x===0)return S;var O,E;if(typeof S!="object")return S;if(r(S,i))O=new i;else if(r(S,o))O=new o;else if(r(S,s))O=new s(function(P,N){S.then(function(D){P(w(D,x-1))},function(D){N(w(D,x-1))})});else if(f.__isArray(S))O=[];else if(f.__isRegExp(S))O=new RegExp(S.source,m(S)),S.lastIndex&&(O.lastIndex=S.lastIndex);else if(f.__isDate(S))O=new Date(S.getTime());else{if(_&&Buffer.isBuffer(S))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(S.length):O=new Buffer(S.length),S.copy(O),O;r(S,Error)?O=Object.create(S):typeof p>"u"?(E=Object.getPrototypeOf(S),O=Object.create(E)):(O=Object.create(p),E=p)}if(y){var A=c.indexOf(S);if(A!=-1)return b[A];c.push(S),b.push(O)}r(S,i)&&S.forEach(function(P,N){var D=w(N,x-1),C=w(P,x-1);O.set(D,C)}),r(S,o)&&S.forEach(function(P){var N=w(P,x-1);O.add(N)});for(var k in S){var T;E&&(T=Object.getOwnPropertyDescriptor(E,k)),!(T&&T.set==null)&&(O[k]=w(S[k],x-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(S),k=0;k<I.length;k++){var R=I[k],U=Object.getOwnPropertyDescriptor(S,R);U&&!U.enumerable&&!h||(O[R]=w(S[R],x-1),U.enumerable||Object.defineProperty(O,R,{enumerable:!1}))}if(h)for(var z=Object.getOwnPropertyNames(S),k=0;k<z.length;k++){var j=z[k],U=Object.getOwnPropertyDescriptor(S,j);U&&U.enumerable||(O[j]=w(S[j],x-1),Object.defineProperty(O,j,{enumerable:!1}))}return O}return w(v,g)}f.clonePrototype=function(y){if(y===null)return null;var g=function(){};return g.prototype=y,new g};function l(v){return Object.prototype.toString.call(v)}f.__objToStr=l;function u(v){return typeof v=="object"&&l(v)==="[object Date]"}f.__isDate=u;function a(v){return typeof v=="object"&&l(v)==="[object Array]"}f.__isArray=a;function d(v){return typeof v=="object"&&l(v)==="[object RegExp]"}f.__isRegExp=d;function m(v){var y="";return v.global&&(y+="g"),v.ignoreCase&&(y+="i"),v.multiline&&(y+="m"),y}return f.__getRegExpFlags=m,f}();typeof n=="object"&&n.exports&&(n.exports=e)},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function O(E,A){var k=[],T=!0,I=!1,R=void 0;try{for(var U=E[Symbol.iterator](),z;!(T=(z=U.next()).done)&&(k.push(z.value),!(A&&k.length===A));T=!0);}catch(j){I=!0,R=j}finally{try{!T&&U.return&&U.return()}finally{if(I)throw R}}return k}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return O(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function O(E,A){for(var k=0;k<A.length;k++){var T=A[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,A,k){return A&&O(E.prototype,A),k&&O(E,k),E}}(),o=function O(E,A,k){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,A);if(T===void 0){var I=Object.getPrototypeOf(E);return I===null?void 0:O(I,A,k)}else{if("value"in T)return T.value;var R=T.get;return R===void 0?void 0:R.call(k)}},s=e(0),f=c(s),l=e(8),u=c(l),a=e(4),d=c(a),m=e(16),v=c(m),y=e(13),g=c(y),p=e(25),h=c(p);function c(O){return O&&O.__esModule?O:{default:O}}function b(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}function _(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function w(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}function S(O){return O instanceof d.default||O instanceof a.BlockEmbed}var x=function(O){w(E,O);function E(A,k){b(this,E);var T=_(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A));return T.emitter=k.emitter,Array.isArray(k.whitelist)&&(T.whitelist=k.whitelist.reduce(function(I,R){return I[R]=!0,I},{})),T.domNode.addEventListener("DOMNodeInserted",function(){}),T.optimize(),T.enable(),T}return i(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(k,T){var I=this.line(k),R=r(I,2),U=R[0],z=R[1],j=this.line(k+T),P=r(j,1),N=P[0];if(o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,k,T),N!=null&&U!==N&&z>0){if(U instanceof a.BlockEmbed||N instanceof a.BlockEmbed){this.optimize();return}if(U instanceof g.default){var D=U.newlineIndex(U.length(),!0);if(D>-1&&(U=U.split(D+1),U===N)){this.optimize();return}}else if(N instanceof g.default){var C=N.newlineIndex(0);C>-1&&N.split(C+1)}var H=N.children.head instanceof v.default?null:N.children.head;U.moveChildren(N,H),U.remove()}this.optimize()}},{key:"enable",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",k)}},{key:"formatAt",value:function(k,T,I,R){this.whitelist!=null&&!this.whitelist[I]||(o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,k,T,I,R),this.optimize())}},{key:"insertAt",value:function(k,T,I){if(!(I!=null&&this.whitelist!=null&&!this.whitelist[T])){if(k>=this.length())if(I==null||f.default.query(T,f.default.Scope.BLOCK)==null){var R=f.default.create(this.statics.defaultChild);this.appendChild(R),I==null&&T.endsWith(`
`)&&(T=T.slice(0,-1)),R.insertAt(0,T,I)}else{var U=f.default.create(T,I);this.appendChild(U)}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,k,T,I);this.optimize()}}},{key:"insertBefore",value:function(k,T){if(k.statics.scope===f.default.Scope.INLINE_BLOT){var I=f.default.create(this.statics.defaultChild);I.appendChild(k),k=I}o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,k,T)}},{key:"leaf",value:function(k){return this.path(k).pop()||[null,-1]}},{key:"line",value:function(k){return k===this.length()?this.line(k-1):this.descendant(S,k)}},{key:"lines",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,I=function R(U,z,j){var P=[],N=j;return U.children.forEachAt(z,j,function(D,C,H){S(D)?P.push(D):D instanceof f.default.Container&&(P=P.concat(R(D,C,N))),N-=H}),P};return I(this,k,T)}},{key:"optimize",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,k,T),k.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,k,T))}},{key:"path",value:function(k){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,k).slice(1)}},{key:"update",value:function(k){if(this.batch!==!0){var T=u.default.sources.USER;typeof k=="string"&&(T=k),Array.isArray(k)||(k=this.observer.takeRecords()),k.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,T,k),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,k.concat([])),k.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,T,k)}}}]),E}(f.default.Scroll);x.blotName="scroll",x.className="ql-editor",x.tagName="DIV",x.defaultChild="block",x.allowedChildren=[d.default,a.BlockEmbed,h.default],t.default=x},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},i=function(){function L(M,V){var $=[],Z=!0,et=!1,ct=void 0;try{for(var ft=M[Symbol.iterator](),at;!(Z=(at=ft.next()).done)&&($.push(at.value),!(V&&$.length===V));Z=!0);}catch(bt){et=!0,ct=bt}finally{try{!Z&&ft.return&&ft.return()}finally{if(et)throw ct}}return $}return function(M,V){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return L(M,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function L(M,V){for(var $=0;$<V.length;$++){var Z=V[$];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(M,Z.key,Z)}}return function(M,V,$){return V&&L(M.prototype,V),$&&L(M,$),M}}(),s=e(21),f=O(s),l=e(11),u=O(l),a=e(3),d=O(a),m=e(2),v=O(m),y=e(20),g=O(y),p=e(0),h=O(p),c=e(5),b=O(c),_=e(10),w=O(_),S=e(9),x=O(S);function O(L){return L&&L.__esModule?L:{default:L}}function E(L,M,V){return M in L?Object.defineProperty(L,M,{value:V,enumerable:!0,configurable:!0,writable:!0}):L[M]=V,L}function A(L,M){if(!(L instanceof M))throw new TypeError("Cannot call a class as a function")}function k(L,M){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:L}function T(L,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);L.prototype=Object.create(M&&M.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(L,M):L.__proto__=M)}var I=(0,w.default)("quill:keyboard"),R=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",U=function(L){T(M,L),o(M,null,[{key:"match",value:function($,Z){return Z=q(Z),["altKey","ctrlKey","metaKey","shiftKey"].some(function(et){return!!Z[et]!==$[et]&&Z[et]!==null})?!1:Z.key===($.which||$.keyCode)}}]);function M(V,$){A(this,M);var Z=k(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,V,$));return Z.bindings={},Object.keys(Z.options.bindings).forEach(function(et){et==="list autofill"&&V.scroll.whitelist!=null&&!V.scroll.whitelist.list||Z.options.bindings[et]&&Z.addBinding(Z.options.bindings[et])}),Z.addBinding({key:M.keys.ENTER,shiftKey:null},D),Z.addBinding({key:M.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Z.addBinding({key:M.keys.BACKSPACE},{collapsed:!0},j),Z.addBinding({key:M.keys.DELETE},{collapsed:!0},P)):(Z.addBinding({key:M.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},j),Z.addBinding({key:M.keys.DELETE},{collapsed:!0,suffix:/^.?$/},P)),Z.addBinding({key:M.keys.BACKSPACE},{collapsed:!1},N),Z.addBinding({key:M.keys.DELETE},{collapsed:!1},N),Z.addBinding({key:M.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},j),Z.listen(),Z}return o(M,[{key:"addBinding",value:function($){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ct=q($);if(ct==null||ct.key==null)return I.warn("Attempted to add invalid keyboard binding",ct);typeof Z=="function"&&(Z={handler:Z}),typeof et=="function"&&(et={handler:et}),ct=(0,d.default)(ct,Z,et),this.bindings[ct.key]=this.bindings[ct.key]||[],this.bindings[ct.key].push(ct)}},{key:"listen",value:function(){var $=this;this.quill.root.addEventListener("keydown",function(Z){if(!Z.defaultPrevented){var et=Z.which||Z.keyCode,ct=($.bindings[et]||[]).filter(function(Et){return M.match(Z,Et)});if(ct.length!==0){var ft=$.quill.getSelection();if(!(ft==null||!$.quill.hasFocus())){var at=$.quill.getLine(ft.index),bt=i(at,2),Pt=bt[0],Ct=bt[1],G=$.quill.getLeaf(ft.index),W=i(G,2),nt=W[0],ot=W[1],X=ft.length===0?[nt,ot]:$.quill.getLeaf(ft.index+ft.length),dt=i(X,2),ut=dt[0],pt=dt[1],kt=nt instanceof h.default.Text?nt.value().slice(0,ot):"",Rt=ut instanceof h.default.Text?ut.value().slice(pt):"",mt={collapsed:ft.length===0,empty:ft.length===0&&Pt.length()<=1,format:$.quill.getFormat(ft),offset:Ct,prefix:kt,suffix:Rt},Wt=ct.some(function(Et){if(Et.collapsed!=null&&Et.collapsed!==mt.collapsed||Et.empty!=null&&Et.empty!==mt.empty||Et.offset!=null&&Et.offset!==mt.offset)return!1;if(Array.isArray(Et.format)){if(Et.format.every(function(re){return mt.format[re]==null}))return!1}else if(r(Et.format)==="object"&&!Object.keys(Et.format).every(function(re){return Et.format[re]===!0?mt.format[re]!=null:Et.format[re]===!1?mt.format[re]==null:(0,u.default)(Et.format[re],mt.format[re])}))return!1;return Et.prefix!=null&&!Et.prefix.test(mt.prefix)||Et.suffix!=null&&!Et.suffix.test(mt.suffix)?!1:Et.handler.call($,ft,mt)!==!0});Wt&&Z.preventDefault()}}}})}}]),M}(x.default);U.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},U.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:U.keys.TAB,format:["blockquote","indent","list"],handler:function(M,V){if(V.collapsed&&V.offset!==0)return!0;this.quill.format("indent","+1",b.default.sources.USER)}},outdent:{key:U.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(M,V){if(V.collapsed&&V.offset!==0)return!0;this.quill.format("indent","-1",b.default.sources.USER)}},"outdent backspace":{key:U.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(M,V){V.format.indent!=null?this.quill.format("indent","-1",b.default.sources.USER):V.format.list!=null&&this.quill.format("list",!1,b.default.sources.USER)}},"indent code-block":C(!0),"outdent code-block":C(!1),"remove tab":{key:U.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(M){this.quill.deleteText(M.index-1,1,b.default.sources.USER)}},tab:{key:U.keys.TAB,handler:function(M){this.quill.history.cutoff();var V=new v.default().retain(M.index).delete(M.length).insert("	");this.quill.updateContents(V,b.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(M.index+1,b.default.sources.SILENT)}},"list empty enter":{key:U.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(M,V){this.quill.format("list",!1,b.default.sources.USER),V.format.indent&&this.quill.format("indent",!1,b.default.sources.USER)}},"checklist enter":{key:U.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(M){var V=this.quill.getLine(M.index),$=i(V,2),Z=$[0],et=$[1],ct=(0,d.default)({},Z.formats(),{list:"checked"}),ft=new v.default().retain(M.index).insert(`
`,ct).retain(Z.length()-et-1).retain(1,{list:"unchecked"});this.quill.updateContents(ft,b.default.sources.USER),this.quill.setSelection(M.index+1,b.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:U.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(M,V){var $=this.quill.getLine(M.index),Z=i($,2),et=Z[0],ct=Z[1],ft=new v.default().retain(M.index).insert(`
`,V.format).retain(et.length()-ct-1).retain(1,{header:null});this.quill.updateContents(ft,b.default.sources.USER),this.quill.setSelection(M.index+1,b.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(M,V){var $=V.prefix.length,Z=this.quill.getLine(M.index),et=i(Z,2),ct=et[0],ft=et[1];if(ft>$)return!0;var at=void 0;switch(V.prefix.trim()){case"[]":case"[ ]":at="unchecked";break;case"[x]":at="checked";break;case"-":case"*":at="bullet";break;default:at="ordered"}this.quill.insertText(M.index," ",b.default.sources.USER),this.quill.history.cutoff();var bt=new v.default().retain(M.index-ft).delete($+1).retain(ct.length()-2-ft).retain(1,{list:at});this.quill.updateContents(bt,b.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(M.index-$,b.default.sources.SILENT)}},"code exit":{key:U.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(M){var V=this.quill.getLine(M.index),$=i(V,2),Z=$[0],et=$[1],ct=new v.default().retain(M.index+Z.length()-et-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ct,b.default.sources.USER)}},"embed left":z(U.keys.LEFT,!1),"embed left shift":z(U.keys.LEFT,!0),"embed right":z(U.keys.RIGHT,!1),"embed right shift":z(U.keys.RIGHT,!0)}};function z(L,M){var V,$=L===U.keys.LEFT?"prefix":"suffix";return V={key:L,shiftKey:M,altKey:null},E(V,$,/^$/),E(V,"handler",function(et){var ct=et.index;L===U.keys.RIGHT&&(ct+=et.length+1);var ft=this.quill.getLeaf(ct),at=i(ft,1),bt=at[0];return bt instanceof h.default.Embed?(L===U.keys.LEFT?M?this.quill.setSelection(et.index-1,et.length+1,b.default.sources.USER):this.quill.setSelection(et.index-1,b.default.sources.USER):M?this.quill.setSelection(et.index,et.length+1,b.default.sources.USER):this.quill.setSelection(et.index+et.length+1,b.default.sources.USER),!1):!0}),V}function j(L,M){if(!(L.index===0||this.quill.getLength()<=1)){var V=this.quill.getLine(L.index),$=i(V,1),Z=$[0],et={};if(M.offset===0){var ct=this.quill.getLine(L.index-1),ft=i(ct,1),at=ft[0];if(at!=null&&at.length()>1){var bt=Z.formats(),Pt=this.quill.getFormat(L.index-1,1);et=g.default.attributes.diff(bt,Pt)||{}}}var Ct=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(M.prefix)?2:1;this.quill.deleteText(L.index-Ct,Ct,b.default.sources.USER),Object.keys(et).length>0&&this.quill.formatLine(L.index-Ct,Ct,et,b.default.sources.USER),this.quill.focus()}}function P(L,M){var V=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(M.suffix)?2:1;if(!(L.index>=this.quill.getLength()-V)){var $={},Z=0,et=this.quill.getLine(L.index),ct=i(et,1),ft=ct[0];if(M.offset>=ft.length()-1){var at=this.quill.getLine(L.index+1),bt=i(at,1),Pt=bt[0];if(Pt){var Ct=ft.formats(),G=this.quill.getFormat(L.index,1);$=g.default.attributes.diff(Ct,G)||{},Z=Pt.length()}}this.quill.deleteText(L.index,V,b.default.sources.USER),Object.keys($).length>0&&this.quill.formatLine(L.index+Z-1,V,$,b.default.sources.USER)}}function N(L){var M=this.quill.getLines(L),V={};if(M.length>1){var $=M[0].formats(),Z=M[M.length-1].formats();V=g.default.attributes.diff(Z,$)||{}}this.quill.deleteText(L,b.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(L.index,1,V,b.default.sources.USER),this.quill.setSelection(L.index,b.default.sources.SILENT),this.quill.focus()}function D(L,M){var V=this;L.length>0&&this.quill.scroll.deleteAt(L.index,L.length);var $=Object.keys(M.format).reduce(function(Z,et){return h.default.query(et,h.default.Scope.BLOCK)&&!Array.isArray(M.format[et])&&(Z[et]=M.format[et]),Z},{});this.quill.insertText(L.index,`
`,$,b.default.sources.USER),this.quill.setSelection(L.index+1,b.default.sources.SILENT),this.quill.focus(),Object.keys(M.format).forEach(function(Z){$[Z]==null&&(Array.isArray(M.format[Z])||Z!=="link"&&V.quill.format(Z,M.format[Z],b.default.sources.USER))})}function C(L){return{key:U.keys.TAB,shiftKey:!L,format:{"code-block":!0},handler:function(V){var $=h.default.query("code-block"),Z=V.index,et=V.length,ct=this.quill.scroll.descendant($,Z),ft=i(ct,2),at=ft[0],bt=ft[1];if(at!=null){var Pt=this.quill.getIndex(at),Ct=at.newlineIndex(bt,!0)+1,G=at.newlineIndex(Pt+bt+et),W=at.domNode.textContent.slice(Ct,G).split(`
`);bt=0,W.forEach(function(nt,ot){L?(at.insertAt(Ct+bt,$.TAB),bt+=$.TAB.length,ot===0?Z+=$.TAB.length:et+=$.TAB.length):nt.startsWith($.TAB)&&(at.deleteAt(Ct+bt,$.TAB.length),bt-=$.TAB.length,ot===0?Z-=$.TAB.length:et-=$.TAB.length),bt+=nt.length+1}),this.quill.update(b.default.sources.USER),this.quill.setSelection(Z,et,b.default.sources.SILENT)}}}}function H(L){return{key:L[0].toUpperCase(),shortKey:!0,handler:function(V,$){this.quill.format(L,!$.format[L],b.default.sources.USER)}}}function q(L){if(typeof L=="string"||typeof L=="number")return q({key:L});if((typeof L>"u"?"undefined":r(L))==="object"&&(L=(0,f.default)(L,!1)),typeof L.key=="string")if(U.keys[L.key.toUpperCase()]!=null)L.key=U.keys[L.key.toUpperCase()];else if(L.key.length===1)L.key=L.key.toUpperCase().charCodeAt(0);else return null;return L.shortKey&&(L[R]=L.shortKey,delete L.shortKey),L}t.default=U,t.SHORTKEY=R},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function g(p,h){var c=[],b=!0,_=!1,w=void 0;try{for(var S=p[Symbol.iterator](),x;!(b=(x=S.next()).done)&&(c.push(x.value),!(h&&c.length===h));b=!0);}catch(O){_=!0,w=O}finally{try{!b&&S.return&&S.return()}finally{if(_)throw w}}return c}return function(p,h){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return g(p,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function g(p,h,c){p===null&&(p=Function.prototype);var b=Object.getOwnPropertyDescriptor(p,h);if(b===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,h,c)}else{if("value"in b)return b.value;var w=b.get;return w===void 0?void 0:w.call(c)}},o=function(){function g(p,h){for(var c=0;c<h.length;c++){var b=h[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,h,c){return h&&g(p.prototype,h),c&&g(p,c),p}}(),s=e(0),f=a(s),l=e(7),u=a(l);function a(g){return g&&g.__esModule?g:{default:g}}function d(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function m(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function v(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var y=function(g){v(p,g),o(p,null,[{key:"value",value:function(){}}]);function p(h,c){d(this,p);var b=m(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,h));return b.selection=c,b.textNode=document.createTextNode(p.CONTENTS),b.domNode.appendChild(b.textNode),b._length=0,b}return o(p,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(c,b){if(this._length!==0)return i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,c,b);for(var _=this,w=0;_!=null&&_.statics.scope!==f.default.Scope.BLOCK_BLOT;)w+=_.offset(_.parent),_=_.parent;_!=null&&(this._length=p.CONTENTS.length,_.optimize(),_.formatAt(w,p.CONTENTS.length,c,b),this._length=0)}},{key:"index",value:function(c,b){return c===this.textNode?0:i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,c,b)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var c=this.textNode,b=this.selection.getNativeRange(),_=void 0,w=void 0,S=void 0;if(b!=null&&b.start.node===c&&b.end.node===c){var x=[c,b.start.offset,b.end.offset];_=x[0],w=x[1],S=x[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==p.CONTENTS){var O=this.textNode.data.split(p.CONTENTS).join("");this.next instanceof u.default?(_=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=p.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(f.default.create(this.textNode),this),this.textNode=document.createTextNode(p.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),w!=null){var E=[w,S].map(function(k){return Math.max(0,Math.min(_.data.length,k-1))}),A=r(E,2);return w=A[0],S=A[1],{startNode:_,startOffset:w,endNode:_,endOffset:S}}}}},{key:"update",value:function(c,b){var _=this;if(c.some(function(S){return S.type==="characterData"&&S.target===_.textNode})){var w=this.restore();w&&(b.range=w)}}},{key:"value",value:function(){return""}}]),p}(f.default.Embed);y.blotName="cursor",y.className="ql-cursor",y.tagName="span",y.CONTENTS="\uFEFF",t.default=y},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),i=f(r),o=e(4),s=f(o);function f(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function u(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function a(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d=function(m){a(v,m);function v(){return l(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(i.default.Container);d.allowedChildren=[s.default,o.BlockEmbed,d],t.default=d},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var r=function(){function y(g,p){for(var h=0;h<p.length;h++){var c=p[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}return function(g,p,h){return p&&y(g.prototype,p),h&&y(g,h),g}}(),i=function y(g,p,h){g===null&&(g=Function.prototype);var c=Object.getOwnPropertyDescriptor(g,p);if(c===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,p,h)}else{if("value"in c)return c.value;var _=c.get;return _===void 0?void 0:_.call(h)}},o=e(0),s=f(o);function f(y){return y&&y.__esModule?y:{default:y}}function l(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function u(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function a(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var d=function(y){a(g,y);function g(){return l(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return r(g,[{key:"value",value:function(h){var c=i(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,h);return c.startsWith("rgb(")?(c=c.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+c.split(",").map(function(b){return("00"+parseInt(b).toString(16)).slice(-2)}).join("")):c}}]),g}(s.default.Attributor.Style),m=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),v=new d("color","color",{scope:s.default.Scope.INLINE});t.ColorAttributor=d,t.ColorClass=m,t.ColorStyle=v},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var r=function(){function v(y,g){for(var p=0;p<g.length;p++){var h=g[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,h.key,h)}}return function(y,g,p){return g&&v(y.prototype,g),p&&v(y,p),y}}(),i=function v(y,g,p){y===null&&(y=Function.prototype);var h=Object.getOwnPropertyDescriptor(y,g);if(h===void 0){var c=Object.getPrototypeOf(y);return c===null?void 0:v(c,g,p)}else{if("value"in h)return h.value;var b=h.get;return b===void 0?void 0:b.call(p)}},o=e(6),s=f(o);function f(v){return v&&v.__esModule?v:{default:v}}function l(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function a(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var d=function(v){a(y,v);function y(){return l(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return r(y,[{key:"format",value:function(p,h){if(p!==this.statics.blotName||!h)return i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,p,h);h=this.constructor.sanitize(h),this.domNode.setAttribute("href",h)}}],[{key:"create",value:function(p){var h=i(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,p);return p=this.sanitize(p),h.setAttribute("href",p),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}},{key:"formats",value:function(p){return p.getAttribute("href")}},{key:"sanitize",value:function(p){return m(p,this.PROTOCOL_WHITELIST)?p:this.SANITIZED_URL}}]),y}(s.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function m(v,y){var g=document.createElement("a");g.href=v;var p=g.href.slice(0,g.href.indexOf(":"));return y.indexOf(p)>-1}t.default=d,t.sanitize=m},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i=function(){function y(g,p){for(var h=0;h<p.length;h++){var c=p[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}return function(g,p,h){return p&&y(g.prototype,p),h&&y(g,h),g}}(),o=e(23),s=u(o),f=e(107),l=u(f);function u(y){return y&&y.__esModule?y:{default:y}}function a(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}var d=0;function m(y,g){y.setAttribute(g,y.getAttribute(g)!=="true")}var v=function(){function y(g){var p=this;a(this,y),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){p.togglePicker()}),this.label.addEventListener("keydown",function(h){switch(h.keyCode){case s.default.keys.ENTER:p.togglePicker();break;case s.default.keys.ESCAPE:p.escape(),h.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}return i(y,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),m(this.label,"aria-expanded"),m(this.options,"aria-hidden")}},{key:"buildItem",value:function(p){var h=this,c=document.createElement("span");return c.tabIndex="0",c.setAttribute("role","button"),c.classList.add("ql-picker-item"),p.hasAttribute("value")&&c.setAttribute("data-value",p.getAttribute("value")),p.textContent&&c.setAttribute("data-label",p.textContent),c.addEventListener("click",function(){h.selectItem(c,!0)}),c.addEventListener("keydown",function(b){switch(b.keyCode){case s.default.keys.ENTER:h.selectItem(c,!0),b.preventDefault();break;case s.default.keys.ESCAPE:h.escape(),b.preventDefault();break;default:}}),c}},{key:"buildLabel",value:function(){var p=document.createElement("span");return p.classList.add("ql-picker-label"),p.innerHTML=l.default,p.tabIndex="0",p.setAttribute("role","button"),p.setAttribute("aria-expanded","false"),this.container.appendChild(p),p}},{key:"buildOptions",value:function(){var p=this,h=document.createElement("span");h.classList.add("ql-picker-options"),h.setAttribute("aria-hidden","true"),h.tabIndex="-1",h.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",h.id),this.options=h,[].slice.call(this.select.options).forEach(function(c){var b=p.buildItem(c);h.appendChild(b),c.selected===!0&&p.selectItem(b)}),this.container.appendChild(h)}},{key:"buildPicker",value:function(){var p=this;[].slice.call(this.select.attributes).forEach(function(h){p.container.setAttribute(h.name,h.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var p=this;this.close(),setTimeout(function(){return p.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(p){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=this.container.querySelector(".ql-selected");if(p!==c&&(c?.classList.remove("ql-selected"),p!=null&&(p.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(p.parentNode.children,p),p.hasAttribute("data-value")?this.label.setAttribute("data-value",p.getAttribute("data-value")):this.label.removeAttribute("data-value"),p.hasAttribute("data-label")?this.label.setAttribute("data-label",p.getAttribute("data-label")):this.label.removeAttribute("data-label"),h))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":r(Event))==="object"){var b=document.createEvent("Event");b.initEvent("change",!0,!0),this.select.dispatchEvent(b)}this.close()}}},{key:"update",value:function(){var p=void 0;if(this.select.selectedIndex>-1){var h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];p=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);var c=p!=null&&p!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",c)}}]),y}();t.default=v},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),i=I(r),o=e(5),s=I(o),f=e(4),l=I(f),u=e(16),a=I(u),d=e(25),m=I(d),v=e(24),y=I(v),g=e(35),p=I(g),h=e(6),c=I(h),b=e(22),_=I(b),w=e(7),S=I(w),x=e(55),O=I(x),E=e(42),A=I(E),k=e(23),T=I(k);function I(R){return R&&R.__esModule?R:{default:R}}s.default.register({"blots/block":l.default,"blots/block/embed":f.BlockEmbed,"blots/break":a.default,"blots/container":m.default,"blots/cursor":y.default,"blots/embed":p.default,"blots/inline":c.default,"blots/scroll":_.default,"blots/text":S.default,"modules/clipboard":O.default,"modules/history":A.default,"modules/keyboard":T.default}),i.default.register(l.default,a.default,y.default,c.default,_.default,S.default),t.default=s.default},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(1),i=function(){function o(s){this.domNode=s,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(s){if(this.tagName==null)throw new r.ParchmentError("Blot definition missing tagName");var f;return Array.isArray(this.tagName)?(typeof s=="string"&&(s=s.toUpperCase(),parseInt(s).toString()===s&&(s=parseInt(s))),typeof s=="number"?f=document.createElement(this.tagName[s-1]):this.tagName.indexOf(s)>-1?f=document.createElement(s):f=document.createElement(this.tagName[0])):f=document.createElement(this.tagName),this.className&&f.classList.add(this.className),f},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var s=this.domNode.cloneNode(!1);return r.create(s)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},o.prototype.deleteAt=function(s,f){var l=this.isolate(s,f);l.remove()},o.prototype.formatAt=function(s,f,l,u){var a=this.isolate(s,f);if(r.query(l,r.Scope.BLOT)!=null&&u)a.wrap(l,u);else if(r.query(l,r.Scope.ATTRIBUTE)!=null){var d=r.create(this.statics.scope);a.wrap(d),d.format(l,u)}},o.prototype.insertAt=function(s,f,l){var u=l==null?r.create("text",f):r.create(f,l),a=this.split(s);this.parent.insertBefore(u,a)},o.prototype.insertInto=function(s,f){f===void 0&&(f=null),this.parent!=null&&this.parent.children.remove(this);var l=null;s.children.insertBefore(this,f),f!=null&&(l=f.domNode),(this.domNode.parentNode!=s.domNode||this.domNode.nextSibling!=l)&&s.domNode.insertBefore(this.domNode,l),this.parent=s,this.attach()},o.prototype.isolate=function(s,f){var l=this.split(s);return l.split(f),l},o.prototype.length=function(){return 1},o.prototype.offset=function(s){return s===void 0&&(s=this.parent),this.parent==null||this==s?0:this.parent.children.offset(this)+this.parent.offset(s)},o.prototype.optimize=function(s){this.domNode[r.DATA_KEY]!=null&&delete this.domNode[r.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(s){s.parent!=null&&(s.parent.insertBefore(this,s.next),s.remove())},o.prototype.replaceWith=function(s,f){var l=typeof s=="string"?r.create(s,f):s;return l.replace(this),l},o.prototype.split=function(s,f){return s===0?this:this.next},o.prototype.update=function(s,f){},o.prototype.wrap=function(s,f){var l=typeof s=="string"?r.create(s,f):s;return this.parent!=null&&this.parent.insertBefore(l,this.next),l.appendChild(this),l},o.blotName="abstract",o}();t.default=i},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(12),i=e(32),o=e(33),s=e(1),f=function(){function l(u){this.attributes={},this.domNode=u,this.build()}return l.prototype.attribute=function(u,a){a?u.add(this.domNode,a)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},l.prototype.build=function(){var u=this;this.attributes={};var a=r.default.keys(this.domNode),d=i.default.keys(this.domNode),m=o.default.keys(this.domNode);a.concat(d).concat(m).forEach(function(v){var y=s.query(v,s.Scope.ATTRIBUTE);y instanceof r.default&&(u.attributes[y.attrName]=y)})},l.prototype.copy=function(u){var a=this;Object.keys(this.attributes).forEach(function(d){var m=a.attributes[d].value(a.domNode);u.format(d,m)})},l.prototype.move=function(u){var a=this;this.copy(u),Object.keys(this.attributes).forEach(function(d){a.attributes[d].remove(a.domNode)}),this.attributes={}},l.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(a,d){return a[d]=u.attributes[d].value(u.domNode),a},{})},l}();t.default=f},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var a in u)u.hasOwnProperty(a)&&(l[a]=u[a])};return function(l,u){f(l,u);function a(){this.constructor=l}l.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(12);function o(f,l){var u=f.getAttribute("class")||"";return u.split(/\s+/).filter(function(a){return a.indexOf(l+"-")===0})}var s=function(f){r(l,f);function l(){return f!==null&&f.apply(this,arguments)||this}return l.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(a){return a.split("-").slice(0,-1).join("-")})},l.prototype.add=function(u,a){return this.canAdd(u,a)?(this.remove(u),u.classList.add(this.keyName+"-"+a),!0):!1},l.prototype.remove=function(u){var a=o(u,this.keyName);a.forEach(function(d){u.classList.remove(d)}),u.classList.length===0&&u.removeAttribute("class")},l.prototype.value=function(u){var a=o(u,this.keyName)[0]||"",d=a.slice(this.keyName.length+1);return this.canAdd(u,d)?d:""},l}(i.default);t.default=s},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var a in u)u.hasOwnProperty(a)&&(l[a]=u[a])};return function(l,u){f(l,u);function a(){this.constructor=l}l.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(12);function o(f){var l=f.split("-"),u=l.slice(1).map(function(a){return a[0].toUpperCase()+a.slice(1)}).join("");return l[0]+u}var s=function(f){r(l,f);function l(){return f!==null&&f.apply(this,arguments)||this}return l.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(a){var d=a.split(":");return d[0].trim()})},l.prototype.add=function(u,a){return this.canAdd(u,a)?(u.style[o(this.keyName)]=a,!0):!1},l.prototype.remove=function(u){u.style[o(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},l.prototype.value=function(u){var a=u.style[o(this.keyName)];return this.canAdd(u,a)?a:""},l}(i.default);t.default=s},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function s(f,l){for(var u=0;u<l.length;u++){var a=l[u];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(f,l,u){return l&&s(f.prototype,l),u&&s(f,u),f}}();function i(s,f){if(!(s instanceof f))throw new TypeError("Cannot call a class as a function")}var o=function(){function s(f,l){i(this,s),this.quill=f,this.options=l,this.modules={}}return r(s,[{key:"init",value:function(){var l=this;Object.keys(this.options.modules).forEach(function(u){l.modules[u]==null&&l.addModule(u)})}},{key:"addModule",value:function(l){var u=this.quill.constructor.import("modules/"+l);return this.modules[l]=new u(this.quill,this.options.modules[l]||{}),this.modules[l]}}]),s}();o.DEFAULTS={modules:{}},o.themes={default:o},t.default=o},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function g(p,h){for(var c=0;c<h.length;c++){var b=h[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,h,c){return h&&g(p.prototype,h),c&&g(p,c),p}}(),i=function g(p,h,c){p===null&&(p=Function.prototype);var b=Object.getOwnPropertyDescriptor(p,h);if(b===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,h,c)}else{if("value"in b)return b.value;var w=b.get;return w===void 0?void 0:w.call(c)}},o=e(0),s=u(o),f=e(7),l=u(f);function u(g){return g&&g.__esModule?g:{default:g}}function a(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function d(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function m(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var v="\uFEFF",y=function(g){m(p,g);function p(h){a(this,p);var c=d(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,h));return c.contentNode=document.createElement("span"),c.contentNode.setAttribute("contenteditable",!1),[].slice.call(c.domNode.childNodes).forEach(function(b){c.contentNode.appendChild(b)}),c.leftGuard=document.createTextNode(v),c.rightGuard=document.createTextNode(v),c.domNode.appendChild(c.leftGuard),c.domNode.appendChild(c.contentNode),c.domNode.appendChild(c.rightGuard),c}return r(p,[{key:"index",value:function(c,b){return c===this.leftGuard?0:c===this.rightGuard?1:i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,c,b)}},{key:"restore",value:function(c){var b=void 0,_=void 0,w=c.data.split(v).join("");if(c===this.leftGuard)if(this.prev instanceof l.default){var S=this.prev.length();this.prev.insertAt(S,w),b={startNode:this.prev.domNode,startOffset:S+w.length}}else _=document.createTextNode(w),this.parent.insertBefore(s.default.create(_),this),b={startNode:_,startOffset:w.length};else c===this.rightGuard&&(this.next instanceof l.default?(this.next.insertAt(0,w),b={startNode:this.next.domNode,startOffset:w.length}):(_=document.createTextNode(w),this.parent.insertBefore(s.default.create(_),this.next),b={startNode:_,startOffset:w.length}));return c.data=v,b}},{key:"update",value:function(c,b){var _=this;c.forEach(function(w){if(w.type==="characterData"&&(w.target===_.leftGuard||w.target===_.rightGuard)){var S=_.restore(w.target);S&&(b.range=S)}})}}]),p}(s.default.Embed);t.default=y},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var r=e(0),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}var s={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},f=new i.default.Attributor.Attribute("align","align",s),l=new i.default.Attributor.Class("align","ql-align",s),u=new i.default.Attributor.Style("align","text-align",s);t.AlignAttribute=f,t.AlignClass=l,t.AlignStyle=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var r=e(0),i=s(r),o=e(26);function s(u){return u&&u.__esModule?u:{default:u}}var f=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),l=new o.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});t.BackgroundClass=f,t.BackgroundStyle=l},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var r=e(0),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}var s={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},f=new i.default.Attributor.Attribute("direction","dir",s),l=new i.default.Attributor.Class("direction","ql-direction",s),u=new i.default.Attributor.Style("direction","direction",s);t.DirectionAttribute=f,t.DirectionClass=l,t.DirectionStyle=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var r=function(){function g(p,h){for(var c=0;c<h.length;c++){var b=h[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,h,c){return h&&g(p.prototype,h),c&&g(p,c),p}}(),i=function g(p,h,c){p===null&&(p=Function.prototype);var b=Object.getOwnPropertyDescriptor(p,h);if(b===void 0){var _=Object.getPrototypeOf(p);return _===null?void 0:g(_,h,c)}else{if("value"in b)return b.value;var w=b.get;return w===void 0?void 0:w.call(c)}},o=e(0),s=f(o);function f(g){return g&&g.__esModule?g:{default:g}}function l(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function u(g,p){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:g}function a(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);g.prototype=Object.create(p&&p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(g,p):g.__proto__=p)}var d={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},m=new s.default.Attributor.Class("font","ql-font",d),v=function(g){a(p,g);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return r(p,[{key:"value",value:function(c){return i(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,c).replace(/["']/g,"")}}]),p}(s.default.Attributor.Style),y=new v("font","font-family",d);t.FontStyle=y,t.FontClass=m},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var r=e(0),i=o(r);function o(l){return l&&l.__esModule?l:{default:l}}var s=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),f=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=s,t.SizeStyle=f},function(n,t,e){"use strict";n.exports={align:{"":e(76),center:e(77),right:e(78),justify:e(79)},background:e(80),blockquote:e(81),bold:e(82),clean:e(83),code:e(58),"code-block":e(58),color:e(84),direction:{"":e(85),rtl:e(86)},float:{center:e(87),full:e(88),left:e(89),right:e(90)},formula:e(91),header:{1:e(92),2:e(93)},italic:e(94),image:e(95),indent:{"+1":e(96),"-1":e(97)},link:e(98),list:{ordered:e(99),bullet:e(100),check:e(101)},script:{sub:e(102),super:e(103)},strike:e(104),underline:e(105),video:e(106)}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var r=function(){function h(c,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(c,w.key,w)}}return function(c,b,_){return b&&h(c.prototype,b),_&&h(c,_),c}}(),i=e(0),o=a(i),s=e(5),f=a(s),l=e(9),u=a(l);function a(h){return h&&h.__esModule?h:{default:h}}function d(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function m(h,c){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:h}function v(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(h,c):h.__proto__=c)}var y=function(h){v(c,h);function c(b,_){d(this,c);var w=m(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,b,_));return w.lastRecorded=0,w.ignoreChange=!1,w.clear(),w.quill.on(f.default.events.EDITOR_CHANGE,function(S,x,O,E){S!==f.default.events.TEXT_CHANGE||w.ignoreChange||(!w.options.userOnly||E===f.default.sources.USER?w.record(x,O):w.transform(x))}),w.quill.keyboard.addBinding({key:"Z",shortKey:!0},w.undo.bind(w)),w.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},w.redo.bind(w)),/Win/i.test(navigator.platform)&&w.quill.keyboard.addBinding({key:"Y",shortKey:!0},w.redo.bind(w)),w}return r(c,[{key:"change",value:function(_,w){if(this.stack[_].length!==0){var S=this.stack[_].pop();this.stack[w].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[_],f.default.sources.USER),this.ignoreChange=!1;var x=p(S[_]);this.quill.setSelection(x)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(_,w){if(_.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(w),x=Date.now();if(this.lastRecorded+this.options.delay>x&&this.stack.undo.length>0){var O=this.stack.undo.pop();S=S.compose(O.undo),_=O.redo.compose(_)}else this.lastRecorded=x;this.stack.undo.push({redo:_,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(_){this.stack.undo.forEach(function(w){w.undo=_.transform(w.undo,!0),w.redo=_.transform(w.redo,!0)}),this.stack.redo.forEach(function(w){w.undo=_.transform(w.undo,!0),w.redo=_.transform(w.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),c}(u.default);y.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(h){var c=h.ops[h.ops.length-1];return c==null?!1:c.insert!=null?typeof c.insert=="string"&&c.insert.endsWith(`
`):c.attributes!=null?Object.keys(c.attributes).some(function(b){return o.default.query(b,o.default.Scope.BLOCK)!=null}):!1}function p(h){var c=h.reduce(function(_,w){return _+=w.delete||0,_},0),b=h.length()-c;return g(h)&&(b-=1),b}t.default=y,t.getLastChangeIndex=p},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var r=function(){function D(C,H){for(var q=0;q<H.length;q++){var L=H[q];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(C,L.key,L)}}return function(C,H,q){return H&&D(C.prototype,H),q&&D(C,q),C}}(),i=function D(C,H,q){C===null&&(C=Function.prototype);var L=Object.getOwnPropertyDescriptor(C,H);if(L===void 0){var M=Object.getPrototypeOf(C);return M===null?void 0:D(M,H,q)}else{if("value"in L)return L.value;var V=L.get;return V===void 0?void 0:V.call(q)}},o=e(3),s=x(o),f=e(2),l=x(f),u=e(8),a=x(u),d=e(23),m=x(d),v=e(34),y=x(v),g=e(59),p=x(g),h=e(60),c=x(h),b=e(28),_=x(b),w=e(61),S=x(w);function x(D){return D&&D.__esModule?D:{default:D}}function O(D,C){if(!(D instanceof C))throw new TypeError("Cannot call a class as a function")}function E(D,C){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:D}function A(D,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);D.prototype=Object.create(C&&C.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(D,C):D.__proto__=C)}var k=[!1,"center","right","justify"],T=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],I=[!1,"serif","monospace"],R=["1","2","3",!1],U=["small",!1,"large","huge"],z=function(D){A(C,D);function C(H,q){O(this,C);var L=E(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,H,q)),M=function V($){if(!document.body.contains(H.root))return document.body.removeEventListener("click",V);L.tooltip!=null&&!L.tooltip.root.contains($.target)&&document.activeElement!==L.tooltip.textbox&&!L.quill.hasFocus()&&L.tooltip.hide(),L.pickers!=null&&L.pickers.forEach(function(Z){Z.container.contains($.target)||Z.close()})};return H.emitter.listenDOM("click",document.body,M),L}return r(C,[{key:"addModule",value:function(q){var L=i(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"addModule",this).call(this,q);return q==="toolbar"&&this.extendToolbar(L),L}},{key:"buildButtons",value:function(q,L){q.forEach(function(M){var V=M.getAttribute("class")||"";V.split(/\s+/).forEach(function($){if($.startsWith("ql-")&&($=$.slice(3),L[$]!=null))if($==="direction")M.innerHTML=L[$][""]+L[$].rtl;else if(typeof L[$]=="string")M.innerHTML=L[$];else{var Z=M.value||"";Z!=null&&L[$][Z]&&(M.innerHTML=L[$][Z])}})})}},{key:"buildPickers",value:function(q,L){var M=this;this.pickers=q.map(function($){if($.classList.contains("ql-align"))return $.querySelector("option")==null&&N($,k),new c.default($,L.align);if($.classList.contains("ql-background")||$.classList.contains("ql-color")){var Z=$.classList.contains("ql-background")?"background":"color";return $.querySelector("option")==null&&N($,T,Z==="background"?"#ffffff":"#000000"),new p.default($,L[Z])}else return $.querySelector("option")==null&&($.classList.contains("ql-font")?N($,I):$.classList.contains("ql-header")?N($,R):$.classList.contains("ql-size")&&N($,U)),new _.default($)});var V=function(){M.pickers.forEach(function(Z){Z.update()})};this.quill.on(a.default.events.EDITOR_CHANGE,V)}}]),C}(y.default);z.DEFAULTS=(0,s.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var C=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var q=new FileReader;q.onload=function(L){var M=C.quill.getSelection(!0);C.quill.updateContents(new l.default().retain(M.index).delete(M.length).insert({image:L.target.result}),a.default.sources.USER),C.quill.setSelection(M.index+1,a.default.sources.SILENT),H.value=""},q.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var j=function(D){A(C,D);function C(H,q){O(this,C);var L=E(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,H,q));return L.textbox=L.root.querySelector('input[type="text"]'),L.listen(),L}return r(C,[{key:"listen",value:function(){var q=this;this.textbox.addEventListener("keydown",function(L){m.default.match(L,"enter")?(q.save(),L.preventDefault()):m.default.match(L,"escape")&&(q.cancel(),L.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),L!=null?this.textbox.value=L:q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+q)||""),this.root.setAttribute("data-mode",q)}},{key:"restoreFocus",value:function(){var q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=q}},{key:"save",value:function(){var q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var L=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",q,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",q,a.default.sources.USER)),this.quill.root.scrollTop=L;break}case"video":q=P(q);case"formula":{if(!q)break;var M=this.quill.getSelection(!0);if(M!=null){var V=M.index+M.length;this.quill.insertEmbed(V,this.root.getAttribute("data-mode"),q,a.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(V+1," ",a.default.sources.USER),this.quill.setSelection(V+2,a.default.sources.USER)}break}default:}this.textbox.value="",this.hide()}}]),C}(S.default);function P(D){var C=D.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||D.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return C?(C[1]||"https")+"://www.youtube.com/embed/"+C[2]+"?showinfo=0":(C=D.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(C[1]||"https")+"://player.vimeo.com/video/"+C[2]+"/":D}function N(D,C){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;C.forEach(function(q){var L=document.createElement("option");q===H?L.setAttribute("selected","selected"):L.setAttribute("value",q),D.appendChild(L)})}t.BaseTooltip=j,t.default=z},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function i(){this.head=this.tail=null,this.length=0}return i.prototype.append=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},i.prototype.contains=function(o){for(var s,f=this.iterator();s=f();)if(s===o)return!0;return!1},i.prototype.insertBefore=function(o,s){o&&(o.next=s,s!=null?(o.prev=s.prev,s.prev!=null&&(s.prev.next=o),s.prev=o,s===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},i.prototype.offset=function(o){for(var s=0,f=this.head;f!=null;){if(f===o)return s;s+=f.length(),f=f.next}return-1},i.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},i.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var s=o;return o!=null&&(o=o.next),s}},i.prototype.find=function(o,s){s===void 0&&(s=!1);for(var f,l=this.iterator();f=l();){var u=f.length();if(o<u||s&&o===u&&(f.next==null||f.next.length()!==0))return[f,o];o-=u}return[null,0]},i.prototype.forEach=function(o){for(var s,f=this.iterator();s=f();)o(s)},i.prototype.forEachAt=function(o,s,f){if(!(s<=0))for(var l=this.find(o),u=l[0],a=l[1],d,m=o-a,v=this.iterator(u);(d=v())&&m<o+s;){var y=d.length();o>m?f(d,o-m,Math.min(s,m+y-o)):f(d,0,Math.min(y,o+s-m)),m+=y}},i.prototype.map=function(o){return this.reduce(function(s,f){return s.push(o(f)),s},[])},i.prototype.reduce=function(o,s){for(var f,l=this.iterator();f=l();)s=o(s,f);return s},i}();t.default=r},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var m in d)d.hasOwnProperty(m)&&(a[m]=d[m])};return function(a,d){u(a,d);function m(){this.constructor=a}a.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(17),o=e(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},f=100,l=function(u){r(a,u);function a(d){var m=u.call(this,d)||this;return m.scroll=m,m.observer=new MutationObserver(function(v){m.update(v)}),m.observer.observe(m.domNode,s),m.attach(),m}return a.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},a.prototype.deleteAt=function(d,m){this.update(),d===0&&m===this.length()?this.children.forEach(function(v){v.remove()}):u.prototype.deleteAt.call(this,d,m)},a.prototype.formatAt=function(d,m,v,y){this.update(),u.prototype.formatAt.call(this,d,m,v,y)},a.prototype.insertAt=function(d,m,v){this.update(),u.prototype.insertAt.call(this,d,m,v)},a.prototype.optimize=function(d,m){var v=this;d===void 0&&(d=[]),m===void 0&&(m={}),u.prototype.optimize.call(this,m);for(var y=[].slice.call(this.observer.takeRecords());y.length>0;)d.push(y.pop());for(var g=function(b,_){_===void 0&&(_=!0),!(b==null||b===v)&&b.domNode.parentNode!=null&&(b.domNode[o.DATA_KEY].mutations==null&&(b.domNode[o.DATA_KEY].mutations=[]),_&&g(b.parent))},p=function(b){b.domNode[o.DATA_KEY]==null||b.domNode[o.DATA_KEY].mutations==null||(b instanceof i.default&&b.children.forEach(p),b.optimize(m))},h=d,c=0;h.length>0;c+=1){if(c>=f)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(function(b){var _=o.find(b.target,!0);_!=null&&(_.domNode===b.target&&(b.type==="childList"?(g(o.find(b.previousSibling,!1)),[].forEach.call(b.addedNodes,function(w){var S=o.find(w,!1);g(S,!1),S instanceof i.default&&S.children.forEach(function(x){g(x,!1)})})):b.type==="attributes"&&g(_.prev)),g(_))}),this.children.forEach(p),h=[].slice.call(this.observer.takeRecords()),y=h.slice();y.length>0;)d.push(y.pop())}},a.prototype.update=function(d,m){var v=this;m===void 0&&(m={}),d=d||this.observer.takeRecords(),d.map(function(y){var g=o.find(y.target,!0);return g==null?null:g.domNode[o.DATA_KEY].mutations==null?(g.domNode[o.DATA_KEY].mutations=[y],g):(g.domNode[o.DATA_KEY].mutations.push(y),null)}).forEach(function(y){y==null||y===v||y.domNode[o.DATA_KEY]==null||y.update(y.domNode[o.DATA_KEY].mutations||[],m)}),this.domNode[o.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,m),this.optimize(d,m)},a.blotName="scroll",a.defaultChild="block",a.scope=o.Scope.BLOCK_BLOT,a.tagName="DIV",a}(i.default);t.default=l},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var d in a)a.hasOwnProperty(d)&&(u[d]=a[d])};return function(u,a){l(u,a);function d(){this.constructor=u}u.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(18),o=e(1);function s(l,u){if(Object.keys(l).length!==Object.keys(u).length)return!1;for(var a in l)if(l[a]!==u[a])return!1;return!0}var f=function(l){r(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(a){if(a.tagName!==u.tagName)return l.formats.call(this,a)},u.prototype.format=function(a,d){var m=this;a===this.statics.blotName&&!d?(this.children.forEach(function(v){v instanceof i.default||(v=v.wrap(u.blotName,!0)),m.attributes.copy(v)}),this.unwrap()):l.prototype.format.call(this,a,d)},u.prototype.formatAt=function(a,d,m,v){if(this.formats()[m]!=null||o.query(m,o.Scope.ATTRIBUTE)){var y=this.isolate(a,d);y.format(m,v)}else l.prototype.formatAt.call(this,a,d,m,v)},u.prototype.optimize=function(a){l.prototype.optimize.call(this,a);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var m=this.next;m instanceof u&&m.prev===this&&s(d,m.formats())&&(m.moveChildren(this),m.remove())},u.blotName="inline",u.scope=o.Scope.INLINE_BLOT,u.tagName="SPAN",u}(i.default);t.default=f},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var a in u)u.hasOwnProperty(a)&&(l[a]=u[a])};return function(l,u){f(l,u);function a(){this.constructor=l}l.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(18),o=e(1),s=function(f){r(l,f);function l(){return f!==null&&f.apply(this,arguments)||this}return l.formats=function(u){var a=o.query(l.blotName).tagName;if(u.tagName!==a)return f.formats.call(this,u)},l.prototype.format=function(u,a){o.query(u,o.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!a?this.replaceWith(l.blotName):f.prototype.format.call(this,u,a))},l.prototype.formatAt=function(u,a,d,m){o.query(d,o.Scope.BLOCK)!=null?this.format(d,m):f.prototype.formatAt.call(this,u,a,d,m)},l.prototype.insertAt=function(u,a,d){if(d==null||o.query(a,o.Scope.INLINE)!=null)f.prototype.insertAt.call(this,u,a,d);else{var m=this.split(u),v=o.create(a,d);m.parent.insertBefore(v,m)}},l.prototype.update=function(u,a){navigator.userAgent.match(/Trident/)?this.build():f.prototype.update.call(this,u,a)},l.blotName="block",l.scope=o.Scope.BLOCK_BLOT,l.tagName="P",l}(i.default);t.default=s},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var u in l)l.hasOwnProperty(u)&&(f[u]=l[u])};return function(f,l){s(f,l);function u(){this.constructor=f}f.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(19),o=function(s){r(f,s);function f(){return s!==null&&s.apply(this,arguments)||this}return f.formats=function(l){},f.prototype.format=function(l,u){s.prototype.formatAt.call(this,0,this.length(),l,u)},f.prototype.formatAt=function(l,u,a,d){l===0&&u===this.length()?this.format(a,d):s.prototype.formatAt.call(this,l,u,a,d)},f.prototype.formats=function(){return this.statics.formats(this.domNode)},f}(i.default);t.default=o},function(n,t,e){"use strict";var r=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var a in u)u.hasOwnProperty(a)&&(l[a]=u[a])};return function(l,u){f(l,u);function a(){this.constructor=l}l.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=e(19),o=e(1),s=function(f){r(l,f);function l(u){var a=f.call(this,u)||this;return a.text=a.statics.value(a.domNode),a}return l.create=function(u){return document.createTextNode(u)},l.value=function(u){var a=u.data;return a.normalize&&(a=a.normalize()),a},l.prototype.deleteAt=function(u,a){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+a)},l.prototype.index=function(u,a){return this.domNode===u?a:-1},l.prototype.insertAt=function(u,a,d){d==null?(this.text=this.text.slice(0,u)+a+this.text.slice(u),this.domNode.data=this.text):f.prototype.insertAt.call(this,u,a,d)},l.prototype.length=function(){return this.text.length},l.prototype.optimize=function(u){f.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof l&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},l.prototype.position=function(u,a){return a===void 0&&(a=!1),[this.domNode,u]},l.prototype.split=function(u,a){if(a===void 0&&(a=!1),!a){if(u===0)return this;if(u===this.length())return this.next}var d=o.create(this.domNode.splitText(u));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},l.prototype.update=function(u,a){var d=this;u.some(function(m){return m.type==="characterData"&&m.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},l.prototype.value=function(){return this.text},l.blotName="text",l.scope=o.Scope.INLINE_BLOT,l}(i.default);t.default=s},function(n,t,e){"use strict";var r=document.createElement("div");if(r.classList.toggle("test-class",!1),r.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,s){return arguments.length>1&&!this.contains(o)==!s?s:i.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,s){return s=s||0,this.substr(s,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,s){var f=this.toString();(typeof s!="number"||!isFinite(s)||Math.floor(s)!==s||s>f.length)&&(s=f.length),s-=o.length;var l=f.indexOf(o,s);return l!==-1&&l===s}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("predicate must be a function");for(var f=Object(this),l=f.length>>>0,u=arguments[1],a,d=0;d<l;d++)if(a=f[d],s.call(u,a,d,f))return a}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,t){var e=-1,r=1,i=0;function o(c,b,_){if(c==b)return c?[[i,c]]:[];(_<0||c.length<_)&&(_=null);var w=u(c,b),S=c.substring(0,w);c=c.substring(w),b=b.substring(w),w=a(c,b);var x=c.substring(c.length-w);c=c.substring(0,c.length-w),b=b.substring(0,b.length-w);var O=s(c,b);return S&&O.unshift([i,S]),x&&O.push([i,x]),m(O),_!=null&&(O=g(O,_)),O=p(O),O}function s(c,b){var _;if(!c)return[[r,b]];if(!b)return[[e,c]];var w=c.length>b.length?c:b,S=c.length>b.length?b:c,x=w.indexOf(S);if(x!=-1)return _=[[r,w.substring(0,x)],[i,S],[r,w.substring(x+S.length)]],c.length>b.length&&(_[0][0]=_[2][0]=e),_;if(S.length==1)return[[e,c],[r,b]];var O=d(c,b);if(O){var E=O[0],A=O[1],k=O[2],T=O[3],I=O[4],R=o(E,k),U=o(A,T);return R.concat([[i,I]],U)}return f(c,b)}function f(c,b){for(var _=c.length,w=b.length,S=Math.ceil((_+w)/2),x=S,O=2*S,E=new Array(O),A=new Array(O),k=0;k<O;k++)E[k]=-1,A[k]=-1;E[x+1]=0,A[x+1]=0;for(var T=_-w,I=T%2!=0,R=0,U=0,z=0,j=0,P=0;P<S;P++){for(var N=-P+R;N<=P-U;N+=2){var D=x+N,C;N==-P||N!=P&&E[D-1]<E[D+1]?C=E[D+1]:C=E[D-1]+1;for(var H=C-N;C<_&&H<w&&c.charAt(C)==b.charAt(H);)C++,H++;if(E[D]=C,C>_)U+=2;else if(H>w)R+=2;else if(I){var q=x+T-N;if(q>=0&&q<O&&A[q]!=-1){var L=_-A[q];if(C>=L)return l(c,b,C,H)}}}for(var M=-P+z;M<=P-j;M+=2){var q=x+M,L;M==-P||M!=P&&A[q-1]<A[q+1]?L=A[q+1]:L=A[q-1]+1;for(var V=L-M;L<_&&V<w&&c.charAt(_-L-1)==b.charAt(w-V-1);)L++,V++;if(A[q]=L,L>_)j+=2;else if(V>w)z+=2;else if(!I){var D=x+T-M;if(D>=0&&D<O&&E[D]!=-1){var C=E[D],H=x+C-D;if(L=_-L,C>=L)return l(c,b,C,H)}}}}return[[e,c],[r,b]]}function l(c,b,_,w){var S=c.substring(0,_),x=b.substring(0,w),O=c.substring(_),E=b.substring(w),A=o(S,x),k=o(O,E);return A.concat(k)}function u(c,b){if(!c||!b||c.charAt(0)!=b.charAt(0))return 0;for(var _=0,w=Math.min(c.length,b.length),S=w,x=0;_<S;)c.substring(x,S)==b.substring(x,S)?(_=S,x=_):w=S,S=Math.floor((w-_)/2+_);return S}function a(c,b){if(!c||!b||c.charAt(c.length-1)!=b.charAt(b.length-1))return 0;for(var _=0,w=Math.min(c.length,b.length),S=w,x=0;_<S;)c.substring(c.length-S,c.length-x)==b.substring(b.length-S,b.length-x)?(_=S,x=_):w=S,S=Math.floor((w-_)/2+_);return S}function d(c,b){var _=c.length>b.length?c:b,w=c.length>b.length?b:c;if(_.length<4||w.length*2<_.length)return null;function S(U,z,j){for(var P=U.substring(j,j+Math.floor(U.length/4)),N=-1,D="",C,H,q,L;(N=z.indexOf(P,N+1))!=-1;){var M=u(U.substring(j),z.substring(N)),V=a(U.substring(0,j),z.substring(0,N));D.length<V+M&&(D=z.substring(N-V,N)+z.substring(N,N+M),C=U.substring(0,j-V),H=U.substring(j+M),q=z.substring(0,N-V),L=z.substring(N+M))}return D.length*2>=U.length?[C,H,q,L,D]:null}var x=S(_,w,Math.ceil(_.length/4)),O=S(_,w,Math.ceil(_.length/2)),E;if(!x&&!O)return null;O?x?E=x[4].length>O[4].length?x:O:E=O:E=x;var A,k,T,I;c.length>b.length?(A=E[0],k=E[1],T=E[2],I=E[3]):(T=E[0],I=E[1],A=E[2],k=E[3]);var R=E[4];return[A,k,T,I,R]}function m(c){c.push([i,""]);for(var b=0,_=0,w=0,S="",x="",O;b<c.length;)switch(c[b][0]){case r:w++,x+=c[b][1],b++;break;case e:_++,S+=c[b][1],b++;break;case i:_+w>1?(_!==0&&w!==0&&(O=u(x,S),O!==0&&(b-_-w>0&&c[b-_-w-1][0]==i?c[b-_-w-1][1]+=x.substring(0,O):(c.splice(0,0,[i,x.substring(0,O)]),b++),x=x.substring(O),S=S.substring(O)),O=a(x,S),O!==0&&(c[b][1]=x.substring(x.length-O)+c[b][1],x=x.substring(0,x.length-O),S=S.substring(0,S.length-O))),_===0?c.splice(b-w,_+w,[r,x]):w===0?c.splice(b-_,_+w,[e,S]):c.splice(b-_-w,_+w,[e,S],[r,x]),b=b-_-w+(_?1:0)+(w?1:0)+1):b!==0&&c[b-1][0]==i?(c[b-1][1]+=c[b][1],c.splice(b,1)):b++,w=0,_=0,S="",x="";break}c[c.length-1][1]===""&&c.pop();var E=!1;for(b=1;b<c.length-1;)c[b-1][0]==i&&c[b+1][0]==i&&(c[b][1].substring(c[b][1].length-c[b-1][1].length)==c[b-1][1]?(c[b][1]=c[b-1][1]+c[b][1].substring(0,c[b][1].length-c[b-1][1].length),c[b+1][1]=c[b-1][1]+c[b+1][1],c.splice(b-1,1),E=!0):c[b][1].substring(0,c[b+1][1].length)==c[b+1][1]&&(c[b-1][1]+=c[b+1][1],c[b][1]=c[b][1].substring(c[b+1][1].length)+c[b+1][1],c.splice(b+1,1),E=!0)),b++;E&&m(c)}var v=o;v.INSERT=r,v.DELETE=e,v.EQUAL=i,n.exports=v;function y(c,b){if(b===0)return[i,c];for(var _=0,w=0;w<c.length;w++){var S=c[w];if(S[0]===e||S[0]===i){var x=_+S[1].length;if(b===x)return[w+1,c];if(b<x){c=c.slice();var O=b-_,E=[S[0],S[1].slice(0,O)],A=[S[0],S[1].slice(O)];return c.splice(w,1,E,A),[w+1,c]}else _=x}}throw new Error("cursor_pos is out of bounds!")}function g(c,b){var _=y(c,b),w=_[1],S=_[0],x=w[S],O=w[S+1];if(x==null)return c;if(x[0]!==i)return c;if(O!=null&&x[1]+O[1]===O[1]+x[1])return w.splice(S,2,O,x),h(w,S,2);if(O!=null&&O[1].indexOf(x[1])===0){w.splice(S,2,[O[0],x[1]],[0,x[1]]);var E=O[1].slice(x[1].length);return E.length>0&&w.splice(S+2,0,[O[0],E]),h(w,S,3)}else return c}function p(c){for(var b=!1,_=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},w=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},S=2;S<c.length;S+=1)c[S-2][0]===i&&w(c[S-2][1])&&c[S-1][0]===e&&_(c[S-1][1])&&c[S][0]===r&&_(c[S][1])&&(b=!0,c[S-1][1]=c[S-2][1].slice(-1)+c[S-1][1],c[S][1]=c[S-2][1].slice(-1)+c[S][1],c[S-2][1]=c[S-2][1].slice(0,-1));if(!b)return c;for(var x=[],S=0;S<c.length;S+=1)c[S][1].length>0&&x.push(c[S]);return x}function h(c,b,_){for(var w=b+_-1;w>=0&&w>=b-1;w--)if(w+1<c.length){var S=c[w],x=c[w+1];S[0]===x[1]&&c.splice(w,2,[S[0],S[1]+x[1]])}return c}},function(n,t){t=n.exports=typeof Object.keys=="function"?Object.keys:e,t.shim=e;function e(r){var i=[];for(var o in r)i.push(o);return i}},function(n,t){var e=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";t=n.exports=e?r:i,t.supported=r;function r(o){return Object.prototype.toString.call(o)=="[object Arguments]"}t.unsupported=i;function i(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(n,t){"use strict";var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function o(f,l,u){this.fn=f,this.context=l,this.once=u||!1}function s(){this._events=new i,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],u,a;if(this._eventsCount===0)return l;for(a in u=this._events)e.call(u,a)&&l.push(r?a.slice(1):a);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},s.prototype.listeners=function(l,u){var a=r?r+l:l,d=this._events[a];if(u)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var m=0,v=d.length,y=new Array(v);m<v;m++)y[m]=d[m].fn;return y},s.prototype.emit=function(l,u,a,d,m,v){var y=r?r+l:l;if(!this._events[y])return!1;var g=this._events[y],p=arguments.length,h,c;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),p){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,a),!0;case 4:return g.fn.call(g.context,u,a,d),!0;case 5:return g.fn.call(g.context,u,a,d,m),!0;case 6:return g.fn.call(g.context,u,a,d,m,v),!0}for(c=1,h=new Array(p-1);c<p;c++)h[c-1]=arguments[c];g.fn.apply(g.context,h)}else{var b=g.length,_;for(c=0;c<b;c++)switch(g[c].once&&this.removeListener(l,g[c].fn,void 0,!0),p){case 1:g[c].fn.call(g[c].context);break;case 2:g[c].fn.call(g[c].context,u);break;case 3:g[c].fn.call(g[c].context,u,a);break;case 4:g[c].fn.call(g[c].context,u,a,d);break;default:if(!h)for(_=1,h=new Array(p-1);_<p;_++)h[_-1]=arguments[_];g[c].fn.apply(g[c].context,h)}}return!0},s.prototype.on=function(l,u,a){var d=new o(u,a||this),m=r?r+l:l;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],d]:this._events[m].push(d):(this._events[m]=d,this._eventsCount++),this},s.prototype.once=function(l,u,a){var d=new o(u,a||this,!0),m=r?r+l:l;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],d]:this._events[m].push(d):(this._events[m]=d,this._eventsCount++),this},s.prototype.removeListener=function(l,u,a,d){var m=r?r+l:l;if(!this._events[m])return this;if(!u)return--this._eventsCount===0?this._events=new i:delete this._events[m],this;var v=this._events[m];if(v.fn)v.fn===u&&(!d||v.once)&&(!a||v.context===a)&&(--this._eventsCount===0?this._events=new i:delete this._events[m]);else{for(var y=0,g=[],p=v.length;y<p;y++)(v[y].fn!==u||d&&!v[y].once||a&&v[y].context!==a)&&g.push(v[y]);g.length?this._events[m]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new i:delete this._events[m]}return this},s.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&(--this._eventsCount===0?this._events=new i:delete this._events[u])):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=r,s.EventEmitter=s,typeof n<"u"&&(n.exports=s)},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},i=function(){function G(W,nt){var ot=[],X=!0,dt=!1,ut=void 0;try{for(var pt=W[Symbol.iterator](),kt;!(X=(kt=pt.next()).done)&&(ot.push(kt.value),!(nt&&ot.length===nt));X=!0);}catch(Rt){dt=!0,ut=Rt}finally{try{!X&&pt.return&&pt.return()}finally{if(dt)throw ut}}return ot}return function(W,nt){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,nt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function G(W,nt){for(var ot=0;ot<nt.length;ot++){var X=nt[ot];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(W,X.key,X)}}return function(W,nt,ot){return nt&&G(W.prototype,nt),ot&&G(W,ot),W}}(),s=e(3),f=A(s),l=e(2),u=A(l),a=e(0),d=A(a),m=e(5),v=A(m),y=e(10),g=A(y),p=e(9),h=A(p),c=e(36),b=e(37),_=e(13),w=A(_),S=e(26),x=e(38),O=e(39),E=e(40);function A(G){return G&&G.__esModule?G:{default:G}}function k(G,W,nt){return W in G?Object.defineProperty(G,W,{value:nt,enumerable:!0,configurable:!0,writable:!0}):G[W]=nt,G}function T(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}function I(G,W){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:G}function R(G,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);G.prototype=Object.create(W&&W.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(G,W):G.__proto__=W)}var U=(0,g.default)("quill:clipboard"),z="__ql-matcher",j=[[Node.TEXT_NODE,Ct],[Node.TEXT_NODE,at],["br",et],[Node.ELEMENT_NODE,at],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,bt],[Node.ELEMENT_NODE,$],[Node.ELEMENT_NODE,Pt],["li",ft],["b",V.bind(V,"bold")],["i",V.bind(V,"italic")],["style",ct]],P=[c.AlignAttribute,x.DirectionAttribute].reduce(function(G,W){return G[W.keyName]=W,G},{}),N=[c.AlignStyle,b.BackgroundStyle,S.ColorStyle,x.DirectionStyle,O.FontStyle,E.SizeStyle].reduce(function(G,W){return G[W.keyName]=W,G},{}),D=function(G){R(W,G);function W(nt,ot){T(this,W);var X=I(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,nt,ot));return X.quill.root.addEventListener("paste",X.onPaste.bind(X)),X.container=X.quill.addContainer("ql-clipboard"),X.container.setAttribute("contenteditable",!0),X.container.setAttribute("tabindex",-1),X.matchers=[],j.concat(X.options.matchers).forEach(function(dt){var ut=i(dt,2),pt=ut[0],kt=ut[1];!ot.matchVisual&&kt===bt||X.addMatcher(pt,kt)}),X}return o(W,[{key:"addMatcher",value:function(ot,X){this.matchers.push([ot,X])}},{key:"convert",value:function(ot){if(typeof ot=="string")return this.container.innerHTML=ot.replace(/\>\r?\n +\</g,"><"),this.convert();var X=this.quill.getFormat(this.quill.selection.savedRange.index);if(X[w.default.blotName]){var dt=this.container.innerText;return this.container.innerHTML="",new u.default().insert(dt,k({},w.default.blotName,X[w.default.blotName]))}var ut=this.prepareMatching(),pt=i(ut,2),kt=pt[0],Rt=pt[1],mt=M(this.container,kt,Rt);return q(mt,`
`)&&mt.ops[mt.ops.length-1].attributes==null&&(mt=mt.compose(new u.default().retain(mt.length()-1).delete(1))),U.log("convert",this.container.innerHTML,mt),this.container.innerHTML="",mt}},{key:"dangerouslyPasteHTML",value:function(ot,X){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ot=="string")this.quill.setContents(this.convert(ot),X),this.quill.setSelection(0,v.default.sources.SILENT);else{var ut=this.convert(X);this.quill.updateContents(new u.default().retain(ot).concat(ut),dt),this.quill.setSelection(ot+ut.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ot){var X=this;if(!(ot.defaultPrevented||!this.quill.isEnabled())){var dt=this.quill.getSelection(),ut=new u.default().retain(dt.index),pt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ut=ut.concat(X.convert()).delete(dt.length),X.quill.updateContents(ut,v.default.sources.USER),X.quill.setSelection(ut.length()-dt.length,v.default.sources.SILENT),X.quill.scrollingContainer.scrollTop=pt,X.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ot=this,X=[],dt=[];return this.matchers.forEach(function(ut){var pt=i(ut,2),kt=pt[0],Rt=pt[1];switch(kt){case Node.TEXT_NODE:dt.push(Rt);break;case Node.ELEMENT_NODE:X.push(Rt);break;default:[].forEach.call(ot.container.querySelectorAll(kt),function(mt){mt[z]=mt[z]||[],mt[z].push(Rt)});break}}),[X,dt]}}]),W}(h.default);D.DEFAULTS={matchers:[],matchVisual:!0};function C(G,W,nt){return(typeof W>"u"?"undefined":r(W))==="object"?Object.keys(W).reduce(function(ot,X){return C(ot,X,W[X])},G):G.reduce(function(ot,X){return X.attributes&&X.attributes[W]?ot.push(X):ot.insert(X.insert,(0,f.default)({},k({},W,nt),X.attributes))},new u.default)}function H(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var W="__ql-computed-style";return G[W]||(G[W]=window.getComputedStyle(G))}function q(G,W){for(var nt="",ot=G.ops.length-1;ot>=0&&nt.length<W.length;--ot){var X=G.ops[ot];if(typeof X.insert!="string")break;nt=X.insert+nt}return nt.slice(-1*W.length)===W}function L(G){if(G.childNodes.length===0)return!1;var W=H(G);return["block","list-item"].indexOf(W.display)>-1}function M(G,W,nt){return G.nodeType===G.TEXT_NODE?nt.reduce(function(ot,X){return X(G,ot)},new u.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(ot,X){var dt=M(X,W,nt);return X.nodeType===G.ELEMENT_NODE&&(dt=W.reduce(function(ut,pt){return pt(X,ut)},dt),dt=(X[z]||[]).reduce(function(ut,pt){return pt(X,ut)},dt)),ot.concat(dt)},new u.default):new u.default}function V(G,W,nt){return C(nt,G,!0)}function $(G,W){var nt=d.default.Attributor.Attribute.keys(G),ot=d.default.Attributor.Class.keys(G),X=d.default.Attributor.Style.keys(G),dt={};return nt.concat(ot).concat(X).forEach(function(ut){var pt=d.default.query(ut,d.default.Scope.ATTRIBUTE);pt!=null&&(dt[pt.attrName]=pt.value(G),dt[pt.attrName])||(pt=P[ut],pt!=null&&(pt.attrName===ut||pt.keyName===ut)&&(dt[pt.attrName]=pt.value(G)||void 0),pt=N[ut],pt!=null&&(pt.attrName===ut||pt.keyName===ut)&&(pt=N[ut],dt[pt.attrName]=pt.value(G)||void 0))}),Object.keys(dt).length>0&&(W=C(W,dt)),W}function Z(G,W){var nt=d.default.query(G);if(nt==null)return W;if(nt.prototype instanceof d.default.Embed){var ot={},X=nt.value(G);X!=null&&(ot[nt.blotName]=X,W=new u.default().insert(ot,nt.formats(G)))}else typeof nt.formats=="function"&&(W=C(W,nt.blotName,nt.formats(G)));return W}function et(G,W){return q(W,`
`)||W.insert(`
`),W}function ct(){return new u.default}function ft(G,W){var nt=d.default.query(G);if(nt==null||nt.blotName!=="list-item"||!q(W,`
`))return W;for(var ot=-1,X=G.parentNode;!X.classList.contains("ql-clipboard");)(d.default.query(X)||{}).blotName==="list"&&(ot+=1),X=X.parentNode;return ot<=0?W:W.compose(new u.default().retain(W.length()-1).retain(1,{indent:ot}))}function at(G,W){return q(W,`
`)||(L(G)||W.length()>0&&G.nextSibling&&L(G.nextSibling))&&W.insert(`
`),W}function bt(G,W){if(L(G)&&G.nextElementSibling!=null&&!q(W,`

`)){var nt=G.offsetHeight+parseFloat(H(G).marginTop)+parseFloat(H(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+nt*1.5&&W.insert(`
`)}return W}function Pt(G,W){var nt={},ot=G.style||{};return ot.fontStyle&&H(G).fontStyle==="italic"&&(nt.italic=!0),ot.fontWeight&&(H(G).fontWeight.startsWith("bold")||parseInt(H(G).fontWeight)>=700)&&(nt.bold=!0),Object.keys(nt).length>0&&(W=C(W,nt)),parseFloat(ot.textIndent||0)>0&&(W=new u.default().insert("	").concat(W)),W}function Ct(G,W){var nt=G.data;if(G.parentNode.tagName==="O:P")return W.insert(nt.trim());if(nt.trim().length===0&&G.parentNode.classList.contains("ql-clipboard"))return W;if(!H(G.parentNode).whiteSpace.startsWith("pre")){var ot=function(dt,ut){return ut=ut.replace(/[^\u00a0]/g,""),ut.length<1&&dt?" ":ut};nt=nt.replace(/\r\n/g," ").replace(/\n/g," "),nt=nt.replace(/\s\s+/g,ot.bind(ot,!0)),(G.previousSibling==null&&L(G.parentNode)||G.previousSibling!=null&&L(G.previousSibling))&&(nt=nt.replace(/^\s+/,ot.bind(ot,!1))),(G.nextSibling==null&&L(G.parentNode)||G.nextSibling!=null&&L(G.nextSibling))&&(nt=nt.replace(/\s+$/,ot.bind(ot,!1)))}return W.insert(nt)}t.default=D,t.matchAttributor=$,t.matchBlot=Z,t.matchNewline=at,t.matchSpacing=bt,t.matchText=Ct},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function m(v,y){for(var g=0;g<y.length;g++){var p=y[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}return function(v,y,g){return y&&m(v.prototype,y),g&&m(v,g),v}}(),i=function m(v,y,g){v===null&&(v=Function.prototype);var p=Object.getOwnPropertyDescriptor(v,y);if(p===void 0){var h=Object.getPrototypeOf(v);return h===null?void 0:m(h,y,g)}else{if("value"in p)return p.value;var c=p.get;return c===void 0?void 0:c.call(g)}},o=e(6),s=f(o);function f(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function u(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function a(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d=function(m){a(v,m);function v(){return l(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return r(v,[{key:"optimize",value:function(g){i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(s.default);d.blotName="bold",d.tagName=["STRONG","B"],t.default=d},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var r=function(){function E(A,k){var T=[],I=!0,R=!1,U=void 0;try{for(var z=A[Symbol.iterator](),j;!(I=(j=z.next()).done)&&(T.push(j.value),!(k&&T.length===k));I=!0);}catch(P){R=!0,U=P}finally{try{!I&&z.return&&z.return()}finally{if(R)throw U}}return T}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function E(A,k){for(var T=0;T<k.length;T++){var I=k[T];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,k,T){return k&&E(A.prototype,k),T&&E(A,T),A}}(),o=e(2),s=g(o),f=e(0),l=g(f),u=e(5),a=g(u),d=e(10),m=g(d),v=e(9),y=g(v);function g(E){return E&&E.__esModule?E:{default:E}}function p(E,A,k){return A in E?Object.defineProperty(E,A,{value:k,enumerable:!0,configurable:!0,writable:!0}):E[A]=k,E}function h(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function c(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function b(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var _=(0,m.default)("quill:toolbar"),w=function(E){b(A,E);function A(k,T){h(this,A);var I=c(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k,T));if(Array.isArray(I.options.container)){var R=document.createElement("div");x(R,I.options.container),k.container.parentNode.insertBefore(R,k.container),I.container=R}else typeof I.options.container=="string"?I.container=document.querySelector(I.options.container):I.container=I.options.container;if(!(I.container instanceof HTMLElement)){var U;return U=_.error("Container required for toolbar",I.options),c(I,U)}return I.container.classList.add("ql-toolbar"),I.controls=[],I.handlers={},Object.keys(I.options.handlers).forEach(function(z){I.addHandler(z,I.options.handlers[z])}),[].forEach.call(I.container.querySelectorAll("button, select"),function(z){I.attach(z)}),I.quill.on(a.default.events.EDITOR_CHANGE,function(z,j){z===a.default.events.SELECTION_CHANGE&&I.update(j)}),I.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){var z=I.quill.selection.getRange(),j=r(z,1),P=j[0];I.update(P)}),I}return i(A,[{key:"addHandler",value:function(T,I){this.handlers[T]=I}},{key:"attach",value:function(T){var I=this,R=[].find.call(T.classList,function(z){return z.indexOf("ql-")===0});if(R){if(R=R.slice(3),T.tagName==="BUTTON"&&T.setAttribute("type","button"),this.handlers[R]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[R]==null){_.warn("ignoring attaching to disabled format",R,T);return}if(l.default.query(R)==null){_.warn("ignoring attaching to nonexistent format",R,T);return}}var U=T.tagName==="SELECT"?"change":"click";T.addEventListener(U,function(z){var j=void 0;if(T.tagName==="SELECT"){if(T.selectedIndex<0)return;var P=T.options[T.selectedIndex];P.hasAttribute("selected")?j=!1:j=P.value||!1}else T.classList.contains("ql-active")?j=!1:j=T.value||!T.hasAttribute("value"),z.preventDefault();I.quill.focus();var N=I.quill.selection.getRange(),D=r(N,1),C=D[0];if(I.handlers[R]!=null)I.handlers[R].call(I,j);else if(l.default.query(R).prototype instanceof l.default.Embed){if(j=prompt("Enter "+R),!j)return;I.quill.updateContents(new s.default().retain(C.index).delete(C.length).insert(p({},R,j)),a.default.sources.USER)}else I.quill.format(R,j,a.default.sources.USER);I.update(C)}),this.controls.push([R,T])}}},{key:"update",value:function(T){var I=T==null?{}:this.quill.getFormat(T);this.controls.forEach(function(R){var U=r(R,2),z=U[0],j=U[1];if(j.tagName==="SELECT"){var P=void 0;if(T==null)P=null;else if(I[z]==null)P=j.querySelector("option[selected]");else if(!Array.isArray(I[z])){var N=I[z];typeof N=="string"&&(N=N.replace(/\"/g,'\\"')),P=j.querySelector('option[value="'+N+'"]')}P==null?(j.value="",j.selectedIndex=-1):P.selected=!0}else if(T==null)j.classList.remove("ql-active");else if(j.hasAttribute("value")){var D=I[z]===j.getAttribute("value")||I[z]!=null&&I[z].toString()===j.getAttribute("value")||I[z]==null&&!j.getAttribute("value");j.classList.toggle("ql-active",D)}else j.classList.toggle("ql-active",I[z]!=null)})}}]),A}(y.default);w.DEFAULTS={};function S(E,A,k){var T=document.createElement("button");T.setAttribute("type","button"),T.classList.add("ql-"+A),k!=null&&(T.value=k),E.appendChild(T)}function x(E,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(k){var T=document.createElement("span");T.classList.add("ql-formats"),k.forEach(function(I){if(typeof I=="string")S(T,I);else{var R=Object.keys(I)[0],U=I[R];Array.isArray(U)?O(T,R,U):S(T,R,U)}}),E.appendChild(T)})}function O(E,A,k){var T=document.createElement("select");T.classList.add("ql-"+A),k.forEach(function(I){var R=document.createElement("option");I!==!1?R.setAttribute("value",I):R.setAttribute("selected","selected"),T.appendChild(R)}),E.appendChild(T)}w.DEFAULTS={container:null,handlers:{clean:function(){var A=this,k=this.quill.getSelection();if(k!=null)if(k.length==0){var T=this.quill.getFormat();Object.keys(T).forEach(function(I){l.default.query(I,l.default.Scope.INLINE)!=null&&A.quill.format(I,!1)})}else this.quill.removeFormat(k,a.default.sources.USER)},direction:function(A){var k=this.quill.getFormat().align;A==="rtl"&&k==null?this.quill.format("align","right",a.default.sources.USER):!A&&k==="right"&&this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",A,a.default.sources.USER)},indent:function(A){var k=this.quill.getSelection(),T=this.quill.getFormat(k),I=parseInt(T.indent||0);if(A==="+1"||A==="-1"){var R=A==="+1"?1:-1;T.direction==="rtl"&&(R*=-1),this.quill.format("indent",I+R,a.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,a.default.sources.USER)},list:function(A){var k=this.quill.getSelection(),T=this.quill.getFormat(k);A==="check"?T.list==="checked"||T.list==="unchecked"?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",A,a.default.sources.USER)}}},t.default=w,t.addControls=x},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function m(v,y){for(var g=0;g<y.length;g++){var p=y[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}return function(v,y,g){return y&&m(v.prototype,y),g&&m(v,g),v}}(),i=function m(v,y,g){v===null&&(v=Function.prototype);var p=Object.getOwnPropertyDescriptor(v,y);if(p===void 0){var h=Object.getPrototypeOf(v);return h===null?void 0:m(h,y,g)}else{if("value"in p)return p.value;var c=p.get;return c===void 0?void 0:c.call(g)}},o=e(28),s=f(o);function f(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function u(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function a(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d=function(m){a(v,m);function v(y,g){l(this,v);var p=u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return p.label.innerHTML=g,p.container.classList.add("ql-color-picker"),[].slice.call(p.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(h){h.classList.add("ql-primary")}),p}return r(v,[{key:"buildItem",value:function(g){var p=i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,g);return p.style.backgroundColor=g.getAttribute("value")||"",p}},{key:"selectItem",value:function(g,p){i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,p);var h=this.label.querySelector(".ql-color-label"),c=g&&g.getAttribute("data-value")||"";h&&(h.tagName==="line"?h.style.stroke=c:h.style.fill=c)}}]),v}(s.default);t.default=d},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function m(v,y){for(var g=0;g<y.length;g++){var p=y[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}return function(v,y,g){return y&&m(v.prototype,y),g&&m(v,g),v}}(),i=function m(v,y,g){v===null&&(v=Function.prototype);var p=Object.getOwnPropertyDescriptor(v,y);if(p===void 0){var h=Object.getPrototypeOf(v);return h===null?void 0:m(h,y,g)}else{if("value"in p)return p.value;var c=p.get;return c===void 0?void 0:c.call(g)}},o=e(28),s=f(o);function f(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function u(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function a(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d=function(m){a(v,m);function v(y,g){l(this,v);var p=u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return p.container.classList.add("ql-icon-picker"),[].forEach.call(p.container.querySelectorAll(".ql-picker-item"),function(h){h.innerHTML=g[h.getAttribute("data-value")||""]}),p.defaultItem=p.container.querySelector(".ql-selected"),p.selectItem(p.defaultItem),p}return r(v,[{key:"selectItem",value:function(g,p){i(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,g,p),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),v}(s.default);t.default=d},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function s(f,l){for(var u=0;u<l.length;u++){var a=l[u];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(f,l,u){return l&&s(f.prototype,l),u&&s(f,u),f}}();function i(s,f){if(!(s instanceof f))throw new TypeError("Cannot call a class as a function")}var o=function(){function s(f,l){var u=this;i(this,s),this.quill=f,this.boundsContainer=l||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return r(s,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(l){var u=l.left+l.width/2-this.root.offsetWidth/2,a=l.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=a+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),m=this.root.getBoundingClientRect(),v=0;if(m.right>d.right&&(v=d.right-m.right,this.root.style.left=u+v+"px"),m.left<d.left&&(v=d.left-m.left,this.root.style.left=u+v+"px"),m.bottom>d.bottom){var y=m.bottom-m.top,g=l.bottom-l.top+y;this.root.style.top=a-g+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),s}();t.default=o},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function O(E,A){var k=[],T=!0,I=!1,R=void 0;try{for(var U=E[Symbol.iterator](),z;!(T=(z=U.next()).done)&&(k.push(z.value),!(A&&k.length===A));T=!0);}catch(j){I=!0,R=j}finally{try{!T&&U.return&&U.return()}finally{if(I)throw R}}return k}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return O(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function O(E,A,k){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,A);if(T===void 0){var I=Object.getPrototypeOf(E);return I===null?void 0:O(I,A,k)}else{if("value"in T)return T.value;var R=T.get;return R===void 0?void 0:R.call(k)}},o=function(){function O(E,A){for(var k=0;k<A.length;k++){var T=A[k];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,A,k){return A&&O(E.prototype,A),k&&O(E,k),E}}(),s=e(3),f=h(s),l=e(8),u=h(l),a=e(43),d=h(a),m=e(27),v=h(m),y=e(15),g=e(41),p=h(g);function h(O){return O&&O.__esModule?O:{default:O}}function c(O,E){if(!(O instanceof E))throw new TypeError("Cannot call a class as a function")}function b(O,E){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:O}function _(O,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);O.prototype=Object.create(E&&E.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(O,E):O.__proto__=E)}var w=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(O){_(E,O);function E(A,k){c(this,E),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=w);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,k));return T.quill.container.classList.add("ql-snow"),T}return o(E,[{key:"extendToolbar",value:function(k){k.container.classList.add("ql-snow"),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),p.default),this.tooltip=new x(this.quill,this.options.bounds),k.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(T,I){k.handlers.link.call(k,!I.format.link)})}}]),E}(d.default);S.DEFAULTS=(0,f.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var A=this.quill.getSelection();if(A==null||A.length==0)return;var k=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(k)&&k.indexOf("mailto:")!==0&&(k="mailto:"+k);var T=this.quill.theme.tooltip;T.edit("link",k)}else this.quill.format("link",!1)}}}}});var x=function(O){_(E,O);function E(A,k){c(this,E);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,k));return T.preview=T.root.querySelector("a.ql-preview"),T}return o(E,[{key:"listen",value:function(){var k=this;i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(T){k.root.classList.contains("ql-editing")?k.save():k.edit("link",k.preview.textContent),T.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(T){if(k.linkRange!=null){var I=k.linkRange;k.restoreFocus(),k.quill.formatText(I,"link",!1,u.default.sources.USER),delete k.linkRange}T.preventDefault(),k.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(T,I,R){if(T!=null){if(T.length===0&&R===u.default.sources.USER){var U=k.quill.scroll.descendant(v.default,T.index),z=r(U,2),j=z[0],P=z[1];if(j!=null){k.linkRange=new y.Range(T.index-P,j.length());var N=v.default.formats(j.domNode);k.preview.textContent=N,k.preview.setAttribute("href",N),k.show(),k.position(k.quill.getBounds(k.linkRange));return}}else delete k.linkRange;k.hide()}})}},{key:"show",value:function(){i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(a.BaseTooltip);x.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=S},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(29),i=X(r),o=e(36),s=e(38),f=e(64),l=e(65),u=X(l),a=e(66),d=X(a),m=e(67),v=X(m),y=e(37),g=e(26),p=e(39),h=e(40),c=e(56),b=X(c),_=e(68),w=X(_),S=e(27),x=X(S),O=e(69),E=X(O),A=e(70),k=X(A),T=e(71),I=X(T),R=e(72),U=X(R),z=e(73),j=X(z),P=e(13),N=X(P),D=e(74),C=X(D),H=e(75),q=X(H),L=e(57),M=X(L),V=e(41),$=X(V),Z=e(28),et=X(Z),ct=e(59),ft=X(ct),at=e(60),bt=X(at),Pt=e(61),Ct=X(Pt),G=e(108),W=X(G),nt=e(62),ot=X(nt);function X(dt){return dt&&dt.__esModule?dt:{default:dt}}i.default.register({"attributors/attribute/direction":s.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":y.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":s.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":h.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":y.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":s.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":h.SizeStyle},!0),i.default.register({"formats/align":o.AlignClass,"formats/direction":s.DirectionClass,"formats/indent":f.IndentClass,"formats/background":y.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":p.FontClass,"formats/size":h.SizeClass,"formats/blockquote":u.default,"formats/code-block":N.default,"formats/header":d.default,"formats/list":v.default,"formats/bold":b.default,"formats/code":P.Code,"formats/italic":w.default,"formats/link":x.default,"formats/script":E.default,"formats/strike":k.default,"formats/underline":I.default,"formats/image":U.default,"formats/video":j.default,"formats/list/item":m.ListItem,"modules/formula":C.default,"modules/syntax":q.default,"modules/toolbar":M.default,"themes/bubble":W.default,"themes/snow":ot.default,"ui/icons":$.default,"ui/picker":et.default,"ui/icon-picker":bt.default,"ui/color-picker":ft.default,"ui/tooltip":Ct.default},!0),t.default=i.default},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var r=function(){function v(y,g){for(var p=0;p<g.length;p++){var h=g[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(y,h.key,h)}}return function(y,g,p){return g&&v(y.prototype,g),p&&v(y,p),y}}(),i=function v(y,g,p){y===null&&(y=Function.prototype);var h=Object.getOwnPropertyDescriptor(y,g);if(h===void 0){var c=Object.getPrototypeOf(y);return c===null?void 0:v(c,g,p)}else{if("value"in h)return h.value;var b=h.get;return b===void 0?void 0:b.call(p)}},o=e(0),s=f(o);function f(v){return v&&v.__esModule?v:{default:v}}function l(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function a(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var d=function(v){a(y,v);function y(){return l(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return r(y,[{key:"add",value:function(p,h){if(h==="+1"||h==="-1"){var c=this.value(p)||0;h=h==="+1"?c+1:c-1}return h===0?(this.remove(p),!0):i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"add",this).call(this,p,h)}},{key:"canAdd",value:function(p,h){return i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,p,h)||i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,p,parseInt(h))}},{key:"value",value:function(p){return parseInt(i(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,p))||void 0}}]),y}(s.default.Attributor.Class),m=new d("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=m},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(4),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}function s(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function f(a,d){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:a}function l(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}var u=function(a){l(d,a);function d(){return s(this,d),f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(i.default);u.blotName="blockquote",u.tagName="blockquote",t.default=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function d(m,v){for(var y=0;y<v.length;y++){var g=v[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}return function(m,v,y){return v&&d(m.prototype,v),y&&d(m,y),m}}(),i=e(4),o=s(i);function s(d){return d&&d.__esModule?d:{default:d}}function f(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function l(d,m){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:d}function u(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(d,m):d.__proto__=m)}var a=function(d){u(m,d);function m(){return f(this,m),l(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return r(m,null,[{key:"formats",value:function(y){return this.tagName.indexOf(y.tagName)+1}}]),m}(o.default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],t.default=a},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var r=function(){function c(b,_){for(var w=0;w<_.length;w++){var S=_[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,_,w){return _&&c(b.prototype,_),w&&c(b,w),b}}(),i=function c(b,_,w){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,_);if(S===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:c(x,_,w)}else{if("value"in S)return S.value;var O=S.get;return O===void 0?void 0:O.call(w)}},o=e(0),s=d(o),f=e(4),l=d(f),u=e(25),a=d(u);function d(c){return c&&c.__esModule?c:{default:c}}function m(c,b,_){return b in c?Object.defineProperty(c,b,{value:_,enumerable:!0,configurable:!0,writable:!0}):c[b]=_,c}function v(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}function y(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:c}function g(c,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var p=function(c){g(b,c);function b(){return v(this,b),y(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return r(b,[{key:"format",value:function(w,S){w===h.blotName&&!S?this.replaceWith(s.default.create(this.statics.scope)):i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,w,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(w,S){return this.parent.isolate(this.offset(this.parent),this.length()),w===this.parent.statics.blotName?(this.parent.replaceWith(w,S),this):(this.parent.unwrap(),i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replaceWith",this).call(this,w,S))}}],[{key:"formats",value:function(w){return w.tagName===this.tagName?void 0:i(b.__proto__||Object.getPrototypeOf(b),"formats",this).call(this,w)}}]),b}(l.default);p.blotName="list-item",p.tagName="LI";var h=function(c){g(b,c),r(b,null,[{key:"create",value:function(w){var S=w==="ordered"?"OL":"UL",x=i(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,S);return(w==="checked"||w==="unchecked")&&x.setAttribute("data-checked",w==="checked"),x}},{key:"formats",value:function(w){if(w.tagName==="OL")return"ordered";if(w.tagName==="UL")return w.hasAttribute("data-checked")?w.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function b(_){v(this,b);var w=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_)),S=function(O){if(O.target.parentNode===_){var E=w.statics.formats(_),A=s.default.find(O.target);E==="checked"?A.format("list","unchecked"):E==="unchecked"&&A.format("list","checked")}};return _.addEventListener("touchstart",S),_.addEventListener("mousedown",S),w}return r(b,[{key:"format",value:function(w,S){this.children.length>0&&this.children.tail.format(w,S)}},{key:"formats",value:function(){return m({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(w,S){if(w instanceof p)i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertBefore",this).call(this,w,S);else{var x=S==null?this.length():S.offset(this),O=this.split(x);O.parent.insertBefore(w,O)}}},{key:"optimize",value:function(w){i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,w);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(w){if(w.statics.blotName!==this.statics.blotName){var S=s.default.create(this.statics.defaultChild);w.moveChildren(S),this.appendChild(S)}i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replace",this).call(this,w)}}]),b}(a.default);h.blotName="list",h.scope=s.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],t.ListItem=p,t.default=h},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(56),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}function s(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function f(a,d){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:a}function l(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}var u=function(a){l(d,a);function d(){return s(this,d),f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(i.default);u.blotName="italic",u.tagName=["EM","I"],t.default=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function m(v,y){for(var g=0;g<y.length;g++){var p=y[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}return function(v,y,g){return y&&m(v.prototype,y),g&&m(v,g),v}}(),i=function m(v,y,g){v===null&&(v=Function.prototype);var p=Object.getOwnPropertyDescriptor(v,y);if(p===void 0){var h=Object.getPrototypeOf(v);return h===null?void 0:m(h,y,g)}else{if("value"in p)return p.value;var c=p.get;return c===void 0?void 0:c.call(g)}},o=e(6),s=f(o);function f(m){return m&&m.__esModule?m:{default:m}}function l(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function u(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function a(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d=function(m){a(v,m);function v(){return l(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return r(v,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):i(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),v}(s.default);d.blotName="script",d.tagName=["SUB","SUP"],t.default=d},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(6),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}function s(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function f(a,d){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:a}function l(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}var u=function(a){l(d,a);function d(){return s(this,d),f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(i.default);u.blotName="strike",u.tagName="S",t.default=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(6),i=o(r);function o(a){return a&&a.__esModule?a:{default:a}}function s(a,d){if(!(a instanceof d))throw new TypeError("Cannot call a class as a function")}function f(a,d){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:a}function l(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);a.prototype=Object.create(d&&d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(a,d):a.__proto__=d)}var u=function(a){l(d,a);function d(){return s(this,d),f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(i.default);u.blotName="underline",u.tagName="U",t.default=u},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function y(g,p){for(var h=0;h<p.length;h++){var c=p[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}return function(g,p,h){return p&&y(g.prototype,p),h&&y(g,h),g}}(),i=function y(g,p,h){g===null&&(g=Function.prototype);var c=Object.getOwnPropertyDescriptor(g,p);if(c===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,p,h)}else{if("value"in c)return c.value;var _=c.get;return _===void 0?void 0:_.call(h)}},o=e(0),s=l(o),f=e(27);function l(y){return y&&y.__esModule?y:{default:y}}function u(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function a(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function d(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var m=["alt","height","width"],v=function(y){d(g,y);function g(){return u(this,g),a(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return r(g,[{key:"format",value:function(h,c){m.indexOf(h)>-1?c?this.domNode.setAttribute(h,c):this.domNode.removeAttribute(h):i(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,h,c)}}],[{key:"create",value:function(h){var c=i(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,h);return typeof h=="string"&&c.setAttribute("src",this.sanitize(h)),c}},{key:"formats",value:function(h){return m.reduce(function(c,b){return h.hasAttribute(b)&&(c[b]=h.getAttribute(b)),c},{})}},{key:"match",value:function(h){return/\.(jpe?g|gif|png)$/.test(h)||/^data:image\/.+;base64/.test(h)}},{key:"sanitize",value:function(h){return(0,f.sanitize)(h,["http","https","data"])?h:"//:0"}},{key:"value",value:function(h){return h.getAttribute("src")}}]),g}(s.default.Embed);v.blotName="image",v.tagName="IMG",t.default=v},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function y(g,p){for(var h=0;h<p.length;h++){var c=p[h];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}return function(g,p,h){return p&&y(g.prototype,p),h&&y(g,h),g}}(),i=function y(g,p,h){g===null&&(g=Function.prototype);var c=Object.getOwnPropertyDescriptor(g,p);if(c===void 0){var b=Object.getPrototypeOf(g);return b===null?void 0:y(b,p,h)}else{if("value"in c)return c.value;var _=c.get;return _===void 0?void 0:_.call(h)}},o=e(4),s=e(27),f=l(s);function l(y){return y&&y.__esModule?y:{default:y}}function u(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function a(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function d(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var m=["height","width"],v=function(y){d(g,y);function g(){return u(this,g),a(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return r(g,[{key:"format",value:function(h,c){m.indexOf(h)>-1?c?this.domNode.setAttribute(h,c):this.domNode.removeAttribute(h):i(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,h,c)}}],[{key:"create",value:function(h){var c=i(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,h);return c.setAttribute("frameborder","0"),c.setAttribute("allowfullscreen",!0),c.setAttribute("src",this.sanitize(h)),c}},{key:"formats",value:function(h){return m.reduce(function(c,b){return h.hasAttribute(b)&&(c[b]=h.getAttribute(b)),c},{})}},{key:"sanitize",value:function(h){return f.default.sanitize(h)}},{key:"value",value:function(h){return h.getAttribute("src")}}]),g}(o.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",t.default=v},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var r=function(){function h(c,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(c,w.key,w)}}return function(c,b,_){return b&&h(c.prototype,b),_&&h(c,_),c}}(),i=function h(c,b,_){c===null&&(c=Function.prototype);var w=Object.getOwnPropertyDescriptor(c,b);if(w===void 0){var S=Object.getPrototypeOf(c);return S===null?void 0:h(S,b,_)}else{if("value"in w)return w.value;var x=w.get;return x===void 0?void 0:x.call(_)}},o=e(35),s=d(o),f=e(5),l=d(f),u=e(9),a=d(u);function d(h){return h&&h.__esModule?h:{default:h}}function m(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function v(h,c){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:h}function y(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(h,c):h.__proto__=c)}var g=function(h){y(c,h);function c(){return m(this,c),v(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return r(c,null,[{key:"create",value:function(_){var w=i(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,_);return typeof _=="string"&&(window.katex.render(_,w,{throwOnError:!1,errorColor:"#f00"}),w.setAttribute("data-value",_)),w}},{key:"value",value:function(_){return _.getAttribute("data-value")}}]),c}(s.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var p=function(h){y(c,h),r(c,null,[{key:"register",value:function(){l.default.register(g,!0)}}]);function c(){m(this,c);var b=v(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return b}return c}(a.default);t.FormulaBlot=g,t.default=p},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var r=function(){function _(w,S){for(var x=0;x<S.length;x++){var O=S[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(w,O.key,O)}}return function(w,S,x){return S&&_(w.prototype,S),x&&_(w,x),w}}(),i=function _(w,S,x){w===null&&(w=Function.prototype);var O=Object.getOwnPropertyDescriptor(w,S);if(O===void 0){var E=Object.getPrototypeOf(w);return E===null?void 0:_(E,S,x)}else{if("value"in O)return O.value;var A=O.get;return A===void 0?void 0:A.call(x)}},o=e(0),s=v(o),f=e(5),l=v(f),u=e(9),a=v(u),d=e(13),m=v(d);function v(_){return _&&_.__esModule?_:{default:_}}function y(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function g(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function p(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var h=function(_){p(w,_);function w(){return y(this,w),g(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return r(w,[{key:"replaceWith",value:function(x){this.domNode.textContent=this.domNode.textContent,this.attach(),i(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,x)}},{key:"highlight",value:function(x){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=x(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),w}(m.default);h.className="ql-syntax";var c=new s.default.Attributor.Class("token","hljs",{scope:s.default.Scope.INLINE}),b=function(_){p(w,_),r(w,null,[{key:"register",value:function(){l.default.register(c,!0),l.default.register(h,!0)}}]);function w(S,x){y(this,w);var O=g(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,S,x));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return O.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){O.highlight(),E=null},O.options.interval)}),O.highlight(),O}return r(w,[{key:"highlight",value:function(){var x=this;if(!this.quill.selection.composing){this.quill.update(l.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(E){E.highlight(x.options.highlight)}),this.quill.update(l.default.sources.SILENT),O!=null&&this.quill.setSelection(O,l.default.sources.SILENT)}}}]),w}(a.default);b.DEFAULTS={highlight:function(){return window.hljs==null?null:function(_){var w=window.hljs.highlightAuto(_);return w.value}}(),interval:1e3},t.CodeBlock=h,t.CodeToken=c,t.default=b},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,t){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,t){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,t){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,t){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,t){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var r=function w(S,x,O){S===null&&(S=Function.prototype);var E=Object.getOwnPropertyDescriptor(S,x);if(E===void 0){var A=Object.getPrototypeOf(S);return A===null?void 0:w(A,x,O)}else{if("value"in E)return E.value;var k=E.get;return k===void 0?void 0:k.call(O)}},i=function(){function w(S,x){for(var O=0;O<x.length;O++){var E=x[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,E.key,E)}}return function(S,x,O){return x&&w(S.prototype,x),O&&w(S,O),S}}(),o=e(3),s=y(o),f=e(8),l=y(f),u=e(43),a=y(u),d=e(15),m=e(41),v=y(m);function y(w){return w&&w.__esModule?w:{default:w}}function g(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function p(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function h(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var c=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],b=function(w){h(S,w);function S(x,O){g(this,S),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=c);var E=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,x,O));return E.quill.container.classList.add("ql-bubble"),E}return i(S,[{key:"extendToolbar",value:function(O){this.tooltip=new _(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),v.default)}}]),S}(a.default);b.DEFAULTS=(0,s.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var _=function(w){h(S,w);function S(x,O){g(this,S);var E=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,x,O));return E.quill.on(l.default.events.EDITOR_CHANGE,function(A,k,T,I){if(A===l.default.events.SELECTION_CHANGE)if(k!=null&&k.length>0&&I===l.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var R=E.quill.getLines(k.index,k.length);if(R.length===1)E.position(E.quill.getBounds(k));else{var U=R[R.length-1],z=E.quill.getIndex(U),j=Math.min(U.length()-1,k.index+k.length-z),P=E.quill.getBounds(new d.Range(z,j));E.position(P)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return i(S,[{key:"listen",value:function(){var O=this;r(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var E=O.quill.getSelection();E!=null&&O.position(O.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var E=r(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,O),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",E===0)return E;A.style.marginLeft=-1*E-A.offsetWidth/2+"px"}}]),S}(u.BaseTooltip);_.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=_,t.default=b},function(n,t,e){n.exports=e(63)}]).default})});var ys=hs((Yr,Hi)=>{(function(n,t){typeof Yr=="object"&&typeof Hi=="object"?Hi.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Yr=="object"?Yr.QuillCursors=t():n.QuillCursors=t()})(self,()=>(()=>{var n={582:(i,o,s)=>{"use strict";s.d(o,{Z:()=>d});var f=s(81),l=s.n(f),u=s(645),a=s.n(u)()(l());a.push([i.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);let d=a},645:i=>{"use strict";i.exports=function(o){var s=[];return s.toString=function(){return this.map(function(f){var l="",u=f[5]!==void 0;return f[4]&&(l+="@supports (".concat(f[4],") {")),f[2]&&(l+="@media ".concat(f[2]," {")),u&&(l+="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {")),l+=o(f),u&&(l+="}"),f[2]&&(l+="}"),f[4]&&(l+="}"),l}).join("")},s.i=function(f,l,u,a,d){typeof f=="string"&&(f=[[null,f,void 0]]);var m={};if(u)for(var v=0;v<this.length;v++){var y=this[v][0];y!=null&&(m[y]=!0)}for(var g=0;g<f.length;g++){var p=[].concat(f[g]);u&&m[p[0]]||(d!==void 0&&(p[5]===void 0||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=d),l&&(p[2]&&(p[1]="@media ".concat(p[2]," {").concat(p[1],"}")),p[2]=l),a&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=a):p[4]="".concat(a)),s.push(p))}},s}},81:i=>{"use strict";i.exports=function(o){return o[1]}},529:i=>{var o=-1;function s(h,c,b,_){if(h===c)return h?[[0,h]]:[];if(b!=null){var w=function(A,k,T){var I=typeof T=="number"?{index:T,length:0}:T.oldRange,R=typeof T=="number"?null:T.newRange,U=A.length,z=k.length;if(I.length===0&&(R===null||R.length===0)){var j=I.index,P=A.slice(0,j),N=A.slice(j),D=R?R.index:null,C=j+z-U;if((D===null||D===C)&&!(C<0||C>z)){var H=k.slice(0,C);if((M=k.slice(C))===N){var q=Math.min(j,C);if(($=P.slice(0,q))===(et=H.slice(0,q)))return g($,P.slice(q),H.slice(q),N)}}if(D===null||D===j){var L=j,M=(H=k.slice(0,L),k.slice(L));if(H===P){var V=Math.min(U-L,z-L);if((Z=N.slice(N.length-V))===(ct=M.slice(M.length-V)))return g(P,N.slice(0,N.length-V),M.slice(0,M.length-V),Z)}}}if(I.length>0&&R&&R.length===0){var $=A.slice(0,I.index),Z=A.slice(I.index+I.length);if(!(z<(q=$.length)+(V=Z.length))){var et=k.slice(0,q),ct=k.slice(z-V);if($===et&&Z===ct)return g($,A.slice(q,U-V),k.slice(q,z-V),Z)}}return null}(h,c,b);if(w)return w}var S=l(h,c),x=h.substring(0,S);S=u(h=h.substring(S),c=c.substring(S));var O=h.substring(h.length-S),E=function(A,k){var T;if(!A)return[[1,k]];if(!k)return[[o,A]];var I=A.length>k.length?A:k,R=A.length>k.length?k:A,U=I.indexOf(R);if(U!==-1)return T=[[1,I.substring(0,U)],[0,R],[1,I.substring(U+R.length)]],A.length>k.length&&(T[0][0]=T[2][0]=o),T;if(R.length===1)return[[o,A],[1,k]];var z=function(L,M){var V=L.length>M.length?L:M,$=L.length>M.length?M:L;if(V.length<4||2*$.length<V.length)return null;function Z(G,W,nt){for(var ot,X,dt,ut,pt=G.substring(nt,nt+Math.floor(G.length/4)),kt=-1,Rt="";(kt=W.indexOf(pt,kt+1))!==-1;){var mt=l(G.substring(nt),W.substring(kt)),Wt=u(G.substring(0,nt),W.substring(0,kt));Rt.length<Wt+mt&&(Rt=W.substring(kt-Wt,kt)+W.substring(kt,kt+mt),ot=G.substring(0,nt-Wt),X=G.substring(nt+mt),dt=W.substring(0,kt-Wt),ut=W.substring(kt+mt))}return 2*Rt.length>=G.length?[ot,X,dt,ut,Rt]:null}var et,ct,ft,at,bt,Pt=Z(V,$,Math.ceil(V.length/4)),Ct=Z(V,$,Math.ceil(V.length/2));return Pt||Ct?(et=Ct?Pt&&Pt[4].length>Ct[4].length?Pt:Ct:Pt,L.length>M.length?(ct=et[0],ft=et[1],at=et[2],bt=et[3]):(at=et[0],bt=et[1],ct=et[2],ft=et[3]),[ct,ft,at,bt,et[4]]):null}(A,k);if(z){var j=z[0],P=z[1],N=z[2],D=z[3],C=z[4],H=s(j,N),q=s(P,D);return H.concat([[0,C]],q)}return function(L,M){for(var V=L.length,$=M.length,Z=Math.ceil((V+$)/2),et=Z,ct=2*Z,ft=new Array(ct),at=new Array(ct),bt=0;bt<ct;bt++)ft[bt]=-1,at[bt]=-1;ft[et+1]=0,at[et+1]=0;for(var Pt=V-$,Ct=Pt%2!=0,G=0,W=0,nt=0,ot=0,X=0;X<Z;X++){for(var dt=-X+G;dt<=X-W;dt+=2){for(var ut=et+dt,pt=(Et=dt===-X||dt!==X&&ft[ut-1]<ft[ut+1]?ft[ut+1]:ft[ut-1]+1)-dt;Et<V&&pt<$&&L.charAt(Et)===M.charAt(pt);)Et++,pt++;if(ft[ut]=Et,Et>V)W+=2;else if(pt>$)G+=2;else if(Ct&&(mt=et+Pt-dt)>=0&&mt<ct&&at[mt]!==-1&&Et>=(Rt=V-at[mt]))return f(L,M,Et,pt)}for(var kt=-X+nt;kt<=X-ot;kt+=2){for(var Rt,mt=et+kt,Wt=(Rt=kt===-X||kt!==X&&at[mt-1]<at[mt+1]?at[mt+1]:at[mt-1]+1)-kt;Rt<V&&Wt<$&&L.charAt(V-Rt-1)===M.charAt($-Wt-1);)Rt++,Wt++;if(at[mt]=Rt,Rt>V)ot+=2;else if(Wt>$)nt+=2;else if(!Ct){var Et;if((ut=et+Pt-kt)>=0&&ut<ct&&ft[ut]!==-1&&(pt=et+(Et=ft[ut])-ut,Et>=(Rt=V-Rt)))return f(L,M,Et,pt)}}}return[[o,L],[1,M]]}(A,k)}(h=h.substring(0,h.length-S),c=c.substring(0,c.length-S));return x&&E.unshift([0,x]),O&&E.push([0,O]),a(E,_),E}function f(h,c,b,_){var w=h.substring(0,b),S=c.substring(0,_),x=h.substring(b),O=c.substring(_),E=s(w,S),A=s(x,O);return E.concat(A)}function l(h,c){if(!h||!c||h.charAt(0)!==c.charAt(0))return 0;for(var b=0,_=Math.min(h.length,c.length),w=_,S=0;b<w;)h.substring(S,w)==c.substring(S,w)?S=b=w:_=w,w=Math.floor((_-b)/2+b);return d(h.charCodeAt(w-1))&&w--,w}function u(h,c){if(!h||!c||h.slice(-1)!==c.slice(-1))return 0;for(var b=0,_=Math.min(h.length,c.length),w=_,S=0;b<w;)h.substring(h.length-w,h.length-S)==c.substring(c.length-w,c.length-S)?S=b=w:_=w,w=Math.floor((_-b)/2+b);return m(h.charCodeAt(h.length-w))&&w--,w}function a(h,c){h.push([0,""]);for(var b,_=0,w=0,S=0,x="",O="";_<h.length;)if(_<h.length-1&&!h[_][1])h.splice(_,1);else switch(h[_][0]){case 1:S++,O+=h[_][1],_++;break;case o:w++,x+=h[_][1],_++;break;case 0:var E=_-S-w-1;if(c){if(E>=0&&y(h[E][1])){var A=h[E][1].slice(-1);if(h[E][1]=h[E][1].slice(0,-1),x=A+x,O=A+O,!h[E][1]){h.splice(E,1),_--;var k=E-1;h[k]&&h[k][0]===1&&(S++,O=h[k][1]+O,k--),h[k]&&h[k][0]===o&&(w++,x=h[k][1]+x,k--),E=k}}v(h[_][1])&&(A=h[_][1].charAt(0),h[_][1]=h[_][1].slice(1),x+=A,O+=A)}if(_<h.length-1&&!h[_][1]){h.splice(_,1);break}if(x.length>0||O.length>0){x.length>0&&O.length>0&&((b=l(O,x))!==0&&(E>=0?h[E][1]+=O.substring(0,b):(h.splice(0,0,[0,O.substring(0,b)]),_++),O=O.substring(b),x=x.substring(b)),(b=u(O,x))!==0&&(h[_][1]=O.substring(O.length-b)+h[_][1],O=O.substring(0,O.length-b),x=x.substring(0,x.length-b)));var T=S+w;x.length===0&&O.length===0?(h.splice(_-T,T),_-=T):x.length===0?(h.splice(_-T,T,[1,O]),_=_-T+1):O.length===0?(h.splice(_-T,T,[o,x]),_=_-T+1):(h.splice(_-T,T,[o,x],[1,O]),_=_-T+2)}_!==0&&h[_-1][0]===0?(h[_-1][1]+=h[_][1],h.splice(_,1)):_++,S=0,w=0,x="",O=""}h[h.length-1][1]===""&&h.pop();var I=!1;for(_=1;_<h.length-1;)h[_-1][0]===0&&h[_+1][0]===0&&(h[_][1].substring(h[_][1].length-h[_-1][1].length)===h[_-1][1]?(h[_][1]=h[_-1][1]+h[_][1].substring(0,h[_][1].length-h[_-1][1].length),h[_+1][1]=h[_-1][1]+h[_+1][1],h.splice(_-1,1),I=!0):h[_][1].substring(0,h[_+1][1].length)==h[_+1][1]&&(h[_-1][1]+=h[_+1][1],h[_][1]=h[_][1].substring(h[_+1][1].length)+h[_+1][1],h.splice(_+1,1),I=!0)),_++;I&&a(h,c)}function d(h){return h>=55296&&h<=56319}function m(h){return h>=56320&&h<=57343}function v(h){return m(h.charCodeAt(0))}function y(h){return d(h.charCodeAt(h.length-1))}function g(h,c,b,_){return y(h)||v(_)?null:function(w){for(var S=[],x=0;x<w.length;x++)w[x][1].length>0&&S.push(w[x]);return S}([[0,h],[o,c],[1,b],[0,_]])}function p(h,c,b){return s(h,c,b,!0)}p.INSERT=1,p.DELETE=o,p.EQUAL=0,i.exports=p},465:(i,o,s)=>{i=s.nmd(i);var f="__lodash_hash_undefined__",l=9007199254740991,u="[object Arguments]",a="[object Boolean]",d="[object Date]",m="[object Function]",v="[object GeneratorFunction]",y="[object Map]",g="[object Number]",p="[object Object]",h="[object Promise]",c="[object RegExp]",b="[object Set]",_="[object String]",w="[object Symbol]",S="[object WeakMap]",x="[object ArrayBuffer]",O="[object DataView]",E="[object Float32Array]",A="[object Float64Array]",k="[object Int8Array]",T="[object Int16Array]",I="[object Int32Array]",R="[object Uint8Array]",U="[object Uint8ClampedArray]",z="[object Uint16Array]",j="[object Uint32Array]",P=/\w*$/,N=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,C={};C[u]=C["[object Array]"]=C[x]=C[O]=C[a]=C[d]=C[E]=C[A]=C[k]=C[T]=C[I]=C[y]=C[g]=C[p]=C[c]=C[b]=C[_]=C[w]=C[R]=C[U]=C[z]=C[j]=!0,C["[object Error]"]=C[m]=C[S]=!1;var H=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g,q=typeof self=="object"&&self&&self.Object===Object&&self,L=H||q||Function("return this")(),M=o&&!o.nodeType&&o,V=M&&i&&!i.nodeType&&i,$=V&&V.exports===M;function Z(B,Y){return B.set(Y[0],Y[1]),B}function et(B,Y){return B.add(Y),B}function ct(B,Y,it,lt){var wt=-1,Ut=B?B.length:0;for(lt&&Ut&&(it=B[++wt]);++wt<Ut;)it=Y(it,B[wt],wt,B);return it}function ft(B){var Y=!1;if(B!=null&&typeof B.toString!="function")try{Y=!!(B+"")}catch{}return Y}function at(B){var Y=-1,it=Array(B.size);return B.forEach(function(lt,wt){it[++Y]=[wt,lt]}),it}function bt(B,Y){return function(it){return B(Y(it))}}function Pt(B){var Y=-1,it=Array(B.size);return B.forEach(function(lt){it[++Y]=lt}),it}var Ct,G=Array.prototype,W=Function.prototype,nt=Object.prototype,ot=L["__core-js_shared__"],X=(Ct=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||""))?"Symbol(src)_1."+Ct:"",dt=W.toString,ut=nt.hasOwnProperty,pt=nt.toString,kt=RegExp("^"+dt.call(ut).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=$?L.Buffer:void 0,mt=L.Symbol,Wt=L.Uint8Array,Et=bt(Object.getPrototypeOf,Object),re=Object.create,Be=nt.propertyIsEnumerable,or=G.splice,qe=Object.getOwnPropertySymbols,Rn=Rt?Rt.isBuffer:void 0,Xe=bt(Object.keys,Object),pn=Ae(L,"DataView"),ye=Ae(L,"Map"),Fe=Ae(L,"Promise"),oe=Ae(L,"Set"),se=Ae(L,"WeakMap"),ae=Ae(Object,"create"),Qe=ke(pn),he=ke(ye),tn=ke(Fe),F=ke(oe),Q=ke(se),tt=mt?mt.prototype:void 0,st=tt?tt.valueOf:void 0;function gt(B){var Y=-1,it=B?B.length:0;for(this.clear();++Y<it;){var lt=B[Y];this.set(lt[0],lt[1])}}function yt(B){var Y=-1,it=B?B.length:0;for(this.clear();++Y<it;){var lt=B[Y];this.set(lt[0],lt[1])}}function jt(B){var Y=-1,it=B?B.length:0;for(this.clear();++Y<it;){var lt=B[Y];this.set(lt[0],lt[1])}}function Kt(B){this.__data__=new yt(B)}function ie(B,Y,it){var lt=B[Y];ut.call(B,Y)&&Hr(lt,it)&&(it!==void 0||Y in B)||(B[Y]=it)}function gn(B,Y){for(var it=B.length;it--;)if(Hr(B[it][0],Y))return it;return-1}function me(B,Y,it,lt,wt,Ut,qt){var Tt;if(lt&&(Tt=Ut?lt(B,wt,Ut,qt):lt(B)),Tt!==void 0)return Tt;if(!Dt(B))return B;var $t=K(B);if($t){if(Tt=function(vt){var Mt=vt.length,Gt=vt.constructor(Mt);return Mt&&typeof vt[0]=="string"&&ut.call(vt,"index")&&(Gt.index=vt.index,Gt.input=vt.input),Gt}(B),!Y)return function(vt,Mt){var Gt=-1,At=vt.length;for(Mt||(Mt=Array(At));++Gt<At;)Mt[Gt]=vt[Gt];return Mt}(B,Tt)}else{var Ht=Se(B),Te=Ht==m||Ht==v;if(rt(B))return function(vt,Mt){if(Mt)return vt.slice();var Gt=new vt.constructor(vt.length);return vt.copy(Gt),Gt}(B,Y);if(Ht==p||Ht==u||Te&&!Ut){if(ft(B))return Ut?B:{};if(Tt=function(vt){return typeof vt.constructor!="function"||en(vt)?{}:Dt(Mt=Et(vt))?re(Mt):{};var Mt}(Te?{}:B),!Y)return function(vt,Mt){return Fr(vt,sr(vt),Mt)}(B,function(vt,Mt){return vt&&Fr(Mt,Ot(Mt),vt)}(Tt,B))}else{if(!C[Ht])return Ut?B:{};Tt=function(vt,Mt,Gt,At){var It,ve=vt.constructor;switch(Mt){case x:return Pn(vt);case a:case d:return new ve(+vt);case O:return function(Nt,Zt){var zt=Zt?Pn(Nt.buffer):Nt.buffer;return new Nt.constructor(zt,Nt.byteOffset,Nt.byteLength)}(vt,At);case E:case A:case k:case T:case I:case R:case U:case z:case j:return function(Nt,Zt){var zt=Zt?Pn(Nt.buffer):Nt.buffer;return new Nt.constructor(zt,Nt.byteOffset,Nt.length)}(vt,At);case y:return function(Nt,Zt,zt){return ct(Zt?zt(at(Nt),!0):at(Nt),Z,new Nt.constructor)}(vt,At,Gt);case g:case _:return new ve(vt);case c:return function(Nt){var Zt=new Nt.constructor(Nt.source,P.exec(Nt));return Zt.lastIndex=Nt.lastIndex,Zt}(vt);case b:return function(Nt,Zt,zt){return ct(Zt?zt(Pt(Nt),!0):Pt(Nt),et,new Nt.constructor)}(vt,At,Gt);case w:return It=vt,st?Object(st.call(It)):{}}}(B,Ht,me,Y)}}qt||(qt=new Kt);var He=qt.get(B);if(He)return He;if(qt.set(B,Tt),!$t)var nn=it?function(vt){return function(Mt,Gt,At){var It=Gt(Mt);return K(Mt)?It:function(ve,Nt){for(var Zt=-1,zt=Nt.length,be=ve.length;++Zt<zt;)ve[be+Zt]=Nt[Zt];return ve}(It,At(Mt))}(vt,Ot,sr)}(B):Ot(B);return function(vt,Mt){for(var Gt=-1,At=vt?vt.length:0;++Gt<At&&Mt(vt[Gt],Gt)!==!1;);}(nn||B,function(vt,Mt){nn&&(vt=B[Mt=vt]),ie(Tt,Mt,me(vt,Y,it,lt,Mt,B,qt))}),Tt}function Pn(B){var Y=new B.constructor(B.byteLength);return new Wt(Y).set(new Wt(B)),Y}function Fr(B,Y,it,lt){it||(it={});for(var wt=-1,Ut=Y.length;++wt<Ut;){var qt=Y[wt],Tt=lt?lt(it[qt],B[qt],qt,it,B):void 0;ie(it,qt,Tt===void 0?B[qt]:Tt)}return it}function Ve(B,Y){var it,lt,wt=B.__data__;return((lt=typeof(it=Y))=="string"||lt=="number"||lt=="symbol"||lt=="boolean"?it!=="__proto__":it===null)?wt[typeof Y=="string"?"string":"hash"]:wt.map}function Ae(B,Y){var it=function(lt,wt){return lt?.[wt]}(B,Y);return function(lt){return!(!Dt(lt)||(wt=lt,X&&X in wt))&&(ht(lt)||ft(lt)?kt:N).test(ke(lt));var wt}(it)?it:void 0}gt.prototype.clear=function(){this.__data__=ae?ae(null):{}},gt.prototype.delete=function(B){return this.has(B)&&delete this.__data__[B]},gt.prototype.get=function(B){var Y=this.__data__;if(ae){var it=Y[B];return it===f?void 0:it}return ut.call(Y,B)?Y[B]:void 0},gt.prototype.has=function(B){var Y=this.__data__;return ae?Y[B]!==void 0:ut.call(Y,B)},gt.prototype.set=function(B,Y){return this.__data__[B]=ae&&Y===void 0?f:Y,this},yt.prototype.clear=function(){this.__data__=[]},yt.prototype.delete=function(B){var Y=this.__data__,it=gn(Y,B);return!(it<0||(it==Y.length-1?Y.pop():or.call(Y,it,1),0))},yt.prototype.get=function(B){var Y=this.__data__,it=gn(Y,B);return it<0?void 0:Y[it][1]},yt.prototype.has=function(B){return gn(this.__data__,B)>-1},yt.prototype.set=function(B,Y){var it=this.__data__,lt=gn(it,B);return lt<0?it.push([B,Y]):it[lt][1]=Y,this},jt.prototype.clear=function(){this.__data__={hash:new gt,map:new(ye||yt),string:new gt}},jt.prototype.delete=function(B){return Ve(this,B).delete(B)},jt.prototype.get=function(B){return Ve(this,B).get(B)},jt.prototype.has=function(B){return Ve(this,B).has(B)},jt.prototype.set=function(B,Y){return Ve(this,B).set(B,Y),this},Kt.prototype.clear=function(){this.__data__=new yt},Kt.prototype.delete=function(B){return this.__data__.delete(B)},Kt.prototype.get=function(B){return this.__data__.get(B)},Kt.prototype.has=function(B){return this.__data__.has(B)},Kt.prototype.set=function(B,Y){var it=this.__data__;if(it instanceof yt){var lt=it.__data__;if(!ye||lt.length<199)return lt.push([B,Y]),this;it=this.__data__=new jt(lt)}return it.set(B,Y),this};var sr=qe?bt(qe,Object):function(){return[]},Se=function(B){return pt.call(B)};function Vr(B,Y){return!!(Y=Y??l)&&(typeof B=="number"||D.test(B))&&B>-1&&B%1==0&&B<Y}function en(B){var Y=B&&B.constructor;return B===(typeof Y=="function"&&Y.prototype||nt)}function ke(B){if(B!=null){try{return dt.call(B)}catch{}try{return B+""}catch{}}return""}function Hr(B,Y){return B===Y||B!=B&&Y!=Y}(pn&&Se(new pn(new ArrayBuffer(1)))!=O||ye&&Se(new ye)!=y||Fe&&Se(Fe.resolve())!=h||oe&&Se(new oe)!=b||se&&Se(new se)!=S)&&(Se=function(B){var Y=pt.call(B),it=Y==p?B.constructor:void 0,lt=it?ke(it):void 0;if(lt)switch(lt){case Qe:return O;case he:return y;case tn:return h;case F:return b;case Q:return S}return Y});var K=Array.isArray;function J(B){return B!=null&&function(Y){return typeof Y=="number"&&Y>-1&&Y%1==0&&Y<=l}(B.length)&&!ht(B)}var rt=Rn||function(){return!1};function ht(B){var Y=Dt(B)?pt.call(B):"";return Y==m||Y==v}function Dt(B){var Y=typeof B;return!!B&&(Y=="object"||Y=="function")}function Ot(B){return J(B)?function(Y,it){var lt=K(Y)||function(Tt){return function($t){return function(Ht){return!!Ht&&typeof Ht=="object"}($t)&&J($t)}(Tt)&&ut.call(Tt,"callee")&&(!Be.call(Tt,"callee")||pt.call(Tt)==u)}(Y)?function(Tt,$t){for(var Ht=-1,Te=Array(Tt);++Ht<Tt;)Te[Ht]=$t(Ht);return Te}(Y.length,String):[],wt=lt.length,Ut=!!wt;for(var qt in Y)!it&&!ut.call(Y,qt)||Ut&&(qt=="length"||Vr(qt,wt))||lt.push(qt);return lt}(B):function(Y){if(!en(Y))return Xe(Y);var it=[];for(var lt in Object(Y))ut.call(Y,lt)&&lt!="constructor"&&it.push(lt);return it}(B)}i.exports=function(B){return me(B,!0,!0)}},307:(i,o,s)=>{i=s.nmd(i);var f="__lodash_hash_undefined__",l=9007199254740991,u="[object Arguments]",a="[object Array]",d="[object Boolean]",m="[object Date]",v="[object Error]",y="[object Function]",g="[object Map]",p="[object Number]",h="[object Object]",c="[object Promise]",b="[object RegExp]",_="[object Set]",w="[object String]",S="[object WeakMap]",x="[object ArrayBuffer]",O="[object DataView]",E=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k[u]=k[a]=k[x]=k[d]=k[O]=k[m]=k[v]=k[y]=k[g]=k[p]=k[h]=k[b]=k[_]=k[w]=k[S]=!1;var T=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g,I=typeof self=="object"&&self&&self.Object===Object&&self,R=T||I||Function("return this")(),U=o&&!o.nodeType&&o,z=U&&i&&!i.nodeType&&i,j=z&&z.exports===U,P=j&&T.process,N=function(){try{return P&&P.binding&&P.binding("util")}catch{}}(),D=N&&N.isTypedArray;function C(K,J){for(var rt=-1,ht=K==null?0:K.length;++rt<ht;)if(J(K[rt],rt,K))return!0;return!1}function H(K){var J=-1,rt=Array(K.size);return K.forEach(function(ht,Dt){rt[++J]=[Dt,ht]}),rt}function q(K){var J=-1,rt=Array(K.size);return K.forEach(function(ht){rt[++J]=ht}),rt}var L,M,V,$=Array.prototype,Z=Function.prototype,et=Object.prototype,ct=R["__core-js_shared__"],ft=Z.toString,at=et.hasOwnProperty,bt=(L=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",Pt=et.toString,Ct=RegExp("^"+ft.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=j?R.Buffer:void 0,W=R.Symbol,nt=R.Uint8Array,ot=et.propertyIsEnumerable,X=$.splice,dt=W?W.toStringTag:void 0,ut=Object.getOwnPropertySymbols,pt=G?G.isBuffer:void 0,kt=(M=Object.keys,V=Object,function(K){return M(V(K))}),Rt=jt(R,"DataView"),mt=jt(R,"Map"),Wt=jt(R,"Promise"),Et=jt(R,"Set"),re=jt(R,"WeakMap"),Be=jt(Object,"create"),or=me(Rt),qe=me(mt),Rn=me(Wt),Xe=me(Et),pn=me(re),ye=W?W.prototype:void 0,Fe=ye?ye.valueOf:void 0;function oe(K){var J=-1,rt=K==null?0:K.length;for(this.clear();++J<rt;){var ht=K[J];this.set(ht[0],ht[1])}}function se(K){var J=-1,rt=K==null?0:K.length;for(this.clear();++J<rt;){var ht=K[J];this.set(ht[0],ht[1])}}function ae(K){var J=-1,rt=K==null?0:K.length;for(this.clear();++J<rt;){var ht=K[J];this.set(ht[0],ht[1])}}function Qe(K){var J=-1,rt=K==null?0:K.length;for(this.__data__=new ae;++J<rt;)this.add(K[J])}function he(K){var J=this.__data__=new se(K);this.size=J.size}function tn(K,J){for(var rt=K.length;rt--;)if(Pn(K[rt][0],J))return rt;return-1}function F(K){return K==null?K===void 0?"[object Undefined]":"[object Null]":dt&&dt in Object(K)?function(J){var rt=at.call(J,dt),ht=J[dt];try{J[dt]=void 0;var Dt=!0}catch{}var Ot=Pt.call(J);return Dt&&(rt?J[dt]=ht:delete J[dt]),Ot}(K):function(J){return Pt.call(J)}(K)}function Q(K){return en(K)&&F(K)==u}function tt(K,J,rt,ht,Dt){return K===J||(K==null||J==null||!en(K)&&!en(J)?K!=K&&J!=J:function(Ot,B,Y,it,lt,wt){var Ut=Ve(Ot),qt=Ve(B),Tt=Ut?a:ie(Ot),$t=qt?a:ie(B),Ht=(Tt=Tt==u?h:Tt)==h,Te=($t=$t==u?h:$t)==h,He=Tt==$t;if(He&&Ae(Ot)){if(!Ae(B))return!1;Ut=!0,Ht=!1}if(He&&!Ht)return wt||(wt=new he),Ut||ke(Ot)?st(Ot,B,Y,it,lt,wt):function(At,It,ve,Nt,Zt,zt,be){switch(ve){case O:if(At.byteLength!=It.byteLength||At.byteOffset!=It.byteOffset)return!1;At=At.buffer,It=It.buffer;case x:return!(At.byteLength!=It.byteLength||!zt(new nt(At),new nt(It)));case d:case m:case p:return Pn(+At,+It);case v:return At.name==It.name&&At.message==It.message;case b:case w:return At==It+"";case g:var rn=H;case _:var ar=1&Nt;if(rn||(rn=q),At.size!=It.size&&!ar)return!1;var yn=be.get(At);if(yn)return yn==It;Nt|=2,be.set(At,It);var ze=st(rn(At),rn(It),Nt,Zt,zt,be);return be.delete(At),ze;case"[object Symbol]":if(Fe)return Fe.call(At)==Fe.call(It)}return!1}(Ot,B,Tt,Y,it,lt,wt);if(!(1&Y)){var nn=Ht&&at.call(Ot,"__wrapped__"),vt=Te&&at.call(B,"__wrapped__");if(nn||vt){var Mt=nn?Ot.value():Ot,Gt=vt?B.value():B;return wt||(wt=new he),lt(Mt,Gt,Y,it,wt)}}return!!He&&(wt||(wt=new he),function(At,It,ve,Nt,Zt,zt){var be=1&ve,rn=gt(At),ar=rn.length;if(ar!=gt(It).length&&!be)return!1;for(var yn=ar;yn--;){var ze=rn[yn];if(!(be?ze in It:at.call(It,ze)))return!1}var us=zt.get(At);if(us&&zt.get(It))return us==It;var zr=!0;zt.set(At,It),zt.set(It,At);for(var Fi=be;++yn<ar;){var Kr=At[ze=rn[yn]],$r=It[ze];if(Nt)var fs=be?Nt($r,Kr,ze,It,At,zt):Nt(Kr,$r,ze,At,It,zt);if(!(fs===void 0?Kr===$r||Zt(Kr,$r,ve,Nt,zt):fs)){zr=!1;break}Fi||(Fi=ze=="constructor")}if(zr&&!Fi){var Gr=At.constructor,Wr=It.constructor;Gr==Wr||!("constructor"in At)||!("constructor"in It)||typeof Gr=="function"&&Gr instanceof Gr&&typeof Wr=="function"&&Wr instanceof Wr||(zr=!1)}return zt.delete(At),zt.delete(It),zr}(Ot,B,Y,it,lt,wt))}(K,J,rt,ht,tt,Dt))}function st(K,J,rt,ht,Dt,Ot){var B=1&rt,Y=K.length,it=J.length;if(Y!=it&&!(B&&it>Y))return!1;var lt=Ot.get(K);if(lt&&Ot.get(J))return lt==J;var wt=-1,Ut=!0,qt=2&rt?new Qe:void 0;for(Ot.set(K,J),Ot.set(J,K);++wt<Y;){var Tt=K[wt],$t=J[wt];if(ht)var Ht=B?ht($t,Tt,wt,J,K,Ot):ht(Tt,$t,wt,K,J,Ot);if(Ht!==void 0){if(Ht)continue;Ut=!1;break}if(qt){if(!C(J,function(Te,He){if(nn=He,!qt.has(nn)&&(Tt===Te||Dt(Tt,Te,rt,ht,Ot)))return qt.push(He);var nn})){Ut=!1;break}}else if(Tt!==$t&&!Dt(Tt,$t,rt,ht,Ot)){Ut=!1;break}}return Ot.delete(K),Ot.delete(J),Ut}function gt(K){return function(J,rt,ht){var Dt=rt(J);return Ve(J)?Dt:function(Ot,B){for(var Y=-1,it=B.length,lt=Ot.length;++Y<it;)Ot[lt+Y]=B[Y];return Ot}(Dt,ht(J))}(K,Hr,Kt)}function yt(K,J){var rt,ht,Dt=K.__data__;return((ht=typeof(rt=J))=="string"||ht=="number"||ht=="symbol"||ht=="boolean"?rt!=="__proto__":rt===null)?Dt[typeof J=="string"?"string":"hash"]:Dt.map}function jt(K,J){var rt=function(ht,Dt){return ht?.[Dt]}(K,J);return function(ht){return!(!Vr(ht)||function(Dt){return!!bt&&bt in Dt}(ht))&&(sr(ht)?Ct:E).test(me(ht))}(rt)?rt:void 0}oe.prototype.clear=function(){this.__data__=Be?Be(null):{},this.size=0},oe.prototype.delete=function(K){var J=this.has(K)&&delete this.__data__[K];return this.size-=J?1:0,J},oe.prototype.get=function(K){var J=this.__data__;if(Be){var rt=J[K];return rt===f?void 0:rt}return at.call(J,K)?J[K]:void 0},oe.prototype.has=function(K){var J=this.__data__;return Be?J[K]!==void 0:at.call(J,K)},oe.prototype.set=function(K,J){var rt=this.__data__;return this.size+=this.has(K)?0:1,rt[K]=Be&&J===void 0?f:J,this},se.prototype.clear=function(){this.__data__=[],this.size=0},se.prototype.delete=function(K){var J=this.__data__,rt=tn(J,K);return!(rt<0||(rt==J.length-1?J.pop():X.call(J,rt,1),--this.size,0))},se.prototype.get=function(K){var J=this.__data__,rt=tn(J,K);return rt<0?void 0:J[rt][1]},se.prototype.has=function(K){return tn(this.__data__,K)>-1},se.prototype.set=function(K,J){var rt=this.__data__,ht=tn(rt,K);return ht<0?(++this.size,rt.push([K,J])):rt[ht][1]=J,this},ae.prototype.clear=function(){this.size=0,this.__data__={hash:new oe,map:new(mt||se),string:new oe}},ae.prototype.delete=function(K){var J=yt(this,K).delete(K);return this.size-=J?1:0,J},ae.prototype.get=function(K){return yt(this,K).get(K)},ae.prototype.has=function(K){return yt(this,K).has(K)},ae.prototype.set=function(K,J){var rt=yt(this,K),ht=rt.size;return rt.set(K,J),this.size+=rt.size==ht?0:1,this},Qe.prototype.add=Qe.prototype.push=function(K){return this.__data__.set(K,f),this},Qe.prototype.has=function(K){return this.__data__.has(K)},he.prototype.clear=function(){this.__data__=new se,this.size=0},he.prototype.delete=function(K){var J=this.__data__,rt=J.delete(K);return this.size=J.size,rt},he.prototype.get=function(K){return this.__data__.get(K)},he.prototype.has=function(K){return this.__data__.has(K)},he.prototype.set=function(K,J){var rt=this.__data__;if(rt instanceof se){var ht=rt.__data__;if(!mt||ht.length<199)return ht.push([K,J]),this.size=++rt.size,this;rt=this.__data__=new ae(ht)}return rt.set(K,J),this.size=rt.size,this};var Kt=ut?function(K){return K==null?[]:(K=Object(K),function(J,rt){for(var ht=-1,Dt=J==null?0:J.length,Ot=0,B=[];++ht<Dt;){var Y=J[ht];it=Y,ot.call(K,it)&&(B[Ot++]=Y)}var it;return B}(ut(K)))}:function(){return[]},ie=F;function gn(K,J){return!!(J=J??l)&&(typeof K=="number"||A.test(K))&&K>-1&&K%1==0&&K<J}function me(K){if(K!=null){try{return ft.call(K)}catch{}try{return K+""}catch{}}return""}function Pn(K,J){return K===J||K!=K&&J!=J}(Rt&&ie(new Rt(new ArrayBuffer(1)))!=O||mt&&ie(new mt)!=g||Wt&&ie(Wt.resolve())!=c||Et&&ie(new Et)!=_||re&&ie(new re)!=S)&&(ie=function(K){var J=F(K),rt=J==h?K.constructor:void 0,ht=rt?me(rt):"";if(ht)switch(ht){case or:return O;case qe:return g;case Rn:return c;case Xe:return _;case pn:return S}return J});var Fr=Q(function(){return arguments}())?Q:function(K){return en(K)&&at.call(K,"callee")&&!ot.call(K,"callee")},Ve=Array.isArray,Ae=pt||function(){return!1};function sr(K){if(!Vr(K))return!1;var J=F(K);return J==y||J=="[object GeneratorFunction]"||J=="[object AsyncFunction]"||J=="[object Proxy]"}function Se(K){return typeof K=="number"&&K>-1&&K%1==0&&K<=l}function Vr(K){var J=typeof K;return K!=null&&(J=="object"||J=="function")}function en(K){return K!=null&&typeof K=="object"}var ke=D?function(K){return function(J){return K(J)}}(D):function(K){return en(K)&&Se(K.length)&&!!k[F(K)]};function Hr(K){return(J=K)!=null&&Se(J.length)&&!sr(J)?function(rt,ht){var Dt=Ve(rt),Ot=!Dt&&Fr(rt),B=!Dt&&!Ot&&Ae(rt),Y=!Dt&&!Ot&&!B&&ke(rt),it=Dt||Ot||B||Y,lt=it?function(qt,Tt){for(var $t=-1,Ht=Array(qt);++$t<qt;)Ht[$t]=Tt($t);return Ht}(rt.length,String):[],wt=lt.length;for(var Ut in rt)!ht&&!at.call(rt,Ut)||it&&(Ut=="length"||B&&(Ut=="offset"||Ut=="parent")||Y&&(Ut=="buffer"||Ut=="byteLength"||Ut=="byteOffset")||gn(Ut,wt))||lt.push(Ut);return lt}(K):function(rt){if(Dt=(ht=rt)&&ht.constructor,ht!==(typeof Dt=="function"&&Dt.prototype||et))return kt(rt);var ht,Dt,Ot=[];for(var B in Object(rt))at.call(rt,B)&&B!="constructor"&&Ot.push(B);return Ot}(K);var J}i.exports=function(K,J){return tt(K,J)}},210:function(i,o,s){"use strict";var f=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(o,"__esModule",{value:!0});var l,u=f(s(465)),a=f(s(307));(function(d){d.compose=function(m,v,y){m===void 0&&(m={}),v===void 0&&(v={}),typeof m!="object"&&(m={}),typeof v!="object"&&(v={});var g=u.default(v);for(var p in y||(g=Object.keys(g).reduce(function(h,c){return g[c]!=null&&(h[c]=g[c]),h},{})),m)m[p]!==void 0&&v[p]===void 0&&(g[p]=m[p]);return Object.keys(g).length>0?g:void 0},d.diff=function(m,v){m===void 0&&(m={}),v===void 0&&(v={}),typeof m!="object"&&(m={}),typeof v!="object"&&(v={});var y=Object.keys(m).concat(Object.keys(v)).reduce(function(g,p){return a.default(m[p],v[p])||(g[p]=v[p]===void 0?null:v[p]),g},{});return Object.keys(y).length>0?y:void 0},d.invert=function(m,v){m===void 0&&(m={}),v===void 0&&(v={}),m=m||{};var y=Object.keys(v).reduce(function(g,p){return v[p]!==m[p]&&m[p]!==void 0&&(g[p]=v[p]),g},{});return Object.keys(m).reduce(function(g,p){return m[p]!==v[p]&&v[p]===void 0&&(g[p]=null),g},y)},d.transform=function(m,v,y){if(y===void 0&&(y=!1),typeof m!="object")return v;if(typeof v=="object"){if(!y)return v;var g=Object.keys(v).reduce(function(p,h){return m[h]===void 0&&(p[h]=v[h]),p},{});return Object.keys(g).length>0?g:void 0}}})(l||(l={})),o.default=l},895:function(i,o,s){"use strict";var f=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}},l=f(s(529)),u=f(s(465)),a=f(s(307)),d=f(s(210)),m=f(s(430)),v="\0",y=function(){function g(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}return g.prototype.insert=function(p,h){var c={};return typeof p=="string"&&p.length===0?this:(c.insert=p,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(c.attributes=h),this.push(c))},g.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},g.prototype.retain=function(p,h){if(p<=0)return this;var c={retain:p};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(c.attributes=h),this.push(c)},g.prototype.push=function(p){var h=this.ops.length,c=this.ops[h-1];if(p=u.default(p),typeof c=="object"){if(typeof p.delete=="number"&&typeof c.delete=="number")return this.ops[h-1]={delete:c.delete+p.delete},this;if(typeof c.delete=="number"&&p.insert!=null&&(h-=1,typeof(c=this.ops[h-1])!="object"))return this.ops.unshift(p),this;if(a.default(p.attributes,c.attributes)){if(typeof p.insert=="string"&&typeof c.insert=="string")return this.ops[h-1]={insert:c.insert+p.insert},typeof p.attributes=="object"&&(this.ops[h-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof c.retain=="number")return this.ops[h-1]={retain:c.retain+p.retain},typeof p.attributes=="object"&&(this.ops[h-1].attributes=p.attributes),this}}return h===this.ops.length?this.ops.push(p):this.ops.splice(h,0,p),this},g.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},g.prototype.filter=function(p){return this.ops.filter(p)},g.prototype.forEach=function(p){this.ops.forEach(p)},g.prototype.map=function(p){return this.ops.map(p)},g.prototype.partition=function(p){var h=[],c=[];return this.forEach(function(b){(p(b)?h:c).push(b)}),[h,c]},g.prototype.reduce=function(p,h){return this.ops.reduce(p,h)},g.prototype.changeLength=function(){return this.reduce(function(p,h){return h.insert?p+m.default.length(h):h.delete?p-h.delete:p},0)},g.prototype.length=function(){return this.reduce(function(p,h){return p+m.default.length(h)},0)},g.prototype.slice=function(p,h){p===void 0&&(p=0),h===void 0&&(h=1/0);for(var c=[],b=m.default.iterator(this.ops),_=0;_<h&&b.hasNext();){var w=void 0;_<p?w=b.next(p-_):(w=b.next(h-_),c.push(w)),_+=m.default.length(w)}return new g(c)},g.prototype.compose=function(p){var h=m.default.iterator(this.ops),c=m.default.iterator(p.ops),b=[],_=c.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){for(var w=_.retain;h.peekType()==="insert"&&h.peekLength()<=w;)w-=h.peekLength(),b.push(h.next());_.retain-w>0&&c.next(_.retain-w)}for(var S=new g(b);h.hasNext()||c.hasNext();)if(c.peekType()==="insert")S.push(c.next());else if(h.peekType()==="delete")S.push(h.next());else{var x=Math.min(h.peekLength(),c.peekLength()),O=h.next(x),E=c.next(x);if(typeof E.retain=="number"){var A={};typeof O.retain=="number"?A.retain=x:A.insert=O.insert;var k=d.default.compose(O.attributes,E.attributes,typeof O.retain=="number");if(k&&(A.attributes=k),S.push(A),!c.hasNext()&&a.default(S.ops[S.ops.length-1],A)){var T=new g(h.rest());return S.concat(T).chop()}}else typeof E.delete=="number"&&typeof O.retain=="number"&&S.push(E)}return S.chop()},g.prototype.concat=function(p){var h=new g(this.ops.slice());return p.ops.length>0&&(h.push(p.ops[0]),h.ops=h.ops.concat(p.ops.slice(1))),h},g.prototype.diff=function(p,h){if(this.ops===p.ops)return new g;var c=[this,p].map(function(x){return x.map(function(O){if(O.insert!=null)return typeof O.insert=="string"?O.insert:v;throw new Error("diff() called "+(x===p?"on":"with")+" non-document")}).join("")}),b=new g,_=l.default(c[0],c[1],h),w=m.default.iterator(this.ops),S=m.default.iterator(p.ops);return _.forEach(function(x){for(var O=x[1].length;O>0;){var E=0;switch(x[0]){case l.default.INSERT:E=Math.min(S.peekLength(),O),b.push(S.next(E));break;case l.default.DELETE:E=Math.min(O,w.peekLength()),w.next(E),b.delete(E);break;case l.default.EQUAL:E=Math.min(w.peekLength(),S.peekLength(),O);var A=w.next(E),k=S.next(E);a.default(A.insert,k.insert)?b.retain(E,d.default.diff(A.attributes,k.attributes)):b.push(k).delete(E)}O-=E}}),b.chop()},g.prototype.eachLine=function(p,h){h===void 0&&(h=`
`);for(var c=m.default.iterator(this.ops),b=new g,_=0;c.hasNext();){if(c.peekType()!=="insert")return;var w=c.peek(),S=m.default.length(w)-c.peekLength(),x=typeof w.insert=="string"?w.insert.indexOf(h,S)-S:-1;if(x<0)b.push(c.next());else if(x>0)b.push(c.next(x));else{if(p(b,c.next(1).attributes||{},_)===!1)return;_+=1,b=new g}}b.length()>0&&p(b,{},_)},g.prototype.invert=function(p){var h=new g;return this.reduce(function(c,b){if(b.insert)h.delete(m.default.length(b));else{if(b.retain&&b.attributes==null)return h.retain(b.retain),c+b.retain;if(b.delete||b.retain&&b.attributes){var _=b.delete||b.retain;return p.slice(c,c+_).forEach(function(w){b.delete?h.push(w):b.retain&&b.attributes&&h.retain(m.default.length(w),d.default.invert(b.attributes,w.attributes))}),c+_}}return c},0),h.chop()},g.prototype.transform=function(p,h){if(h===void 0&&(h=!1),h=!!h,typeof p=="number")return this.transformPosition(p,h);for(var c=p,b=m.default.iterator(this.ops),_=m.default.iterator(c.ops),w=new g;b.hasNext()||_.hasNext();)if(b.peekType()!=="insert"||!h&&_.peekType()==="insert")if(_.peekType()==="insert")w.push(_.next());else{var S=Math.min(b.peekLength(),_.peekLength()),x=b.next(S),O=_.next(S);if(x.delete)continue;O.delete?w.push(O):w.retain(S,d.default.transform(x.attributes,O.attributes,h))}else w.retain(m.default.length(b.next()));return w.chop()},g.prototype.transformPosition=function(p,h){h===void 0&&(h=!1),h=!!h;for(var c=m.default.iterator(this.ops),b=0;c.hasNext()&&b<=p;){var _=c.peekLength(),w=c.peekType();c.next(),w!=="delete"?(w==="insert"&&(b<p||!h)&&(p+=_),b+=_):p-=Math.min(_,p-b)}return p},g.Op=m.default,g.AttributeMap=d.default,g}();i.exports=y},977:function(i,o,s){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(o,"__esModule",{value:!0});var l=f(s(430)),u=function(){function a(d){this.ops=d,this.index=0,this.offset=0}return a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(d){d||(d=1/0);var m=this.ops[this.index];if(m){var v=this.offset,y=l.default.length(m);if(d>=y-v?(d=y-v,this.index+=1,this.offset=0):this.offset+=d,typeof m.delete=="number")return{delete:d};var g={};return m.attributes&&(g.attributes=m.attributes),typeof m.retain=="number"?g.retain=d:typeof m.insert=="string"?g.insert=m.insert.substr(v,d):g.insert=m.insert,g}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?l.default.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,m=this.index,v=this.next(),y=this.ops.slice(this.index);return this.offset=d,this.index=m,[v].concat(y)}return[]},a}();o.default=u},430:function(i,o,s){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(o,"__esModule",{value:!0});var l,u=f(s(977));(function(a){a.iterator=function(d){return new u.default(d)},a.length=function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}})(l||(l={})),o.default=l},165:function(i,o,s){var f,l;(l=typeof(f=function(){var u,a={};function d(y,g,p){var h=y.getClientRects();if(h.length===2){var c=y.getBoundingClientRect();return h[g][p]<c[p]}return!1}function m(y){if(!y||screen.deviceXDPI===screen.logicalXDPI)return y;if("length"in y)return Array.prototype.map.call(y,m);var g=screen.deviceXDPI/screen.logicalXDPI;return{top:y.top/g,bottom:y.bottom/g,left:y.left/g,right:y.right/g,width:y.width/g,height:y.height/g}}function v(y,g){var p,h=0,c=1024;if(c>=g.length)return Array.prototype.push.apply(y,g);for(;h<g.length;)p=Array.prototype.push.apply(y,Array.prototype.slice.call(g,h,h+c)),h+=c;return p}return a.isBroken=function(){if(u===void 0){var y=document.createElement("p"),g=document.createElement("span"),p=document.createTextNode("aa"),h=document.createTextNode("aa"),c=document.createElement("img");c.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var b=document.createRange();if(u={},y.appendChild(p),y.appendChild(g),g.appendChild(c),g.appendChild(h),document.body.appendChild(y),b.setStart(p,1),b.setEnd(g,0),u.getClientRects=u.getBoundingClientRect=b.getClientRects().length>1,u.getClientRects||(b.setEnd(h,1),u.getClientRects=u.getBoundingClientRect=b.getClientRects().length===2),!u.getBoundingClientRect){b.setEnd(b.startContainer,b.startOffset);var _=b.getBoundingClientRect();u.getBoundingClientRect=_.top===0&&_.left===0}if(document.body.removeChild(y),!u.getBoundingClientRect){var w=document.createElement("p");w.style.width="0px",w.style.fontSize="20px",w.style.whiteSpace="normal",w.style.wordBreak="normal";var S=document.createTextNode("m mm");w.appendChild(S),document.body.appendChild(w),b.setStart(S,1),b.setEnd(S,2),d(b,1,"left")?u.getBoundingClientRect=!0:(b.setStart(S,1),b.setEnd(S,3),d(b,0,"top")&&(u.getBoundingClientRect=!0)),document.body.removeChild(w)}var x=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();u.ieZoom=!!x&&x<=10}return u},a.getClientRects=function(y){var g=this.isBroken();if(g.ieZoom)return m(y.getClientRects());if(!g.getClientRects)return y.getClientRects();var p=[],h=[],c=y.endContainer,b=y.endOffset,_=document.createRange();function w(S){for(var x=0;S=S.previousSibling;)x++;return x}for(;c!==y.commonAncestorContainer;)_.setStart(c,0),_.setEnd(c,b),v(h,_.getClientRects()),b=w(c),c=c.parentNode;return(_=y.cloneRange()).setEnd(c,b),v(p,_.getClientRects()),v(p,h),p},a.getBoundingClientRect=function(y){var g=this.getClientRects(y);if(g.length===0)return null;var p,h=y.getBoundingClientRect(),c=this.isBroken();if(c.ieZoom)return m(h);if(!c.getBoundingClientRect)return h;if(h.width===0&&h.height===0)return g[0];for(var b=0,_=g.length;b<_;b++){var w=g[b];p?(p.left=Math.min(p.left,w.left),p.top=Math.min(p.top,w.top),p.right=Math.max(p.right,w.right),p.bottom=Math.max(p.bottom,w.bottom)):p={left:w.left,top:w.top,right:w.right,bottom:w.bottom}}return p&&(p.width=p.right-p.left,p.height=p.bottom-p.top),p},a})=="function"?f.call(o,s,o,i):f)===void 0||(i.exports=l)},33:(i,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>k});var f=function(){if(typeof Map<"u")return Map;function T(I,R){var U=-1;return I.some(function(z,j){return z[0]===R&&(U=j,!0)}),U}return function(){function I(){this.__entries__=[]}return Object.defineProperty(I.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),I.prototype.get=function(R){var U=T(this.__entries__,R),z=this.__entries__[U];return z&&z[1]},I.prototype.set=function(R,U){var z=T(this.__entries__,R);~z?this.__entries__[z][1]=U:this.__entries__.push([R,U])},I.prototype.delete=function(R){var U=this.__entries__,z=T(U,R);~z&&U.splice(z,1)},I.prototype.has=function(R){return!!~T(this.__entries__,R)},I.prototype.clear=function(){this.__entries__.splice(0)},I.prototype.forEach=function(R,U){U===void 0&&(U=null);for(var z=0,j=this.__entries__;z<j.length;z++){var P=j[z];R.call(U,P[1],P[0])}},I}()}(),l=typeof window<"u"&&typeof document<"u"&&window.document===document,u=s.g!==void 0&&s.g.Math===Math?s.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),a=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(u):function(T){return setTimeout(function(){return T(Date.now())},1e3/60)},d=["top","right","bottom","left","width","height","size","weight"],m=typeof MutationObserver<"u",v=function(){function T(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(I,R){var U=!1,z=!1,j=0;function P(){U&&(U=!1,I()),z&&D()}function N(){a(P)}function D(){var C=Date.now();if(U){if(C-j<2)return;z=!0}else U=!0,z=!1,setTimeout(N,20);j=C}return D}(this.refresh.bind(this))}return T.prototype.addObserver=function(I){~this.observers_.indexOf(I)||this.observers_.push(I),this.connected_||this.connect_()},T.prototype.removeObserver=function(I){var R=this.observers_,U=R.indexOf(I);~U&&R.splice(U,1),!R.length&&this.connected_&&this.disconnect_()},T.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},T.prototype.updateObservers_=function(){var I=this.observers_.filter(function(R){return R.gatherActive(),R.hasActive()});return I.forEach(function(R){return R.broadcastActive()}),I.length>0},T.prototype.connect_=function(){l&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),m?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},T.prototype.disconnect_=function(){l&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},T.prototype.onTransitionEnd_=function(I){var R=I.propertyName,U=R===void 0?"":R;d.some(function(z){return!!~U.indexOf(z)})&&this.refresh()},T.getInstance=function(){return this.instance_||(this.instance_=new T),this.instance_},T.instance_=null,T}(),y=function(T,I){for(var R=0,U=Object.keys(I);R<U.length;R++){var z=U[R];Object.defineProperty(T,z,{value:I[z],enumerable:!1,writable:!1,configurable:!0})}return T},g=function(T){return T&&T.ownerDocument&&T.ownerDocument.defaultView||u},p=w(0,0,0,0);function h(T){return parseFloat(T)||0}function c(T){for(var I=[],R=1;R<arguments.length;R++)I[R-1]=arguments[R];return I.reduce(function(U,z){return U+h(T["border-"+z+"-width"])},0)}var b=typeof SVGGraphicsElement<"u"?function(T){return T instanceof g(T).SVGGraphicsElement}:function(T){return T instanceof g(T).SVGElement&&typeof T.getBBox=="function"};function _(T){return l?b(T)?function(I){var R=I.getBBox();return w(0,0,R.width,R.height)}(T):function(I){var R=I.clientWidth,U=I.clientHeight;if(!R&&!U)return p;var z=g(I).getComputedStyle(I),j=function(L){for(var M={},V=0,$=["top","right","bottom","left"];V<$.length;V++){var Z=$[V],et=L["padding-"+Z];M[Z]=h(et)}return M}(z),P=j.left+j.right,N=j.top+j.bottom,D=h(z.width),C=h(z.height);if(z.boxSizing==="border-box"&&(Math.round(D+P)!==R&&(D-=c(z,"left","right")+P),Math.round(C+N)!==U&&(C-=c(z,"top","bottom")+N)),!function(L){return L===g(L).document.documentElement}(I)){var H=Math.round(D+P)-R,q=Math.round(C+N)-U;Math.abs(H)!==1&&(D-=H),Math.abs(q)!==1&&(C-=q)}return w(j.left,j.top,D,C)}(T):p}function w(T,I,R,U){return{x:T,y:I,width:R,height:U}}var S=function(){function T(I){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=w(0,0,0,0),this.target=I}return T.prototype.isActive=function(){var I=_(this.target);return this.contentRect_=I,I.width!==this.broadcastWidth||I.height!==this.broadcastHeight},T.prototype.broadcastRect=function(){var I=this.contentRect_;return this.broadcastWidth=I.width,this.broadcastHeight=I.height,I},T}(),x=function(T,I){var R,U,z,j,P,N,D,C=(U=(R=I).x,z=R.y,j=R.width,P=R.height,N=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,D=Object.create(N.prototype),y(D,{x:U,y:z,width:j,height:P,top:z,right:U+j,bottom:P+z,left:U}),D);y(this,{target:T,contentRect:C})},O=function(){function T(I,R,U){if(this.activeObservations_=[],this.observations_=new f,typeof I!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=I,this.controller_=R,this.callbackCtx_=U}return T.prototype.observe=function(I){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(I instanceof g(I).Element))throw new TypeError('parameter 1 is not of type "Element".');var R=this.observations_;R.has(I)||(R.set(I,new S(I)),this.controller_.addObserver(this),this.controller_.refresh())}},T.prototype.unobserve=function(I){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(I instanceof g(I).Element))throw new TypeError('parameter 1 is not of type "Element".');var R=this.observations_;R.has(I)&&(R.delete(I),R.size||this.controller_.removeObserver(this))}},T.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},T.prototype.gatherActive=function(){var I=this;this.clearActive(),this.observations_.forEach(function(R){R.isActive()&&I.activeObservations_.push(R)})},T.prototype.broadcastActive=function(){if(this.hasActive()){var I=this.callbackCtx_,R=this.activeObservations_.map(function(U){return new x(U.target,U.broadcastRect())});this.callback_.call(I,R,I),this.clearActive()}},T.prototype.clearActive=function(){this.activeObservations_.splice(0)},T.prototype.hasActive=function(){return this.activeObservations_.length>0},T}(),E=typeof WeakMap<"u"?new WeakMap:new f,A=function T(I){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var R=v.getInstance(),U=new O(I,R,this);E.set(this,U)};["observe","unobserve","disconnect"].forEach(function(T){A.prototype[T]=function(){var I;return(I=E.get(this))[T].apply(I,arguments)}});let k=u.ResizeObserver!==void 0?u.ResizeObserver:A},413:(i,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>w});var f=s(379),l=s.n(f),u=s(795),a=s.n(u),d=s(569),m=s.n(d),v=s(565),y=s.n(v),g=s(216),p=s.n(g),h=s(589),c=s.n(h),b=s(582),_={};_.styleTagTransform=c(),_.setAttributes=y(),_.insert=m().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=p(),l()(b.Z,_);let w=b.Z&&b.Z.locals?b.Z.locals:void 0},379:i=>{"use strict";var o=[];function s(u){for(var a=-1,d=0;d<o.length;d++)if(o[d].identifier===u){a=d;break}return a}function f(u,a){for(var d={},m=[],v=0;v<u.length;v++){var y=u[v],g=a.base?y[0]+a.base:y[0],p=d[g]||0,h="".concat(g," ").concat(p);d[g]=p+1;var c=s(h),b={css:y[1],media:y[2],sourceMap:y[3],supports:y[4],layer:y[5]};if(c!==-1)o[c].references++,o[c].updater(b);else{var _=l(b,a);a.byIndex=v,o.splice(v,0,{identifier:h,updater:_,references:1})}m.push(h)}return m}function l(u,a){var d=a.domAPI(a);return d.update(u),function(m){if(m){if(m.css===u.css&&m.media===u.media&&m.sourceMap===u.sourceMap&&m.supports===u.supports&&m.layer===u.layer)return;d.update(u=m)}else d.remove()}}i.exports=function(u,a){var d=f(u=u||[],a=a||{});return function(m){m=m||[];for(var v=0;v<d.length;v++){var y=s(d[v]);o[y].references--}for(var g=f(m,a),p=0;p<d.length;p++){var h=s(d[p]);o[h].references===0&&(o[h].updater(),o.splice(h,1))}d=g}}},569:i=>{"use strict";var o={};i.exports=function(s,f){var l=function(u){if(o[u]===void 0){var a=document.querySelector(u);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch{a=null}o[u]=a}return o[u]}(s);if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(f)}},216:i=>{"use strict";i.exports=function(o){var s=document.createElement("style");return o.setAttributes(s,o.attributes),o.insert(s,o.options),s}},565:(i,o,s)=>{"use strict";i.exports=function(f){var l=s.nc;l&&f.setAttribute("nonce",l)}},795:i=>{"use strict";i.exports=function(o){var s=o.insertStyleElement(o);return{update:function(f){(function(l,u,a){var d="";a.supports&&(d+="@supports (".concat(a.supports,") {")),a.media&&(d+="@media ".concat(a.media," {"));var m=a.layer!==void 0;m&&(d+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),d+=a.css,m&&(d+="}"),a.media&&(d+="}"),a.supports&&(d+="}");var v=a.sourceMap;v&&typeof btoa<"u"&&(d+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(v))))," */")),u.styleTagTransform(d,l,u.options)})(s,o,f)},remove:function(){(function(f){if(f.parentNode===null)return!1;f.parentNode.removeChild(f)})(s)}}}},589:i=>{"use strict";i.exports=function(o,s){if(s.styleSheet)s.styleSheet.cssText=o;else{for(;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(document.createTextNode(o))}}},607:function(i,o,s){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(o,"__esModule",{value:!0}),o.Cursor=o.default=void 0;var l=f(s(678));o.default=l.default;var u=f(s(353));o.Cursor=u.default,s(413)},353:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=function(){function f(l,u,a){this.id=l,this.name=u,this.color=a,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return f.prototype.build=function(l){var u=document.createElement(f.CONTAINER_ELEMENT_TAG);u.classList.add(f.CURSOR_CLASS),u.id="ql-cursor-".concat(this.id),u.innerHTML=l.template;var a=u.getElementsByClassName(f.SELECTION_CLASS)[0],d=u.getElementsByClassName(f.CARET_CONTAINER_CLASS)[0],m=d.getElementsByClassName(f.CARET_CLASS)[0],v=u.getElementsByClassName(f.FLAG_CLASS)[0];return v.style.backgroundColor=this.color,m.style.backgroundColor=this.color,u.getElementsByClassName(f.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(l.hideDelayMs,"ms"),this._hideSpeedMs=l.hideSpeedMs,this._positionFlag=l.positionFlag,v.style.transitionDelay=this._hideDelay,v.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=u,this._selectionEl=a,this._caretEl=d,this._flagEl=v,d.addEventListener("mouseover",this._setHoverState,{passive:!0}),this._el},f.prototype.show=function(){this._el.classList.remove(f.HIDDEN_CLASS)},f.prototype.hide=function(){this._el.classList.add(f.HIDDEN_CLASS)},f.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},f.prototype.toggleNearCursor=function(l,u){var a=this._getCoordinates(),d=a.left,m=a.right,v=a.top,y=a.bottom,g=l>=d&&l<=m&&u>=v&&u<=y;return this._caretEl.classList.toggle(f.CONTAINER_HOVER_CLASS,g),g},f.prototype.toggleFlag=function(l){var u=this;this._caretEl.classList.toggle(f.CONTAINER_HOVER_CLASS,l)||(this._flagEl.classList.add(f.NO_DELAY_CLASS),setTimeout(function(){return u._flagEl.classList.remove(f.NO_DELAY_CLASS)},this._hideSpeedMs))},f.prototype.updateCaret=function(l,u){this._caretEl.style.top="".concat(l.top,"px"),this._caretEl.style.left="".concat(l.left,"px"),this._caretEl.style.height="".concat(l.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,l,u):this._updateCaretFlag(l,u)},f.prototype.updateSelection=function(l,u){var a=this;this._clearSelection(),l=l||[],l=Array.from(l),l=this._sanitize(l),(l=this._sortByDomPosition(l)).forEach(function(d){return a._addSelection(d,u)})},f.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor,{passive:!0})},f.prototype._toggleOpenedCursor=function(l){var u=this.toggleNearCursor(l.clientX,l.clientY);this._caretEl.classList.toggle(f.CONTAINER_NO_POINTER_CLASS,u),u||document.removeEventListener("mousemove",this._toggleOpenedCursor)},f.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},f.prototype._updateCaretFlag=function(l,u){this._flagEl.style.width="";var a=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(f.FLAG_FLIPPED_CLASS),l.left>u.width-a.width&&this._flagEl.classList.add(f.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(l.left,"px"),this._flagEl.style.top="".concat(l.top,"px"),this._flagEl.style.width="".concat(Math.ceil(a.width),"px")},f.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},f.prototype._addSelection=function(l,u){var a=this._selectionBlock(l,u);this._selectionEl.appendChild(a)},f.prototype._selectionBlock=function(l,u){var a=document.createElement(f.SELECTION_ELEMENT_TAG);return a.classList.add(f.SELECTION_BLOCK_CLASS),a.style.top="".concat(l.top-u.top,"px"),a.style.left="".concat(l.left-u.left,"px"),a.style.width="".concat(l.width,"px"),a.style.height="".concat(l.height,"px"),a.style.backgroundColor=this.color,a.style.opacity="0.3",a},f.prototype._sortByDomPosition=function(l){return l.sort(function(u,a){return u.top===a.top?u.left-a.left:u.top-a.top})},f.prototype._sanitize=function(l){var u=this,a=new Set;return l.filter(function(d){if(!d.width||!d.height)return!1;var m=u._serialize(d);return!a.has(m)&&(a.add(m),!0)})},f.prototype._serialize=function(l){return["top:".concat(l.top),"right:".concat(l.right),"bottom:".concat(l.bottom),"left:".concat(l.left)].join(";")},f.CONTAINER_ELEMENT_TAG="SPAN",f.SELECTION_ELEMENT_TAG="SPAN",f.CURSOR_CLASS="ql-cursor",f.SELECTION_CLASS="ql-cursor-selections",f.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",f.CARET_CLASS="ql-cursor-caret",f.CARET_CONTAINER_CLASS="ql-cursor-caret-container",f.CONTAINER_HOVER_CLASS="hover",f.CONTAINER_NO_POINTER_CLASS="no-pointer",f.FLAG_CLASS="ql-cursor-flag",f.FLAG_FLIPPED_CLASS="flag-flipped",f.NAME_CLASS="ql-cursor-name",f.HIDDEN_CLASS="hidden",f.NO_DELAY_CLASS="no-delay",f}();o.default=s},678:function(i,o,s){"use strict";var f=this&&this.__createBinding||(Object.create?function(h,c,b,_){_===void 0&&(_=b);var w=Object.getOwnPropertyDescriptor(c,b);w&&!("get"in w?!c.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(h,_,w)}:function(h,c,b,_){_===void 0&&(_=b),h[_]=c[b]}),l=this&&this.__setModuleDefault||(Object.create?function(h,c){Object.defineProperty(h,"default",{enumerable:!0,value:c})}:function(h,c){h.default=c}),u=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var c={};if(h!=null)for(var b in h)b!=="default"&&Object.prototype.hasOwnProperty.call(h,b)&&f(c,h,b);return l(c,h),c},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(o,"__esModule",{value:!0});var d=a(s(353)),m=u(s(165)),v=a(s(338)),y=a(s(33)),g=s(895),p=function(){function h(c,b){b===void 0&&(b={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=c,this.options=this._setDefaults(b),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return h.prototype.createCursor=function(c,b,_){var w=this._cursors[c];if(!w){w=new d.default(c,b,_),this._cursors[c]=w;var S=w.build(this.options);this._container.appendChild(S)}return w},h.prototype.moveCursor=function(c,b){var _=this._cursors[c];_&&(_.range=b,this._updateCursor(_))},h.prototype.removeCursor=function(c){var b=this._cursors[c];b&&(b.remove(),delete this._cursors[c])},h.prototype.update=function(){var c=this;this.cursors().forEach(function(b){return c._updateCursor(b)})},h.prototype.clearCursors=function(){var c=this;this.cursors().forEach(function(b){return c.removeCursor(b.id)})},h.prototype.toggleFlag=function(c,b){var _=this._cursors[c];_&&_.toggleFlag(b)},h.prototype.cursors=function(){var c=this;return Object.keys(this._cursors).map(function(b){return c._cursors[b]})},h.prototype._registerSelectionChangeListeners=function(){var c=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(b){c._currentSelection=b})},h.prototype._registerTextChangeListener=function(){var c=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(b){return c._handleTextChange(b)})},h.prototype._registerDomListeners=function(){var c=this,b=this.quill.container.getElementsByClassName("ql-editor")[0];b.addEventListener("scroll",function(){return c.update()},{passive:!0}),b.addEventListener("touchstart",this._handleCursorTouch,{passive:!0})},h.prototype._handleCursorTouch=function(c){var b=this;this.cursors().forEach(function(_){_.toggleNearCursor(c.pageX,c.pageY),setTimeout(function(){return _.toggleFlag(!1)},b.options.hideDelayMs)})},h.prototype._registerResizeObserver=function(){var c=this;if(!this._isObserving){var b=this.quill.container.getElementsByClassName("ql-editor")[0],_=new y.default(function(w){if(!w[0].target.isConnected)return _.disconnect(),void(c._isObserving=!1);c.update()});_.observe(b),this._isObserving=!0}},h.prototype._updateCursor=function(c){if(this._registerResizeObserver(),!c.range)return c.hide();var b=this._indexWithinQuillBounds(c.range.index),_=this._indexWithinQuillBounds(c.range.index+c.range.length),w=this.quill.getLeaf(b),S=this.quill.getLeaf(_);if(!this._leafIsValid(w)||!this._leafIsValid(S))return c.hide();c.show();var x=this._boundsContainer.getBoundingClientRect(),O=this.quill.getBounds(_);c.updateCaret(O,x);var E=this._lineRanges(c,w,S).reduce(function(A,k){return A.concat(Array.from(m.getClientRects(k)))},[]);c.updateSelection(E,x)},h.prototype._indexWithinQuillBounds=function(c){var b=this.quill.getLength(),_=b?b-1:0;return c=Math.max(c,0),Math.min(c,_)},h.prototype._leafIsValid=function(c){return c&&c[0]&&c[0].domNode&&c[1]>=0},h.prototype._handleTextChange=function(c){var b=this;window.setTimeout(function(){b.options.transformOnTextChange&&b._transformCursors(c),b.options.selectionChangeSource&&(b._emitSelection(),b.update())})},h.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},h.prototype._setDefaults=function(c){return(c=Object.assign({},c)).template||(c.template=h.DEFAULTS.template),c.containerClass||(c.containerClass=h.DEFAULTS.containerClass),c.selectionChangeSource!==null&&(c.selectionChangeSource||(c.selectionChangeSource=h.DEFAULTS.selectionChangeSource)),c.hideDelayMs=Number.isInteger(c.hideDelayMs)?c.hideDelayMs:h.DEFAULTS.hideDelayMs,c.hideSpeedMs=Number.isInteger(c.hideSpeedMs)?c.hideSpeedMs:h.DEFAULTS.hideSpeedMs,c.transformOnTextChange=!!c.transformOnTextChange,c},h.prototype._lineRanges=function(c,b,_){var w=this.quill.getLines(c.range);return w.reduce(function(S,x,O){if(!x.children){var E=document.createRange();return E.selectNode(x.domNode),S.concat(E)}var A=O===0?b:x.path(0).pop(),k=A[0],T=A[1],I=O===w.length-1?_:x.path(x.length()-1).pop(),R=I[0],U=I[1],z=document.createRange();return k.domNode.nodeType===Node.TEXT_NODE?z.setStart(k.domNode,T):z.setStartBefore(k.domNode),R.domNode.nodeType===Node.TEXT_NODE?z.setEnd(R.domNode,U):z.setEndAfter(R.domNode),S.concat(z)},[])},h.prototype._transformCursors=function(c){var b=this;c=new g(c),this.cursors().filter(function(_){return _.range}).forEach(function(_){_.range.index=c.transformPosition(_.range.index),b._updateCursor(_)})},h.DEFAULTS={template:v.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},h}();o.default=p},338:function(i,o,s){"use strict";var f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(o,"__esModule",{value:!0});var l=f(s(353)),u=`
  <span class="`.concat(l.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(l.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(l.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(l.default.FLAG_CLASS,`">
    <small class="`).concat(l.default.NAME_CLASS,`"></small>
  </div>
`);o.default=u}},t={};function e(i){var o=t[i];if(o!==void 0)return o.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return n[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}e.n=i=>{var o=i&&i.__esModule?()=>i.default:()=>i;return e.d(o,{a:o}),o},e.d=(i,o)=>{for(var s in o)e.o(o,s)&&!e.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),e.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),e.nc=void 0;var r=e(607);return r.default})())});var cs=ps(gs()),ec=ps(ys());var lc=Object.defineProperty,cc=(n,t)=>{for(var e in t)lc(n,e,{get:t[e],enumerable:!0})},Ds="@liveblocks/core",dr="1.10.0",uc="esm",Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},fc="https://liveblocks.io/docs/errors/cross-linked",dc="https://liveblocks.io/docs/errors/dupes",ms=" ";function vs(n){console.error(n)}function gr(n,t,e){let r=Symbol.for(n),i=e?`${t||"dev"} (${e})`:t||"dev";if(!Jr[r])Jr[r]=i;else if(Jr[r]!==i){let o=[`Multiple copies of Liveblocks are being loaded in your project. This will cause issues! See ${dc+ms}`,"","Conflicts:",`- ${n} ${Jr[r]} (already loaded)`,`- ${n} ${i} (trying to load this now)`].join(`
`);vs(o)}t&&dr&&t!==dr&&vs([`Cross-linked versions of Liveblocks found, which will cause issues! See ${fc+ms}`,"","Conflicts:",`- ${Ds} is at ${dr}`,`- ${n} is at ${t}`,"","Always upgrade all Liveblocks packages to the same version number."].join(`
`))}function Ne(n,t){throw new Error(t)}function _t(n,t="Expected value to be non-nullable"){return n!=null,n}function hc(){let n,t=new Promise(e=>{n=e});if(!n)throw new Error("Should never happen");return[t,n]}function Bt(){let n=new Set,t=new Set,e=null;function r(){e=[]}function i(){if(e!==null){for(let m of e)u(m);e=null}}function o(m){return t.add(m),()=>t.delete(m)}function s(m){return n.add(m),()=>n.delete(m)}async function f(m){let v;return new Promise(y=>{v=o(g=>{(m===void 0||m(g))&&y(g)})}).finally(()=>v?.())}function l(m){e!==null?e.push(m):u(m)}function u(m){n.forEach(v=>v(m)),n.clear(),t.forEach(v=>v(m))}function a(){n.clear(),t.clear()}function d(){return n.size+t.size}return{notify:l,subscribe:o,subscribeOnce:s,clear:a,count:d,waitUntil:f,pause:r,unpause:i,observable:{subscribe:o,subscribeOnce:s,waitUntil:f}}}var pc={};cc(pc,{error:()=>Us,errorWithTitle:()=>js,warn:()=>Ie,warnWithTitle:()=>yc});var Rs="background:#0e0d12;border-radius:9999px;color:#fff;padding:3px 7px;font-family:sans-serif;font-weight:600;",gc="font-weight:600";function Ps(n){return typeof window>"u"?console[n]:(t,...e)=>console[n]("%cLiveblocks",Rs,t,...e)}var Ie=Ps("warn"),Us=Ps("error");function Ms(n){return typeof window>"u"?console[n]:(t,e,...r)=>console[n](`%cLiveblocks%c ${t}`,Rs,gc,e,...r)}var yc=Ms("warn"),js=Ms("error");function mc(n,t){if(n===t)return[0,0];let e=n.split("."),r=t.split("."),i=Math.min(e.length,r.length),o=0;for(;o<i&&e[o]===r[o];o++);let s=e.length-o,f=r.length-o;return[s,f]}function vc(n,t){let e=n.split(".");if(t<1||t>e.length+1)throw new Error("Invalid number of levels");let r=[];t>e.length&&r.push("*");for(let i=e.length-t+1;i<e.length;i++){let o=e.slice(0,i);o.length>0&&r.push(o.join(".")+".*")}return r.push(n),r}var bc=class{constructor(n){this.curr=n}get current(){return this.curr}allowPatching(n){let t=this,e=!0,r={...this.curr,patch(i){if(e){t.curr=Object.assign({},t.curr,i);for(let o of Object.entries(i)){let[s,f]=o;s!=="patch"&&(this[s]=f)}}else throw new Error("Can no longer patch stale context")}};n(r),e=!1}},_c=1,wc=class{get initialState(){let n=this.states.values()[Symbol.iterator]().next();if(n.done)throw new Error("No states defined yet");return n.value}get currentState(){if(this.currentStateOrNull===null)throw this.runningState===0?new Error("Not started yet"):new Error("Already stopped");return this.currentStateOrNull}start(){if(this.runningState!==0)throw new Error("State machine has already started");return this.runningState=1,this.currentStateOrNull=this.initialState,this.enter(null),this}stop(){if(this.runningState!==1)throw new Error("Cannot stop a state machine that hasn't started yet");this.exit(null),this.runningState=2,this.currentStateOrNull=null}constructor(n){this.id=_c++,this.runningState=0,this.currentStateOrNull=null,this.states=new Set,this.enterFns=new Map,this.cleanupStack=[],this.knownEventTypes=new Set,this.allowedTransitions=new Map,this.currentContext=new bc(n),this.eventHub={didReceiveEvent:Bt(),willTransition:Bt(),didIgnoreEvent:Bt(),willExitState:Bt(),didEnterState:Bt()},this.events={didReceiveEvent:this.eventHub.didReceiveEvent.observable,willTransition:this.eventHub.willTransition.observable,didIgnoreEvent:this.eventHub.didIgnoreEvent.observable,willExitState:this.eventHub.willExitState.observable,didEnterState:this.eventHub.didEnterState.observable}}get context(){return this.currentContext.current}addState(n){if(this.runningState!==0)throw new Error("Already started");return this.states.add(n),this}onEnter(n,t){if(this.runningState!==0)throw new Error("Already started");if(this.enterFns.has(n))throw new Error(`enter/exit function for ${n} already exists`);return this.enterFns.set(n,t),this}onEnterAsync(n,t,e,r){return this.onEnter(n,()=>{let i=new AbortController,o=i.signal,s=!1;return t(this.currentContext.current,o).then(f=>{o.aborted||(s=!0,this.transition({type:"ASYNC_OK",data:f},e))},f=>{o.aborted||(s=!0,this.transition({type:"ASYNC_ERROR",reason:f},r))}),()=>{s||i.abort()}})}getStatesMatching(n){let t=[];if(n==="*")for(let e of this.states)t.push(e);else if(n.endsWith(".*")){let e=n.slice(0,-1);for(let r of this.states)r.startsWith(e)&&t.push(r)}else{let e=n;this.states.has(e)&&t.push(e)}if(t.length===0)throw new Error(`No states match ${JSON.stringify(n)}`);return t}addTransitions(n,t){if(this.runningState!==0)throw new Error("Already started");for(let e of this.getStatesMatching(n)){let r=this.allowedTransitions.get(e);r===void 0&&(r=new Map,this.allowedTransitions.set(e,r));for(let[i,o]of Object.entries(t)){if(r.has(i))throw new Error(`Trying to set transition "${i}" on "${e}" (via "${n}"), but a transition already exists there.`);let s=o;if(this.knownEventTypes.add(i),s!==void 0){let f=typeof s=="function"?s:()=>s;r.set(i,f)}}}return this}addTimedTransition(n,t,e){return this.onEnter(n,()=>{let r=typeof t=="function"?t(this.currentContext.current):t,i=setTimeout(()=>{this.transition({type:"TIMER"},e)},r);return()=>{clearTimeout(i)}})}getTargetFn(n){return this.allowedTransitions.get(this.currentState)?.get(n)}exit(n){this.eventHub.willExitState.notify(this.currentState),this.currentContext.allowPatching(t=>{n=n??this.cleanupStack.length;for(let e=0;e<n;e++)this.cleanupStack.pop()?.(t)})}enter(n){let t=vc(this.currentState,n??this.currentState.split(".").length+1);this.currentContext.allowPatching(e=>{for(let r of t){let o=this.enterFns.get(r)?.(e);typeof o=="function"?this.cleanupStack.push(o):this.cleanupStack.push(null)}}),this.eventHub.didEnterState.notify(this.currentState)}send(n){if(!this.knownEventTypes.has(n.type))throw new Error(`Invalid event ${JSON.stringify(n.type)}`);if(this.runningState===2)return;let t=this.getTargetFn(n.type);if(t!==void 0)return this.transition(n,t);this.eventHub.didIgnoreEvent.notify(n)}transition(n,t){this.eventHub.didReceiveEvent.notify(n);let e=this.currentState,i=(typeof t=="function"?t:()=>t)(n,this.currentContext.current),o,s;if(i===null){this.eventHub.didIgnoreEvent.notify(n);return}if(typeof i=="string"?o=i:(o=i.target,s=Array.isArray(i.effect)?i.effect:[i.effect]),!this.states.has(o))throw new Error(`Invalid next state name: ${JSON.stringify(o)}`);this.eventHub.willTransition.notify({from:e,to:o});let[f,l]=mc(this.currentState,o);if(f>0&&this.exit(f),this.currentStateOrNull=o,s!==void 0){let u=s;this.currentContext.allowPatching(a=>{for(let d of u)typeof d=="function"?d(a,n):a.patch(d)})}l>0&&this.enter(l)}};function Bs(n){return n!==null&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"}function qs(n){return Object.entries(n)}function ro(n){try{return JSON.parse(n)}catch{return}}function hr(n){return JSON.parse(JSON.stringify(n))}function Ec(n){try{let t=n.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(atob(t).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch{return atob(n)}}function Wi(n){return n.filter(t=>t!=null)}function io(n){let t={...n};return Object.keys(n).forEach(e=>{let r=e;t[r]===void 0&&delete t[r]}),t}async function bs(n,t,e){let r,i=new Promise((o,s)=>{r=setTimeout(()=>{s(new Error(e))},t)});return Promise.race([n,i]).finally(()=>clearTimeout(r))}function _s(n){return n===4999||n>=4e3&&n<4100}function Oc(n){return n>=4100&&n<4200}function ws(n){return n===1013||n>=4200&&n<4300}function Ac(n){return n==="initial"||n==="disconnected"}function Fs(n){switch(n){case"connecting":return"connecting";case"connected":return"open";case"reconnecting":return"unavailable";case"disconnected":return"failed";case"initial":return"closed";default:return"closed"}}function Vs(n){let t=n.currentState;switch(t){case"@ok.connected":case"@ok.awaiting-pong":return"connected";case"@idle.initial":return"initial";case"@auth.busy":case"@auth.backoff":case"@connecting.busy":case"@connecting.backoff":case"@idle.zombie":return n.context.successCount>0?"reconnecting":"connecting";case"@idle.failed":return"disconnected";default:return Ne(t,"Unknown state")}}var Hs=[250,500,1e3,2e3,4e3,8e3,1e4],cr=Hs[0]-1,Sc=[2e3,3e4,6e4,3e5],kc=3e4,Tc=2e3,xc=1e4,Nc=1e4,on=class extends Error{constructor(n){super(n)}},Ic=class extends Error{constructor(n,t){super(n),this.code=t}};function zs(n,t=Hs){return t.find(e=>e>n)??t[t.length-1]}function Un(n){n.patch({backoffDelay:zs(n.backoffDelay)})}function Es(n){n.patch({backoffDelay:zs(n.backoffDelay,Sc)})}function Os(n){n.patch({successCount:0})}function jn(n,t){let e=n===2?Us:n===1?Ie:()=>{};return()=>{e(t)}}function As(n){let t="Connection to Liveblocks websocket server";return e=>{n instanceof Error?Ie(`${t} could not be established. ${String(n)}`):Ie(Ks(n)?`${t} closed prematurely (code: ${n.code}). Retrying in ${e.backoffDelay}ms.`:`${t} could not be established.`)}}function zi(n){return t=>{Ie(`Connection to Liveblocks websocket server closed (code: ${n.code}). Retrying in ${t.backoffDelay}ms.`)}}var Lc=jn(1,"Connection to WebSocket closed permanently. Won't retry.");function Ks(n){return!(n instanceof Error)&&n.type==="close"}function Cc(n){let t=new Date().getTime();function e(...i){Ie(`${((new Date().getTime()-t)/1e3).toFixed(2)} [FSM #${n.id}]`,...i)}let r=[n.events.didReceiveEvent.subscribe(i=>e(`Event ${i.type}`)),n.events.willTransition.subscribe(({from:i,to:o})=>e("Transitioning",i,"\u2192",o)),n.events.didIgnoreEvent.subscribe(i=>e("Ignored event",i.type,i,"(current state won't handle it)"))];return()=>{for(let i of r)i()}}function Dc(n){let t=Bt(),e=Bt(),r=Bt(),i=null,o=n.events.didEnterState.subscribe(()=>{let s=Vs(n);s!==i&&t.notify(s),i==="connected"&&s!=="connected"?r.notify():i!=="connected"&&s==="connected"&&e.notify(),i=s});return{statusDidChange:t.observable,didConnect:e.observable,didDisconnect:r.observable,unsubscribe:o}}var Zr=n=>t=>t.patch(n);function Rc(n,t){let e=Bt();e.pause();let r=Bt();function i(c,b){return()=>{let _=new Ic(c,b);r.notify(_)}}let o={successCount:0,authValue:null,socket:null,backoffDelay:cr},s=new wc(o).addState("@idle.initial").addState("@idle.failed").addState("@idle.zombie").addState("@auth.busy").addState("@auth.backoff").addState("@connecting.busy").addState("@connecting.backoff").addState("@ok.connected").addState("@ok.awaiting-pong");s.addTransitions("*",{RECONNECT:{target:"@auth.backoff",effect:[Un,Os]},DISCONNECT:"@idle.initial"}),s.onEnter("@idle.*",Os).addTransitions("@idle.*",{CONNECT:(c,b)=>b.authValue!==null?"@connecting.busy":"@auth.busy"}),s.addTransitions("@auth.backoff",{NAVIGATOR_ONLINE:{target:"@auth.busy",effect:Zr({backoffDelay:cr})}}).addTimedTransition("@auth.backoff",c=>c.backoffDelay,"@auth.busy").onEnterAsync("@auth.busy",()=>bs(n.authenticate(),xc,"Timed out during auth"),c=>({target:"@connecting.busy",effect:Zr({authValue:c.data,backoffDelay:cr})}),c=>c.reason instanceof on?{target:"@idle.failed",effect:[jn(2,c.reason.message),i(c.reason.message,-1)]}:{target:"@auth.backoff",effect:[Un,jn(2,`Authentication failed: ${c.reason instanceof Error?c.reason.message:String(c.reason)}`)]});let f=c=>s.send({type:"EXPLICIT_SOCKET_ERROR",event:c}),l=c=>s.send({type:"EXPLICIT_SOCKET_CLOSE",event:c}),u=c=>c.data==="pong"?s.send({type:"PONG"}):e.notify(c);function a(c){c&&(c.removeEventListener("error",f),c.removeEventListener("close",l),c.removeEventListener("message",u),c.close())}s.addTransitions("@connecting.backoff",{NAVIGATOR_ONLINE:{target:"@connecting.busy",effect:Zr({backoffDelay:cr})}}).addTimedTransition("@connecting.backoff",c=>c.backoffDelay,"@connecting.busy").onEnterAsync("@connecting.busy",async(c,b)=>{let _=null,w=null,S=new Promise((x,O)=>{if(c.authValue===null)throw new Error("No auth authValue");let E=n.createSocket(c.authValue);w=E;function A(R){_=R,E.removeEventListener("message",u),O(R)}let[k,T]=hc();t.waitForActorId||T();function I(R){ro(R.data)?.type===104&&T()}E.addEventListener("message",u),t.waitForActorId&&E.addEventListener("message",I),E.addEventListener("error",A),E.addEventListener("close",A),E.addEventListener("open",()=>{E.addEventListener("error",f),E.addEventListener("close",l);let R=()=>{E.removeEventListener("error",A),E.removeEventListener("close",A),E.removeEventListener("message",I)};k.then(()=>{x([E,R])})})});return bs(S,Nc,"Timed out during websocket connection").then(([x,O])=>{if(O(),b.aborted)throw new Error("Aborted");if(_)throw _;return x}).catch(x=>{throw a(w),x})},c=>({target:"@ok.connected",effect:Zr({socket:c.data,backoffDelay:cr})}),c=>{let b=c.reason;if(b instanceof on)return{target:"@idle.failed",effect:[jn(2,b.message),i(b.message,-1)]};if(Ks(b)){if(b.code===4109)return"@auth.busy";if(ws(b.code))return{target:"@connecting.backoff",effect:[Es,As(b)]};if(_s(b.code))return{target:"@idle.failed",effect:[jn(2,b.reason),i(b.reason,b.code)]}}return{target:"@auth.backoff",effect:[Un,As(b)]}});let d={target:"@ok.awaiting-pong",effect:c=>{c.socket?.send("ping")}},m=()=>(typeof document<"u"?document:void 0)?.visibilityState==="hidden"&&n.canZombie()?"@idle.zombie":d;if(s.addTimedTransition("@ok.connected",kc,m).addTransitions("@ok.connected",{NAVIGATOR_OFFLINE:m,WINDOW_GOT_FOCUS:d}),s.addTransitions("@idle.zombie",{WINDOW_GOT_FOCUS:"@connecting.backoff"}),s.onEnter("@ok.*",c=>{c.patch({successCount:c.successCount+1});let b=setTimeout(e.unpause,0);return _=>{a(_.socket),_.patch({socket:null}),clearTimeout(b),e.pause()}}).addTransitions("@ok.awaiting-pong",{PONG:"@ok.connected"}).addTimedTransition("@ok.awaiting-pong",Tc,{target:"@connecting.busy",effect:jn(1,"Received no pong from server, assume implicit connection loss.")}).addTransitions("@ok.*",{EXPLICIT_SOCKET_ERROR:(c,b)=>b.socket?.readyState===1?null:{target:"@connecting.backoff",effect:Un},EXPLICIT_SOCKET_CLOSE:c=>_s(c.event.code)?{target:"@idle.failed",effect:[Lc,i(c.event.reason,c.event.code)]}:Oc(c.event.code)?c.event.code===4109?"@auth.busy":{target:"@auth.backoff",effect:[Un,zi(c.event)]}:ws(c.event.code)?{target:"@connecting.backoff",effect:[Es,zi(c.event)]}:{target:"@connecting.backoff",effect:[Un,zi(c.event)]}}),typeof document<"u"){let c=typeof document<"u"?document:void 0,b=typeof window<"u"?window:void 0,_=b??c;s.onEnter("*",w=>{function S(){s.send({type:"NAVIGATOR_OFFLINE"})}function x(){s.send({type:"NAVIGATOR_ONLINE"})}function O(){c?.visibilityState==="visible"&&s.send({type:"WINDOW_GOT_FOCUS"})}return b?.addEventListener("online",x),b?.addEventListener("offline",S),_?.addEventListener("visibilitychange",O),()=>{_?.removeEventListener("visibilitychange",O),b?.removeEventListener("online",x),b?.removeEventListener("offline",S),a(w.socket)}})}let v=[],{statusDidChange:y,didConnect:g,didDisconnect:p,unsubscribe:h}=Dc(s);return v.push(h),t.enableDebugLogging&&v.push(Cc(s)),s.start(),{machine:s,cleanups:v,events:{statusDidChange:y,didConnect:g,didDisconnect:p,onMessage:e.observable,onLiveblocksError:r.observable}}}var Pc=class{constructor(n,t=!1,e=!0){let{machine:r,events:i,cleanups:o}=Rc(n,{waitForActorId:e,enableDebugLogging:t});this.machine=r,this.events=i,this.cleanups=o}getLegacyStatus(){return Fs(this.getStatus())}getStatus(){try{return Vs(this.machine)}catch{return"initial"}}get authValue(){return this.machine.context.authValue}connect(){this.machine.send({type:"CONNECT"})}reconnect(){this.machine.send({type:"RECONNECT"})}disconnect(){this.machine.send({type:"DISCONNECT"})}destroy(){this.machine.stop();let n;for(;n=this.cleanups.pop();)n()}send(n){let t=this.machine.context?.socket;t===null?Ie("Cannot send: not connected yet",n):t.readyState!==1?Ie("Cannot send: WebSocket no longer open",n):t.send(n)}_privateSendMachineEvent(n){this.machine.send(n)}};function Yi(n){return n.includes("room:write")}function $s(n){return n.includes("comments:write")||n.includes("room:write")}function Uc(n){return Bs(n)&&(n.k==="acc"||n.k==="id"||n.k==="sec-legacy")}function Ss(n){let t=n.split(".");if(t.length!==3)throw new Error("Authentication error: invalid JWT token");let e=ro(Ec(t[1]));if(!(e&&Uc(e)))throw new Error("Authentication error: expected a valid token but did not get one. Hint: if you are using a callback, ensure the room is passed when creating the token. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientCallback");return{raw:n,parsed:e}}function Mc(n){let t=jc(n),e=new Set,r=[],i=[],o=new Map;function s(){e.clear(),r.length=0,i.length=0,o.clear()}function f(m,v){return m==="comments:read"?v.includes("comments:read")||v.includes("comments:write")||v.includes("room:read")||v.includes("room:write"):m==="room:read"?v.includes("room:read")||v.includes("room:write"):!1}function l(m){let v=Math.ceil(Date.now()/1e3);for(let y=r.length-1;y>=0;y--){let g=r[y];if(i[y]<=v){r.splice(y,1),i.splice(y,1);continue}if(g.parsed.k==="id")return g;if(g.parsed.k==="acc"){if(!m.roomId&&Object.entries(g.parsed.perms).length===0)return g;for(let[h,c]of Object.entries(g.parsed.perms))if(m.roomId){if(h.includes("*")&&m.roomId.startsWith(h.replace("*",""))||m.roomId===h&&f(m.requestedScope,c))return g}else if(h.includes("*")&&f(m.requestedScope,c))return g}}}async function u(m){let v=n.polyfills?.fetch??(typeof window>"u"?void 0:window.fetch);if(t.type==="private"){if(v===void 0)throw new on("To use Liveblocks client in a non-DOM environment with a url as auth endpoint, you need to provide a fetch polyfill.");let y=await Bc(v,t.url,{room:m.roomId}),g=Ss(y.token);if(a(g,m),e.has(g.raw))throw new on("The same Liveblocks auth token was issued from the backend before. Caching Liveblocks tokens is not supported.");return g}if(t.type==="custom"){let y=await t.callback(m.roomId);if(y&&typeof y=="object"){if(typeof y.token=="string"){let g=Ss(y.token);return a(g,m),g}else if(typeof y.error=="string"){let g=`Authentication failed: ${"reason"in y&&typeof y.reason=="string"?y.reason:"Forbidden"}`;throw y.error==="forbidden"?new on(g):new Error(g)}}throw new Error('Your authentication callback function should return a token, but it did not. Hint: the return value should look like: { token: "..." }')}throw new Error("Unexpected authentication type. Must be private or custom.")}function a(m,v){if(!v.roomId&&m.parsed.k==="acc"){if(Object.entries(m.parsed.perms).length===0)return;for(let[y,g]of Object.entries(m.parsed.perms))if(y.includes("*")&&f(v.requestedScope,g))return;throw new on("The issued access token doesn't grant enough permissions. Please follow the instructions at https://liveblocks.io/docs/errors/liveblocks-client/access-tokens-not-enough-permissions")}}async function d(m){if(t.type==="public")return{type:"public",publicApiKey:t.publicApiKey};let v=l(m);if(v!==void 0)return{type:"secret",token:v};let y;m.roomId?(y=o.get(m.roomId),y===void 0&&(y=u(m),o.set(m.roomId,y))):(y=o.get("liveblocks-user-token"),y===void 0&&(y=u(m),o.set("liveblocks-user-token",y)));try{let g=await y,h=Math.floor(Date.now()/1e3)+(g.parsed.exp-g.parsed.iat)-30;return e.add(g.raw),g.parsed.k!=="sec-legacy"&&(r.push(g),i.push(h)),{type:"secret",token:g}}finally{m.roomId?o.delete(m.roomId):o.delete("liveblocks-user-token")}}return{reset:s,getAuthValue:d}}function jc(n){let{publicApiKey:t,authEndpoint:e}=n;if(e!==void 0&&t!==void 0)throw new Error("You cannot simultaneously use `publicApiKey` and `authEndpoint` options. Please pick one and leave the other option unspecified. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient");if(typeof t=="string"){if(t.startsWith("sk_"))throw new Error("Invalid `publicApiKey` option. The value you passed is a secret key, which should not be used from the client. Please only ever pass a public key here. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");if(!t.startsWith("pk_"))throw new Error("Invalid key. Please use the public key format: pk_<public key>. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");return{type:"public",publicApiKey:t}}if(typeof e=="string")return{type:"private",url:e};if(typeof e=="function")return{type:"custom",callback:e};throw e!==void 0?new Error("The `authEndpoint` option must be a string or a function. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientAuthEndpoint"):new Error("Invalid Liveblocks client options. Please provide either a `publicApiKey` or `authEndpoint` option. They cannot both be empty. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient")}async function Bc(n,t,e){let r=await n(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let s=`${(await r.text()).trim()||"reason not provided in auth response"} (${r.status} returned by POST ${t})`;throw r.status===401||r.status===403?new on(`Unauthorized: ${s}`):new Error(`Failed to authenticate: ${s}`)}let i;try{i=await r.json()}catch(s){throw new Error(`Expected a JSON response when doing a POST request on "${t}". ${String(s)}`)}if(!Bs(i)||typeof i.token!="string")throw new Error(`Expected a JSON response of the form \`{ token: "..." }\` when doing a POST request on "${t}", but got ${JSON.stringify(i)}`);let{token:o}=i;return{token:o}}var qc="https://api.liveblocks.io",ei=Symbol();var Fc=Bt(),Lh=Fc.observable;var Ch=Date.now();function Ji(n,...t){if(typeof n!="object"||n===null||Array.isArray(n))return JSON.stringify(n,...t);let e=Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{});return JSON.stringify(e,...t)}var Vc=50,Hc=100,Ki=()=>{},zc=class{constructor(n){this.resolve=Ki,this.reject=Ki,this.promise=new Promise(Ki),this.args=n}},oo=class{constructor(n,t){this.queue=[],this.error=!1,this.callback=n,this.size=t?.size??Vc,this.delay=t?.delay??Hc}clearDelayTimeout(){this.delayTimeoutId!==void 0&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=void 0)}schedule(){this.queue.length===this.size?this.flush():this.queue.length===1&&(this.clearDelayTimeout(),this.delayTimeoutId=setTimeout(()=>void this.flush(),this.delay))}async flush(){if(this.queue.length===0)return;let n=this.queue.splice(0),t=n.map(e=>e.args);try{let e=await this.callback(t);this.error=!1,n.forEach((r,i)=>{let o=e?.[i];o instanceof Error?r.reject(o):o!==void 0?r.resolve(o):Array.isArray(e)?r.reject(new Error(`Batch callback must return an array of the same length as the number of calls in the batch. Expected ${n.length}, but got ${e.length}.`)):r.reject(new Error("Batch callback must return an array."))})}catch(e){this.error=!0,n.forEach(r=>{r.reject(e)})}}get(...n){let t=this.queue.find(r=>Ji(r.args)===Ji(n));if(t)return t.promise;let e=new zc(n);return e.promise=new Promise((r,i)=>{e.resolve=r,e.reject=i}),this.queue.push(e),this.schedule(),e.promise}clear(){this.queue=[],this.error=!1,this.clearDelayTimeout()}};function ks(n,t){let e=new oo(n,t),r=new Map,i=Bt();function o(u){return Ji(u)}function s(u,a){a?r.set(u,a):r.delete(u),i.notify(a)}async function f(...u){let a=o(u);if(!r.has(a))try{s(a,{isLoading:!0});let d=await e.get(...u);s(a,{isLoading:!1,data:d})}catch(d){s(a,{isLoading:!1,error:d})}}function l(...u){let a=o(u);return r.get(a)}return{...i,get:f,getState:l}}function Gs(n){let t=n,e=new Set;function r(){return t}function i(s){let f=s(t);if(t!==f){t=f;for(let l of e)l(t)}}function o(s){return e.add(s),s(t),()=>{e.delete(s)}}return{get:r,set:i,subscribe:o}}function Zi(n){let t=n.editedAt?new Date(n.editedAt):void 0,e=new Date(n.createdAt),r=n.reactions.map(i=>({...i,createdAt:new Date(i.createdAt)}));if(n.body)return{...n,reactions:r,createdAt:e,editedAt:t};{let i=new Date(n.deletedAt);return{...n,reactions:r,createdAt:e,editedAt:t,deletedAt:i}}}function ti(n){let t=n.updatedAt?new Date(n.updatedAt):void 0,e=new Date(n.createdAt),r=n.comments.map(i=>Zi(i));return{...n,createdAt:e,updatedAt:t,comments:r}}function Kc(n){return{...n,createdAt:new Date(n.createdAt)}}function Xi(n){let t=new Date(n.notifiedAt),e=n.readAt?new Date(n.readAt):null;return{...n,notifiedAt:t,readAt:e}}function Ws(n){let t=new Date(n.deletedAt);return{...n,deletedAt:t}}function Ys(n){let t=new Date(n.deletedAt);return{...n,deletedAt:t}}function $c(n){let t=new URLSearchParams;for(let[e,r]of Object.entries(n))r!=null&&t.set(e,r.toString());return t}function Js(n,t,e){let r=new URL(t,n);return e!==void 0&&(r.search=(e instanceof URLSearchParams?e:$c(e)).toString()),r.toString()}var Gc=50;function Wc({baseUrl:n,authManager:t,currentUserIdStore:e,fetcher:r}){async function i(d,m,v){let y=await t.getAuthValue({requestedScope:"comments:read"});if(y.type==="secret"&&y.token.parsed.k==="acc"){let c=y.token.parsed.uid;e.set(()=>c)}let g=Js(n,`/v2/c${d}`,v),p=await r(g.toString(),{...m,headers:{...m?.headers,Authorization:`Bearer ${no(y)}`}});if(!p.ok&&p.status>=400&&p.status<600){let c;try{let b=await p.json();c=new ni(b.message,p.status,b)}catch{c=new ni(p.statusText,p.status)}throw c}let h;try{h=await p.json()}catch{h={}}return h}async function o(d){let m=await i("/inbox-notifications",void 0,{limit:d?.limit,since:d?.since?.toISOString()});return{threads:m.threads.map(v=>ti(v)),inboxNotifications:m.inboxNotifications.map(v=>Xi(v)),deletedThreads:m.deletedThreads.map(v=>Ws(v)),deletedInboxNotifications:m.deletedInboxNotifications.map(v=>Ys(v)),meta:{requestedAt:new Date(m.meta.requestedAt)}}}async function s(){let{count:d}=await i("/inbox-notifications/count");return d}async function f(){await i("/inbox-notifications/read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:"all"})})}async function l(d){await i("/inbox-notifications/read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:d})})}let u=new oo(async d=>{let m=d.flat();return await l(m),m},{delay:Gc});async function a(d){await u.get(d)}return{getInboxNotifications:o,getUnreadInboxNotificationsCount:s,markAllInboxNotificationsAsRead:f,markInboxNotificationAsRead:a}}var _e=32,sn=126,Yc=sn-_e+1,so=ao(0),ri=ao(1),Jc=so+ao(-1);function ao(n){let t=_e+(n<0?Yc+n:n);if(t<_e||t>sn)throw new Error(`Invalid n value: ${n}`);return String.fromCharCode(t)}function Ke(n,t){return n!==void 0&&t!==void 0?Qc(n,t):n!==void 0?Xc(n):t!==void 0?Zc(t):ri}function Zc(n){let t=n.length-1;for(let e=0;e<=t;e++){let r=n.charCodeAt(e);if(!(r<=_e))return e===t?r===_e+1?n.substring(0,e)+Jc:n.substring(0,e)+String.fromCharCode(r-1):n.substring(0,e+1)}return ri}function Xc(n){for(let t=0;t<=n.length-1;t++){let e=n.charCodeAt(t);if(!(e>=sn))return n.substring(0,t)+String.fromCharCode(e+1)}return n+ri}function Qc(n,t){if(n<t)return Qi(n,t);if(n>t)return Qi(t,n);throw new Error("Cannot compute value between two equal positions")}function Qi(n,t){let e=0,r=n.length,i=t.length;for(;;){let o=e<r?n.charCodeAt(e):_e,s=e<i?t.charCodeAt(e):sn;if(o===s){e++;continue}if(s-o===1){let f=e+1,l=n.substring(0,f);l.length<f&&(l+=so.repeat(f-l.length));let u=n.substring(f);return l+Qi(u,"")}else return tu(n,e)+String.fromCharCode(s+o>>1)}}function tu(n,t){return t<n.length?n.substring(0,t):n+so.repeat(t-n.length)}var eu=_e+1;function nu(n){if(n==="")return!1;let t=n.length-1,e=n.charCodeAt(t);if(e<eu||e>sn)return!1;for(let r=0;r<t;r++){let i=n.charCodeAt(r);if(i<_e||i>sn)return!1}return!0}function ru(n){let t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);t.push(r<_e?_e:r>sn?sn:r)}for(;t.length>0&&t[t.length-1]===_e;)t.length--;return t.length>0?String.fromCharCode(...t):ri}function pr(n){return nu(n)?n:ru(n)}function iu(n){return n.type===5&&n.id==="ACK"}function Ts(n,t,e=pr(t)){return Object.freeze({type:"HasParent",node:n,key:t,pos:e})}var xs=Object.freeze({type:"NoParent"});function ou(n,t=pr(n)){return Object.freeze({type:"Orphaned",oldKey:n,oldPos:t})}var ii=class{constructor(){this._parent=xs}_getParentKeyOrThrow(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":throw new Error("Parent key is missing");case"Orphaned":return this.parent.oldKey;default:return Ne(this.parent,"Unknown state")}}get _parentPos(){switch(this.parent.type){case"HasParent":return this.parent.pos;case"NoParent":throw new Error("Parent key is missing");case"Orphaned":return this.parent.oldPos;default:return Ne(this.parent,"Unknown state")}}get _pool(){return this.__pool}get roomId(){return this.__pool?this.__pool.roomId:null}get _id(){return this.__id}get parent(){return this._parent}get _parentKey(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":return null;case"Orphaned":return this.parent.oldKey;default:return Ne(this.parent,"Unknown state")}}_apply(n,t){switch(n.type){case 5:return this.parent.type==="HasParent"?this.parent.node._detachChild(this):{modified:!1}}return{modified:!1}}_setParentLink(n,t){switch(this.parent.type){case"HasParent":if(this.parent.node!==n)throw new Error("Cannot set parent: node already has a parent");this._parent=Ts(n,t);return;case"Orphaned":case"NoParent":{this._parent=Ts(n,t);return}default:return Ne(this.parent,"Unknown state")}}_attach(n,t){if(this.__id||this.__pool)throw new Error("Cannot attach node: already attached");t.addNode(n,this),this.__id=n,this.__pool=t}_detach(){switch(this.__pool&&this.__id&&this.__pool.deleteNode(this.__id),this.parent.type){case"HasParent":{this._parent=ou(this.parent.key,this.parent.pos);break}case"NoParent":{this._parent=xs;break}case"Orphaned":break;default:Ne(this.parent,"Unknown state")}this.__pool=void 0}invalidate(){(this._cachedImmutable!==void 0||this._cachedTreeNode!==void 0)&&(this._cachedImmutable=void 0,this._cachedTreeNode=void 0,this.parent.type==="HasParent"&&this.parent.node.invalidate())}toTreeNode(n){return(this._cachedTreeNode===void 0||this._cachedTreeNodeKey!==n)&&(this._cachedTreeNodeKey=n,this._cachedTreeNode=this._toTreeNode(n)),this._cachedTreeNode}toImmutable(){return this._cachedImmutable===void 0&&(this._cachedImmutable=this._toImmutable()),this._cachedImmutable}};function su(n){return n.type===0&&!au(n)}function au(n){return n.parentId!==void 0&&n.parentKey!==void 0}function oi(n=7){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789,./;[]~!@#$%&*()_+=-",e=t.length;return Array.from({length:n},()=>t.charAt(Math.floor(Math.random()*e))).join("")}var bn=class Zs extends ii{constructor(t){super(),this._data=t}get data(){return this._data}static _deserialize([t,e],r,i){let o=new Zs(e.data);return o._attach(t,i),o}_toOps(t,e,r){if(this._id===void 0)throw new Error("Cannot serialize register if parentId or parentKey is undefined");return[{type:8,opId:r?.generateOpId(),id:this._id,parentId:t,parentKey:e,data:this.data}]}_serialize(){if(this.parent.type!=="HasParent")throw new Error("Cannot serialize LiveRegister if parent is missing");return{type:3,parentId:_t(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key,data:this.data}}_attachChild(t){throw new Error("Method not implemented.")}_detachChild(t){throw new Error("Method not implemented.")}_apply(t,e){return super._apply(t,e)}_toTreeNode(t){return{type:"Json",id:this._id??oi(),key:t,payload:this._data}}_toImmutable(){return this._data}clone(){return hr(this.data)}};function lu(n,t){let e=n._parentPos,r=t._parentPos;return e===r?0:e<r?-1:1}var _n=class to extends ii{constructor(t=[]){super(),this._items=[],this._implicitlyDeletedItems=new WeakSet,this._unacknowledgedSets=new Map;let e;for(let r of t){let i=Ke(e),o=qn(r);o._setParentLink(this,i),this._items.push(o),e=i}}static _deserialize([t],e,r){let i=new to;i._attach(t,r);let o=e.get(t);if(o===void 0)return i;for(let[s,f]of o){let l=ta([s,f],e,r);l._setParentLink(i,f.parentKey),i._insertAndSort(l)}return i}_toOps(t,e,r){if(this._id===void 0)throw new Error("Cannot serialize item is not attached");let i=[],o={id:this._id,opId:r?.generateOpId(),type:2,parentId:t,parentKey:e};i.push(o);for(let s of this._items){let f=s._getParentKeyOrThrow(),l=Qr(s._toOps(this._id,f,r),void 0),u=l[0].opId;u!==void 0&&this._unacknowledgedSets.set(f,u),i.push(...l)}return i}_insertAndSort(t){this._items.push(t),this._sortItems()}_sortItems(){this._items.sort(lu),this.invalidate()}_indexOfPosition(t){return this._items.findIndex(e=>e._getParentKeyOrThrow()===t)}_attach(t,e){super._attach(t,e);for(let r of this._items)r._attach(e.generateId(),e)}_detach(){super._detach();for(let t of this._items)t._detach()}_applySetRemote(t){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let{id:e,parentKey:r}=t,i=fr(t);i._attach(e,this._pool),i._setParentLink(this,r);let o=t.deletedId,s=this._indexOfPosition(r);if(s!==-1){let f=this._items[s];if(f._id===o)return f._detach(),this._items[s]=i,{modified:Ft(this,[Mn(s,i)]),reverse:[]};{this._implicitlyDeletedItems.add(f),this._items[s]=i;let l=[Mn(s,i)],u=this._detachItemAssociatedToSetOperation(t.deletedId);return u&&l.push(u),{modified:Ft(this,l),reverse:[]}}}else{let f=[],l=this._detachItemAssociatedToSetOperation(t.deletedId);return l&&f.push(l),this._insertAndSort(i),f.push(xe(this._indexOfPosition(r),i)),{reverse:[],modified:Ft(this,f)}}}_applySetAck(t){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let e=[],r=this._detachItemAssociatedToSetOperation(t.deletedId);r&&e.push(r);let i=this._unacknowledgedSets.get(t.parentKey);if(i!==void 0){if(i!==t.opId)return e.length===0?{modified:!1}:{modified:Ft(this,e),reverse:[]};this._unacknowledgedSets.delete(t.parentKey)}let o=this._indexOfPosition(t.parentKey),s=this._items.find(f=>f._id===t.id);if(s!==void 0){if(s._parentKey===t.parentKey)return{modified:e.length>0?Ft(this,e):!1,reverse:[]};o!==-1&&(this._implicitlyDeletedItems.add(this._items[o]),this._items.splice(o,1),e.push(Xr(o)));let f=this._items.indexOf(s);s._setParentLink(this,t.parentKey),this._sortItems();let l=this._items.indexOf(s);return l!==f&&e.push(mn(f,l,s)),{modified:e.length>0?Ft(this,e):!1,reverse:[]}}else{let f=this._pool.getNode(t.id);if(f&&this._implicitlyDeletedItems.has(f)){f._setParentLink(this,t.parentKey),this._implicitlyDeletedItems.delete(f),this._insertAndSort(f);let l=this._items.indexOf(f);return{modified:Ft(this,[o===-1?xe(l,f):Mn(l,f),...e]),reverse:[]}}else{o!==-1&&this._items.splice(o,1);let{newItem:l,newIndex:u}=this._createAttachItemAndSort(t,t.parentKey);return{modified:Ft(this,[o===-1?xe(u,l):Mn(u,l),...e]),reverse:[]}}}}_detachItemAssociatedToSetOperation(t){if(t===void 0||this._pool===void 0)return null;let e=this._pool.getNode(t);if(e===void 0)return null;let r=this._detachChild(e);return r.modified===!1?null:r.modified.updates[0]}_applyRemoteInsert(t){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let e=pr(t.parentKey),r=this._indexOfPosition(e);r!==-1&&this._shiftItemPosition(r,e);let{newItem:i,newIndex:o}=this._createAttachItemAndSort(t,e);return{modified:Ft(this,[xe(o,i)]),reverse:[]}}_applyInsertAck(t){let e=this._items.find(o=>o._id===t.id),r=pr(t.parentKey),i=this._indexOfPosition(r);if(e){if(e._parentKey===r)return{modified:!1};{let o=this._items.indexOf(e);i!==-1&&this._shiftItemPosition(i,r),e._setParentLink(this,r),this._sortItems();let s=this._indexOfPosition(r);return s===o?{modified:!1}:{modified:Ft(this,[mn(o,s,e)]),reverse:[]}}}else{let o=_t(this._pool).getNode(t.id);if(o&&this._implicitlyDeletedItems.has(o)){o._setParentLink(this,r),this._implicitlyDeletedItems.delete(o),this._insertAndSort(o);let s=this._indexOfPosition(r);return{modified:Ft(this,[xe(s,o)]),reverse:[]}}else{i!==-1&&this._shiftItemPosition(i,r);let{newItem:s,newIndex:f}=this._createAttachItemAndSort(t,r);return{modified:Ft(this,[xe(f,s)]),reverse:[]}}}}_applyInsertUndoRedo(t){let{id:e,parentKey:r}=t,i=fr(t);if(this._pool?.getNode(e)!==void 0)return{modified:!1};i._attach(e,_t(this._pool)),i._setParentLink(this,r);let o=this._indexOfPosition(r),s=r;if(o!==-1){let l=this._items[o]?._parentPos,u=this._items[o+1]?._parentPos;s=Ke(l,u),i._setParentLink(this,s)}this._insertAndSort(i);let f=this._indexOfPosition(s);return{modified:Ft(this,[xe(f,i)]),reverse:[{type:5,id:e}]}}_applySetUndoRedo(t){let{id:e,parentKey:r}=t,i=fr(t);if(this._pool?.getNode(e)!==void 0)return{modified:!1};this._unacknowledgedSets.set(r,_t(t.opId));let o=this._indexOfPosition(r);i._attach(e,_t(this._pool)),i._setParentLink(this,r);let s=r;if(o!==-1){let f=this._items[o];f._detach(),this._items[o]=i;let l=Qr(f._toOps(_t(this._id),r,this._pool),t.id),u=[Mn(o,i)],a=this._detachItemAssociatedToSetOperation(t.deletedId);return a&&u.push(a),{modified:Ft(this,u),reverse:l}}else{this._insertAndSort(i),this._detachItemAssociatedToSetOperation(t.deletedId);let f=this._indexOfPosition(s);return{reverse:[{type:5,id:e}],modified:Ft(this,[xe(f,i)])}}}_attachChild(t,e){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let r;return t.intent==="set"?e===1?r=this._applySetRemote(t):e===2?r=this._applySetAck(t):r=this._applySetUndoRedo(t):e===1?r=this._applyRemoteInsert(t):e===2?r=this._applyInsertAck(t):r=this._applyInsertUndoRedo(t),r.modified!==!1&&this.invalidate(),r}_detachChild(t){if(t){let e=_t(t._parentKey),r=t._toOps(_t(this._id),e,this._pool),i=this._items.indexOf(t);return i===-1?{modified:!1}:(this._items.splice(i,1),this.invalidate(),t._detach(),{modified:Ft(this,[Xr(i)]),reverse:r})}return{modified:!1}}_applySetChildKeyRemote(t,e){if(this._implicitlyDeletedItems.has(e)){this._implicitlyDeletedItems.delete(e),e._setParentLink(this,t),this._insertAndSort(e);let o=this._items.indexOf(e);return{modified:Ft(this,[xe(o,e)]),reverse:[]}}let r=e._parentKey;if(t===r)return{modified:!1};let i=this._indexOfPosition(t);if(i===-1){let o=this._items.indexOf(e);e._setParentLink(this,t),this._sortItems();let s=this._items.indexOf(e);return s===o?{modified:!1}:{modified:Ft(this,[mn(o,s,e)]),reverse:[]}}else{this._items[i]._setParentLink(this,Ke(t,this._items[i+1]?._parentPos));let o=this._items.indexOf(e);e._setParentLink(this,t),this._sortItems();let s=this._items.indexOf(e);return s===o?{modified:!1}:{modified:Ft(this,[mn(o,s,e)]),reverse:[]}}}_applySetChildKeyAck(t,e){let r=_t(e._parentKey);if(this._implicitlyDeletedItems.has(e)){let i=this._indexOfPosition(t);return this._implicitlyDeletedItems.delete(e),i!==-1&&this._items[i]._setParentLink(this,Ke(t,this._items[i+1]?._parentPos)),e._setParentLink(this,t),this._insertAndSort(e),{modified:!1}}else{if(t===r)return{modified:!1};let i=this._items.indexOf(e),o=this._indexOfPosition(t);o!==-1&&this._items[o]._setParentLink(this,Ke(t,this._items[o+1]?._parentPos)),e._setParentLink(this,t),this._sortItems();let s=this._items.indexOf(e);return i===s?{modified:!1}:{modified:Ft(this,[mn(i,s,e)]),reverse:[]}}}_applySetChildKeyUndoRedo(t,e){let r=_t(e._parentKey),i=this._items.indexOf(e),o=this._indexOfPosition(t);o!==-1&&this._items[o]._setParentLink(this,Ke(t,this._items[o+1]?._parentPos)),e._setParentLink(this,t),this._sortItems();let s=this._items.indexOf(e);return i===s?{modified:!1}:{modified:Ft(this,[mn(i,s,e)]),reverse:[{type:1,id:_t(e._id),parentKey:r}]}}_setChildKey(t,e,r){return r===1?this._applySetChildKeyRemote(t,e):r===2?this._applySetChildKeyAck(t,e):this._applySetChildKeyUndoRedo(t,e)}_apply(t,e){return super._apply(t,e)}_serialize(){if(this.parent.type!=="HasParent")throw new Error("Cannot serialize LiveList if parent is missing");return{type:1,parentId:_t(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get length(){return this._items.length}push(t){return this._pool?.assertStorageIsWritable(),this.insert(t,this.length)}insert(t,e){if(this._pool?.assertStorageIsWritable(),e<0||e>this._items.length)throw new Error(`Cannot insert list item at index "${e}". index should be between 0 and ${this._items.length}`);let r=this._items[e-1]?this._items[e-1]._parentPos:void 0,i=this._items[e]?this._items[e]._parentPos:void 0,o=Ke(r,i),s=qn(t);if(s._setParentLink(this,o),this._insertAndSort(s),this._pool&&this._id){let f=this._pool.generateId();s._attach(f,this._pool),this._pool.dispatch(s._toOps(this._id,o,this._pool),[{type:5,id:f}],new Map([[this._id,Ft(this,[xe(e,s)])]]))}}move(t,e){if(this._pool?.assertStorageIsWritable(),e<0)throw new Error("targetIndex cannot be less than 0");if(e>=this._items.length)throw new Error("targetIndex cannot be greater or equal than the list length");if(t<0)throw new Error("index cannot be less than 0");if(t>=this._items.length)throw new Error("index cannot be greater or equal than the list length");let r=null,i=null;t<e?(i=e===this._items.length-1?void 0:this._items[e+1]._parentPos,r=this._items[e]._parentPos):(i=this._items[e]._parentPos,r=e===0?void 0:this._items[e-1]._parentPos);let o=Ke(r,i),s=this._items[t],f=s._getParentKeyOrThrow();if(s._setParentLink(this,o),this._sortItems(),this._pool&&this._id){let l=new Map([[this._id,Ft(this,[mn(t,e,s)])]]);this._pool.dispatch([{type:1,id:_t(s._id),opId:this._pool.generateOpId(),parentKey:o}],[{type:1,id:_t(s._id),parentKey:f}],l)}}delete(t){if(this._pool?.assertStorageIsWritable(),t<0||t>=this._items.length)throw new Error(`Cannot delete list item at index "${t}". index should be between 0 and ${this._items.length-1}`);let e=this._items[t];if(e._detach(),this._items.splice(t,1),this.invalidate(),this._pool){let r=e._id;if(r){let i=new Map;i.set(_t(this._id),Ft(this,[Xr(t)])),this._pool.dispatch([{id:r,opId:this._pool.generateOpId(),type:5}],e._toOps(_t(this._id),e._getParentKeyOrThrow()),i)}}}clear(){if(this._pool?.assertStorageIsWritable(),this._pool){let t=[],e=[],r=[];for(let o of this._items){o._detach();let s=o._id;s&&(t.push({type:5,id:s,opId:this._pool.generateOpId()}),e.push(...o._toOps(_t(this._id),o._getParentKeyOrThrow())),r.push(Xr(0)))}this._items=[],this.invalidate();let i=new Map;i.set(_t(this._id),Ft(this,r)),this._pool.dispatch(t,e,i)}else{for(let t of this._items)t._detach();this._items=[],this.invalidate()}}set(t,e){if(this._pool?.assertStorageIsWritable(),t<0||t>=this._items.length)throw new Error(`Cannot set list item at index "${t}". index should be between 0 and ${this._items.length-1}`);let r=this._items[t],i=r._getParentKeyOrThrow(),o=r._id;r._detach();let s=qn(e);if(s._setParentLink(this,i),this._items[t]=s,this.invalidate(),this._pool&&this._id){let f=this._pool.generateId();s._attach(f,this._pool);let l=new Map;l.set(this._id,Ft(this,[Mn(t,s)]));let u=Qr(s._toOps(this._id,i,this._pool),o);this._unacknowledgedSets.set(i,_t(u[0].opId));let a=Qr(r._toOps(this._id,i,void 0),f);this._pool.dispatch(u,a,l)}}toArray(){return this._items.map(t=>vn(t))}every(t){return this.toArray().every(t)}filter(t){return this.toArray().filter(t)}find(t){return this.toArray().find(t)}findIndex(t){return this.toArray().findIndex(t)}forEach(t){return this.toArray().forEach(t)}get(t){if(!(t<0||t>=this._items.length))return vn(this._items[t])}indexOf(t,e){return this.toArray().indexOf(t,e)}lastIndexOf(t,e){return this.toArray().lastIndexOf(t,e)}map(t){return this._items.map((e,r)=>t(vn(e),r))}some(t){return this.toArray().some(t)}[Symbol.iterator](){return new cu(this._items)}_createAttachItemAndSort(t,e){let r=fr(t);r._attach(t.id,_t(this._pool)),r._setParentLink(this,e),this._insertAndSort(r);let i=this._indexOfPosition(e);return{newItem:r,newIndex:i}}_shiftItemPosition(t,e){let r=Ke(e,this._items.length>t+1?this._items[t+1]?._parentPos:void 0);this._items[t]._setParentLink(this,r)}_toTreeNode(t){return{type:"LiveList",id:this._id??oi(),key:t,payload:this._items.map((e,r)=>e.toTreeNode(r.toString()))}}toImmutable(){return super.toImmutable()}_toImmutable(){return this._items.map(e=>e.toImmutable())}clone(){return new to(this._items.map(t=>t.clone()))}},cu=class{constructor(n){this._innerIterator=n[Symbol.iterator]()}[Symbol.iterator](){return this}next(){let n=this._innerIterator.next();return n.done?{done:!0,value:void 0}:{value:vn(n.value)}}};function Ft(n,t){return{node:n,type:"LiveList",updates:t}}function Mn(n,t){return{index:n,type:"set",item:t instanceof bn?t.data:t}}function Xr(n){return{index:n,type:"delete"}}function xe(n,t){return{index:n,type:"insert",item:t instanceof bn?t.data:t}}function mn(n,t,e){return{index:t,type:"move",previousIndex:n,item:e instanceof bn?e.data:e}}function Qr(n,t){return n.map((e,r)=>r===0?{...e,intent:"set",deletedId:t}:e)}var $e=n=>n,wn=class eo extends ii{constructor(t){if(super(),this.unacknowledgedSet=new Map,t){let e=[];for(let[r,i]of t){let o=qn(i);o._setParentLink(this,r),e.push([r,o])}this._map=new Map(e)}else this._map=new Map}_toOps(t,e,r){if(this._id===void 0)throw new Error("Cannot serialize item is not attached");let i=[],o={id:this._id,opId:r?.generateOpId(),type:7,parentId:t,parentKey:e};i.push(o);for(let[s,f]of this._map)i.push(...f._toOps(this._id,s,r));return i}static _deserialize([t,e],r,i){let o=new eo;o._attach(t,i);let s=r.get(t);if(s===void 0)return o;for(let[f,l]of s){let u=ta([f,l],r,i);u._setParentLink(o,l.parentKey),o._map.set(l.parentKey,u),o.invalidate()}return o}_attach(t,e){super._attach(t,e);for(let[r,i]of this._map)Xt(i)&&i._attach(e.generateId(),e)}_attachChild(t,e){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let{id:r,parentKey:i,opId:o}=t,s=i,f=fr(t);if(this._pool.getNode(r)!==void 0)return{modified:!1};if(e===2){let a=this.unacknowledgedSet.get(s);if(a===o)return this.unacknowledgedSet.delete(s),{modified:!1};if(a!==void 0)return{modified:!1}}else e===1&&this.unacknowledgedSet.delete(s);let l=this._map.get(s),u;if(l){let a=_t(this._id);u=l._toOps(a,s),l._detach()}else u=[{type:5,id:r}];return f._setParentLink(this,s),f._attach(r,this._pool),this._map.set(s,f),this.invalidate(),{modified:{node:this,type:"LiveMap",updates:{[s]:{type:"update"}}},reverse:u}}_detach(){super._detach();for(let t of this._map.values())t._detach()}_detachChild(t){let e=_t(this._id),r=_t(t._parentKey),i=t._toOps(e,r,this._pool);for(let[s,f]of this._map)f===t&&(this._map.delete(s),this.invalidate());return t._detach(),{modified:{node:this,type:"LiveMap",updates:{[r]:{type:"delete"}}},reverse:i}}_serialize(){if(this.parent.type!=="HasParent")throw new Error("Cannot serialize LiveMap if parent is missing");return{type:2,parentId:_t(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get(t){let e=this._map.get(t);if(e!==void 0)return vn(e)}set(t,e){this._pool?.assertStorageIsWritable();let r=this._map.get(t);r&&r._detach();let i=qn(e);if(i._setParentLink(this,t),this._map.set(t,i),this.invalidate(),this._pool&&this._id){let o=this._pool.generateId();i._attach(o,this._pool);let s=new Map;s.set(this._id,{node:this,type:"LiveMap",updates:{[t]:{type:"update"}}});let f=i._toOps(this._id,t,this._pool);this.unacknowledgedSet.set(t,_t(f[0].opId)),this._pool.dispatch(i._toOps(this._id,t,this._pool),r?r._toOps(this._id,t):[{type:5,id:o}],s)}}get size(){return this._map.size}has(t){return this._map.has(t)}delete(t){this._pool?.assertStorageIsWritable();let e=this._map.get(t);if(e===void 0)return!1;if(e._detach(),this._map.delete(t),this.invalidate(),this._pool&&e._id){let r=_t(this._id),i=new Map;i.set(r,{node:this,type:"LiveMap",updates:{[t]:{type:"delete"}}}),this._pool.dispatch([{type:5,id:e._id,opId:this._pool.generateOpId()}],e._toOps(r,t),i)}return!0}entries(){let t=this._map.entries();return{[Symbol.iterator](){return this},next(){let e=t.next();if(e.done)return{done:!0,value:void 0};let i=e.value[0],o=vn(e.value[1]);return{value:[i,o]}}}}[Symbol.iterator](){return this.entries()}keys(){return this._map.keys()}values(){let t=this._map.values();return{[Symbol.iterator](){return this},next(){let e=t.next();return e.done?{done:!0,value:void 0}:{value:vn(e.value)}}}}forEach(t){for(let e of this)t(e[1],e[0],this)}_toTreeNode(t){return{type:"LiveMap",id:this._id??oi(),key:t,payload:Array.from(this._map.entries()).map(([e,r])=>r.toTreeNode(e))}}toImmutable(){return super.toImmutable()}_toImmutable(){let t=new Map;for(let[e,r]of this._map)t.set(e,r.toImmutable());return $e(t)}clone(){return new eo(Array.from(this._map).map(([t,e])=>[t,e.clone()]))}},an=class ur extends ii{constructor(t={}){super(),this._propToLastUpdate=new Map;for(let e in t){let r=t[e];r!==void 0&&Xt(r)&&r._setParentLink(this,e)}this._map=new Map(Object.entries(t))}static _buildRootAndParentToChildren(t){let e=new Map,r=null;for(let[i,o]of t)if(su(o))r=[i,o];else{let s=[i,o],f=e.get(o.parentId);f!==void 0?f.push(s):e.set(o.parentId,[s])}if(r===null)throw new Error("Root can't be null");return[r,e]}static _fromItems(t,e){let[r,i]=ur._buildRootAndParentToChildren(t);return ur._deserialize(r,i,e)}_toOps(t,e,r){if(this._id===void 0)throw new Error("Cannot serialize item is not attached");let i=r?.generateOpId(),o=[],s={type:4,id:this._id,opId:i,parentId:t,parentKey:e,data:{}};o.push(s);for(let[f,l]of this._map)Xt(l)?o.push(...l._toOps(this._id,f,r)):s.data[f]=l;return o}static _deserialize([t,e],r,i){let o=new ur(e.data);return o._attach(t,i),this._deserializeChildren(o,r,i)}static _deserializeChildren(t,e,r){let i=e.get(_t(t._id));if(i===void 0)return t;for(let[o,s]of i){let f=uu([o,s],e,r);Bn(f)&&f._setParentLink(t,s.parentKey),t._map.set(s.parentKey,f),t.invalidate()}return t}_attach(t,e){super._attach(t,e);for(let[r,i]of this._map)Xt(i)&&i._attach(e.generateId(),e)}_attachChild(t,e){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let{id:r,opId:i,parentKey:o}=t,s=Xs(t);if(this._pool.getNode(r)!==void 0)return this._propToLastUpdate.get(o)===i&&this._propToLastUpdate.delete(o),{modified:!1};if(e===0)this._propToLastUpdate.set(o,_t(i));else if(this._propToLastUpdate.get(o)!==void 0)return this._propToLastUpdate.get(o)===i?(this._propToLastUpdate.delete(o),{modified:!1}):{modified:!1};let f=_t(this._id),l=this._map.get(o),u;return Xt(l)?(u=l._toOps(f,o),l._detach()):l===void 0?u=[{type:6,id:f,key:o}]:u=[{type:3,id:f,data:{[o]:l}}],this._map.set(o,s),this.invalidate(),Bn(s)&&(s._setParentLink(this,o),s._attach(r,this._pool)),{reverse:u,modified:{node:this,type:"LiveObject",updates:{[o]:{type:"update"}}}}}_detachChild(t){if(t){let e=_t(this._id),r=_t(t._parentKey),i=t._toOps(e,r,this._pool);for(let[s,f]of this._map)f===t&&(this._map.delete(s),this.invalidate());return t._detach(),{modified:{node:this,type:"LiveObject",updates:{[r]:{type:"delete"}}},reverse:i}}return{modified:!1}}_detach(){super._detach();for(let t of this._map.values())Xt(t)&&t._detach()}_apply(t,e){return t.type===3?this._applyUpdate(t,e):t.type===6?this._applyDeleteObjectKey(t,e):super._apply(t,e)}_serialize(){let t={};for(let[e,r]of this._map)Xt(r)||(t[e]=r);return this.parent.type==="HasParent"&&this.parent.node._id?{type:0,parentId:this.parent.node._id,parentKey:this.parent.key,data:t}:{type:0,data:t}}_applyUpdate(t,e){let r=!1,i=_t(this._id),o=[],s={type:3,id:i,data:{}};for(let l in t.data){let u=this._map.get(l);Xt(u)?(o.push(...u._toOps(i,l)),u._detach()):u!==void 0?s.data[l]=u:u===void 0&&o.push({type:6,id:i,key:l})}let f={};for(let l in t.data){let u=t.data[l];if(u===void 0)continue;if(e)this._propToLastUpdate.set(l,_t(t.opId));else if(this._propToLastUpdate.get(l)===void 0)r=!0;else if(this._propToLastUpdate.get(l)===t.opId){this._propToLastUpdate.delete(l);continue}else continue;let a=this._map.get(l);Xt(a)&&a._detach(),r=!0,f[l]={type:"update"},this._map.set(l,u),this.invalidate()}return Object.keys(s.data).length!==0&&o.unshift(s),r?{modified:{node:this,type:"LiveObject",updates:f},reverse:o}:{modified:!1}}_applyDeleteObjectKey(t,e){let r=t.key;if(this._map.has(r)===!1)return{modified:!1};if(!e&&this._propToLastUpdate.get(r)!==void 0)return{modified:!1};let i=this._map.get(r),o=_t(this._id),s=[];return Xt(i)?(s=i._toOps(o,t.key),i._detach()):i!==void 0&&(s=[{type:3,id:o,data:{[r]:i}}]),this._map.delete(r),this.invalidate(),{modified:{node:this,type:"LiveObject",updates:{[t.key]:{type:"delete"}}},reverse:s}}toObject(){return Object.fromEntries(this._map)}set(t,e){this._pool?.assertStorageIsWritable(),this.update({[t]:e})}get(t){return this._map.get(t)}delete(t){this._pool?.assertStorageIsWritable();let e=t,r=this._map.get(e);if(r===void 0)return;if(this._pool===void 0||this._id===void 0){Xt(r)&&r._detach(),this._map.delete(e),this.invalidate();return}let i;Xt(r)?(r._detach(),i=r._toOps(this._id,e)):i=[{type:3,data:{[e]:r},id:this._id}],this._map.delete(e),this.invalidate();let o=new Map;o.set(this._id,{node:this,type:"LiveObject",updates:{[t]:{type:"delete"}}}),this._pool.dispatch([{type:6,key:e,id:this._id,opId:this._pool.generateOpId()}],i,o)}update(t){if(this._pool?.assertStorageIsWritable(),this._pool===void 0||this._id===void 0){for(let u in t){let a=t[u];if(a===void 0)continue;let d=this._map.get(u);Xt(d)&&d._detach(),Xt(a)&&a._setParentLink(this,u),this._map.set(u,a),this.invalidate()}return}let e=[],r=[],i=this._pool.generateOpId(),o={},s={id:this._id,type:3,data:{}},f={};for(let u in t){let a=t[u];if(a===void 0)continue;let d=this._map.get(u);if(Xt(d)?(r.push(...d._toOps(this._id,u)),d._detach()):d===void 0?r.push({type:6,id:this._id,key:u}):s.data[u]=d,Xt(a)){a._setParentLink(this,u),a._attach(this._pool.generateId(),this._pool);let m=a._toOps(this._id,u,this._pool),v=m.find(y=>y.parentId===this._id);v&&this._propToLastUpdate.set(u,_t(v.opId)),e.push(...m)}else o[u]=a,this._propToLastUpdate.set(u,i);this._map.set(u,a),this.invalidate(),f[u]={type:"update"}}Object.keys(s.data).length!==0&&r.unshift(s),Object.keys(o).length!==0&&e.unshift({opId:i,id:this._id,type:3,data:o});let l=new Map;l.set(this._id,{node:this,type:"LiveObject",updates:f}),this._pool.dispatch(e,r,l)}toImmutable(){return super.toImmutable()}toTreeNode(t){return super.toTreeNode(t)}_toTreeNode(t){let e=this._id??oi();return{type:"LiveObject",id:e,key:t,payload:Array.from(this._map.entries()).map(([r,i])=>Xt(i)?i.toTreeNode(r):{type:"Json",id:`${e}:${r}`,key:r,payload:i})}}_toImmutable(){let t={};for(let[e,r]of this._map)t[e]=Bn(r)?r.toImmutable():r;return t}clone(){return new ur(Object.fromEntries(Array.from(this._map).map(([t,e])=>[t,Bn(e)?e.clone():hr(e)])))}};function fr(n){return qn(Xs(n))}function Xs(n){switch(n.type){case 8:return n.data;case 4:return new an(n.data);case 7:return new wn;case 2:return new _n;default:return Ne(n,"Unknown creation Op")}}function Qs(n,t){return n===t?!0:n.parent.type==="HasParent"?Qs(n.parent.node,t):!1}function ta([n,t],e,r){switch(t.type){case 0:return an._deserialize([n,t],e,r);case 1:return _n._deserialize([n,t],e,r);case 2:return wn._deserialize([n,t],e,r);case 3:return bn._deserialize([n,t],e,r);default:throw new Error("Unexpected CRDT type")}}function uu([n,t],e,r){switch(t.type){case 0:return an._deserialize([n,t],e,r);case 1:return _n._deserialize([n,t],e,r);case 2:return wn._deserialize([n,t],e,r);case 3:return t.data;default:throw new Error("Unexpected CRDT type")}}function Bn(n){return ea(n)||fu(n)||du(n)}function Xt(n){return Bn(n)||hu(n)}function ea(n){return n instanceof _n}function fu(n){return n instanceof wn}function du(n){return n instanceof an}function hu(n){return n instanceof bn}function pu(n){return n===void 0?void 0:Bn(n)?n.clone():hr(n)}function vn(n){return n instanceof bn?n.data:n instanceof _n||n instanceof wn||n instanceof an?n:Ne(n,"Unknown AbstractCrdt")}function qn(n){return n instanceof an||n instanceof wn||n instanceof _n?n:new bn(n)}function gu(n,t){let e=[];return n.forEach((r,i)=>{t.get(i)||e.push({type:5,id:i})}),t.forEach((r,i)=>{let o=n.get(i);if(o)r.type===0&&(o.type!==0||JSON.stringify(r.data)!==JSON.stringify(o.data))&&e.push({type:3,id:i,data:r.data}),r.parentKey!==o.parentKey&&e.push({type:1,id:i,parentKey:_t(r.parentKey,"Parent key must not be missing")});else switch(r.type){case 3:e.push({type:8,id:i,parentId:r.parentId,parentKey:r.parentKey,data:r.data});break;case 1:e.push({type:2,id:i,parentId:r.parentId,parentKey:r.parentKey});break;case 0:if(r.parentId===void 0||r.parentKey===void 0)throw new Error("Internal error. Cannot serialize storage root into an operation");e.push({type:4,id:i,parentId:r.parentId,parentKey:r.parentKey,data:r.data});break;case 2:e.push({type:7,id:i,parentId:r.parentId,parentKey:r.parentKey});break}}),e}function yu(n,t){let e=n.updates;for(let[r,i]of qs(t.updates))e[r]=i;return{...t,updates:e}}function mu(n,t){let e=n.updates;for(let[r,i]of qs(t.updates))e[r]=i;return{...t,updates:e}}function vu(n,t){let e=n.updates;return{...t,updates:e.concat(t.updates)}}function $i(n,t){return n===void 0?t:n.type==="LiveObject"&&t.type==="LiveObject"?yu(n,t):n.type==="LiveMap"&&t.type==="LiveMap"?mu(n,t):n.type==="LiveList"&&t.type==="LiveList"?vu(n,t):t}function bu(n){return n===null||typeof n=="string"||typeof n=="number"||typeof n=="boolean"}function na(n){return Array.isArray(n)}function _u(n){return!bu(n)&&!na(n)}var lo=(n=>(n[n.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",n[n.BROADCAST_EVENT=103]="BROADCAST_EVENT",n[n.FETCH_STORAGE=200]="FETCH_STORAGE",n[n.UPDATE_STORAGE=201]="UPDATE_STORAGE",n[n.FETCH_YDOC=300]="FETCH_YDOC",n[n.UPDATE_YDOC=301]="UPDATE_YDOC",n))(lo||{});function ra(n,t){let e=!1,r={...n};return Object.keys(t).forEach(i=>{let o=i,s=t[o];r[o]!==s&&(s===void 0?delete r[o]:r[o]=s,e=!0)}),e?r:n}var si=class{constructor(){this._ev=Bt()}get didInvalidate(){return this._ev.observable}invalidate(){this._cache!==void 0&&(this._cache=void 0,this._ev.notify())}get current(){return this._cache??(this._cache=this._toImmutable())}};function wu(n,t){let{connectionId:e,id:r,info:i}=n,o=Yi(n.scopes);return $e(io({connectionId:e,id:r,info:i,canWrite:o,canComment:$s(n.scopes),isReadOnly:!o,presence:t}))}var Eu=class extends si{constructor(){super(),this._connections=new Map,this._presences=new Map,this._users=new Map}connectionIds(){return this._connections.keys()}_toImmutable(){return Wi(Array.from(this._presences.keys()).map(t=>this.getUser(Number(t))))}clearOthers(){this._connections=new Map,this._presences=new Map,this._users=new Map,this.invalidate()}_getUser(n){let t=this._connections.get(n),e=this._presences.get(n);if(t!==void 0&&e!==void 0)return wu(t,e)}getUser(n){let t=this._users.get(n);if(t)return t;let e=this._getUser(n);if(e)return this._users.set(n,e),e}_invalidateUser(n){this._users.has(n)&&this._users.delete(n),this.invalidate()}setConnection(n,t,e,r){this._connections.set(n,$e({connectionId:n,id:t,info:e,scopes:r})),this._presences.has(n)&&this._invalidateUser(n)}removeConnection(n){this._connections.delete(n),this._presences.delete(n),this._invalidateUser(n)}setOther(n,t){this._presences.set(n,$e(io(t))),this._connections.has(n)&&this._invalidateUser(n)}patchOther(n,t){let e=this._presences.get(n);if(e===void 0)return;let r=ra(e,t);e!==r&&(this._presences.set(n,$e(r)),this._invalidateUser(n))}},Ou=class extends si{constructor(n){super(),this._data=$e(io(n))}_toImmutable(){return this._data}patch(n){let t=this._data,e=ra(t,n);t!==e&&(this._data=$e(e),this.invalidate())}},Ns=class extends si{constructor(n){super(),this._value=$e(n)}_toImmutable(){return this._value}set(n){this._value=$e(n),this.invalidate()}},Gi=class extends si{constructor(...n){super();let t=n.pop(),e=n;this._refs=e,this._refs.forEach(r=>{r.didInvalidate.subscribe(()=>this.invalidate())}),this._transform=t}_toImmutable(){return this._transform(...this._refs.map(n=>n.current))}},Au=1024*1024-1024;function Su(n){let t=0;return()=>`${n}:${t++}`}function Is(n,t){return{type:"User",id:`${t.connectionId}`,key:n,payload:t}}function ku(){let n=typeof document<"u"?document:void 0,t={current:null};function e(){n?.visibilityState==="hidden"?t.current=t.current??Date.now():t.current=null}return n?.addEventListener("visibilitychange",e),[t,()=>{n?.removeEventListener("visibilitychange",e)}]}var Ls=class extends Error{constructor(n,t,e){super(n),this.message=n,this.status=t,this.details=e}};function Tu(n,t,e){async function r(y,g,p){let h=await t();return e(n,y,h,p,g)}async function i(y,g,p){let h=await r(y,p,g);if(!h.ok&&h.status>=400&&h.status<600){let b;try{let _=await h.json();b=new Ls(_.message,h.status,_)}catch{b=new Ls(h.statusText,h.status)}throw b}let c;try{c=await h.json()}catch{c={}}return c}async function o(y){let g=await r("/threads/search",{since:y?.since?.toISOString()},{body:JSON.stringify({...y?.query?.metadata&&{metadata:y.query.metadata}}),headers:{"Content-Type":"application/json"},method:"POST"});if(g.ok){let p=await g.json();return{threads:p.data.map(h=>ti(h)),inboxNotifications:p.inboxNotifications.map(h=>Xi(h)),deletedThreads:p.deletedThreads.map(h=>Ws(h)),deletedInboxNotifications:p.deletedInboxNotifications.map(h=>Ys(h)),meta:{requestedAt:new Date(p.meta.requestedAt)}}}else{if(g.status===404)return{threads:[],inboxNotifications:[],deletedThreads:[],deletedInboxNotifications:[],meta:{requestedAt:new Date}};throw new Error("There was an error while getting threads.")}}async function s({threadId:y}){let g=await r(`/thread-with-notification/${y}`);if(g.ok){let p=await g.json();return{thread:ti(p.thread),inboxNotification:p.inboxNotification?Xi(p.inboxNotification):void 0}}else{if(g.status===404)return;throw new Error(`There was an error while getting thread ${y}.`)}}async function f({metadata:y,body:g,commentId:p,threadId:h}){let c=await i("/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h,comment:{id:p,body:g},metadata:y})});return ti(c)}async function l({metadata:y,threadId:g}){return await i(`/threads/${encodeURIComponent(g)}/metadata`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})}async function u({threadId:y,commentId:g,body:p}){let h=await i(`/threads/${encodeURIComponent(y)}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g,body:p})});return Zi(h)}async function a({threadId:y,commentId:g,body:p}){let h=await i(`/threads/${encodeURIComponent(y)}/comments/${encodeURIComponent(g)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:p})});return Zi(h)}async function d({threadId:y,commentId:g}){await i(`/threads/${encodeURIComponent(y)}/comments/${encodeURIComponent(g)}`,{method:"DELETE"})}async function m({threadId:y,commentId:g,emoji:p}){let h=await i(`/threads/${encodeURIComponent(y)}/comments/${encodeURIComponent(g)}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji:p})});return Kc(h)}async function v({threadId:y,commentId:g,emoji:p}){await i(`/threads/${encodeURIComponent(y)}/comments/${encodeURIComponent(g)}/reactions/${encodeURIComponent(p)}`,{method:"DELETE"})}return{getThreads:o,getThread:s,createThread:f,editThreadMetadata:l,createComment:u,editComment:a,deleteComment:d,addReaction:m,removeReaction:v}}var xu=50;function Nu(n,t){let e=typeof n.initialPresence=="function"?n.initialPresence(t.roomId):n.initialPresence,r=typeof n.initialStorage=="function"?n.initialStorage(t.roomId):n.initialStorage,[i,o]=ku(),s={...t.delegates,canZombie(){return t.backgroundKeepAliveTimeout!==void 0&&i.current!==null&&Date.now()>i.current+t.backgroundKeepAliveTimeout&&qe()!=="synchronizing"}},f=new Pc(s,t.enableDebugLogging),l={buffer:{flushTimerID:void 0,lastFlushedAt:0,presenceUpdates:{type:"full",data:e},messages:[],storageOperations:[]},staticSessionInfo:new Ns(null),dynamicSessionInfo:new Ns(null),myPresence:new Ou(e),others:new Eu,initialStorage:r,idFactory:null,clock:0,opClock:0,nodes:new Map,root:void 0,undoStack:[],redoStack:[],pausedHistory:null,activeBatch:null,unacknowledgedOps:new Map,opStackTraces:void 0},u=F=>F(),a=t.unstable_batchedUpdates??u,d;function m(F){let Q=f.authValue;if(Q!==null){let tt=no(Q);if(tt!==d)if(d=tt,Q.type==="secret"){let st=Q.token.parsed;l.staticSessionInfo.set({userId:st.k==="sec-legacy"?st.id:st.uid,userInfo:st.k==="sec-legacy"?st.info:st.ui})}else l.staticSessionInfo.set({userId:void 0,userInfo:void 0})}a(()=>{b.status.notify(F),A(u)})}let v,y=!1;function g(F){F==="reconnecting"?v=setTimeout(()=>{a(()=>{b.lostConnection.notify("lost"),y=!0,l.others.clearOthers(),z({others:[{type:"reset"}]},u)})},t.lostConnectionTimeout):(clearTimeout(v),y&&(a(F==="disconnected"?()=>{b.lostConnection.notify("failed")}:()=>{b.lostConnection.notify("restored")}),y=!1))}function p(){l.buffer.presenceUpdates={type:"full",data:{...l.myPresence.current}},W!==null&&dt({flush:!1}),at()}function h(){clearTimeout(l.buffer.flushTimerID)}f.events.onMessage.subscribe(ft),f.events.statusDidChange.subscribe(m),f.events.statusDidChange.subscribe(g),f.events.didConnect.subscribe(p),f.events.didDisconnect.subscribe(h),f.events.onLiveblocksError.subscribe(F=>{a(()=>{b.error.notify(F)})});let c={roomId:t.roomId,getNode:F=>l.nodes.get(F),addNode:(F,Q)=>void l.nodes.set(F,Q),deleteNode:F=>void l.nodes.delete(F),generateId:()=>`${j()}:${l.clock++}`,generateOpId:()=>`${j()}:${l.opClock++}`,dispatch(F,Q,tt){let st=l.activeBatch;if(st){st.ops.push(...F);for(let[gt,yt]of tt)st.updates.storageUpdates.set(gt,$i(st.updates.storageUpdates.get(gt),yt));st.reverseOps.unshift(...Q)}else a(()=>{U(Q,u),l.redoStack.length=0,G(F),z({storageUpdates:tt},u)})},assertStorageIsWritable:()=>{let F=l.dynamicSessionInfo.current?.scopes;if(F===void 0)return;if(!Yi(F))throw new Error("Cannot write to storage with a read only user, please ensure the user has write permissions")}},b={connection:Bt(),status:Bt(),lostConnection:Bt(),customEvent:Bt(),self:Bt(),myPresence:Bt(),others:Bt(),error:Bt(),storage:Bt(),history:Bt(),storageDidLoad:Bt(),storageStatus:Bt(),ydoc:Bt(),comments:Bt()};async function _(F,Q,tt,st,gt){let yt=Js(t.baseUrl,`/v2/c/rooms/${encodeURIComponent(F)}${Q}`,gt);return await(t.polyfills?.fetch||fetch)(yt,{...st,headers:{...st?.headers,Authorization:`Bearer ${no(tt)}`}})}async function w(F,Q){return _(Q,"/storage",F,{method:"GET",headers:{"Content-Type":"application/json"}})}async function S(F,Q){if(!f.authValue)throw new Error("Not authorized");return _(t.roomId,F,f.authValue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)})}function x(F){let Q=JSON.stringify(F),tt=l.dynamicSessionInfo.current?.nonce;if(t.unstable_fallbackToHTTP&&tt&&new TextEncoder().encode(Q).length>Au){S("/send-message",{nonce:tt,messages:F}).then(gt=>{!gt.ok&&gt.status===403&&f.reconnect()}),Ie("Message was too large for websockets and sent over HTTP instead");return}f.send(Q)}let O=new Gi(l.staticSessionInfo,l.dynamicSessionInfo,l.myPresence,(F,Q,tt)=>{if(F===null||Q===null)return null;{let st=Yi(Q.scopes);return{connectionId:Q.actor,id:F.userId,info:F.userInfo,presence:tt,canWrite:st,canComment:$s(Q.scopes),isReadOnly:!st}}}),E;function A(F){let Q=O.current;Q!==null&&Q!==E&&(F(()=>{b.self.notify(Q)}),E=Q)}let k=new Gi(O,F=>F!==null?Is("Me",F):null);function T(F,Q){if(F.items.length===0)throw new Error("Internal error: cannot load storage without items");l.root!==void 0?I(F.items,Q):l.root=an._fromItems(F.items,c);let tt=l.undoStack.length;for(let st in l.initialStorage)l.root.get(st)===void 0&&l.root.set(st,pu(l.initialStorage[st]));l.undoStack.length=tt}function I(F,Q){if(l.root===void 0)return;let tt=new Map;for(let[yt,jt]of l.nodes)tt.set(yt,jt._serialize());let st=gu(tt,new Map(F)),gt=P(st,!1);z(gt.updates,Q)}function R(F,Q){l.undoStack.length>=50&&l.undoStack.shift(),l.undoStack.push(F),V(Q)}function U(F,Q){l.pausedHistory!==null?l.pausedHistory.unshift(...F):R(F,Q)}function z(F,Q){let tt=F.storageUpdates,st=F.others;Q(()=>{if(st!==void 0&&st.length>0){let gt=l.others.current;for(let yt of st)b.others.notify({...yt,others:gt})}if((F.presence??!1)&&(A(u),b.myPresence.notify(l.myPresence.current)),tt!==void 0&&tt.size>0){let gt=Array.from(tt.values());b.storage.notify(gt)}Xe()})}function j(){let F=l.dynamicSessionInfo.current;if(F)return F.actor;throw new Error("Internal. Tried to get connection id but connection was never open")}function P(F,Q){let tt={reverse:[],storageUpdates:new Map,presence:!1},st=new Set,gt=F.map(yt=>yt.type!=="presence"&&!yt.opId?{...yt,opId:c.generateOpId()}:yt);for(let yt of gt)if(yt.type==="presence"){let jt={type:"presence",data:{}};for(let Kt in yt.data)jt.data[Kt]=l.myPresence.current[Kt];if(l.myPresence.patch(yt.data),l.buffer.presenceUpdates===null)l.buffer.presenceUpdates={type:"partial",data:yt.data};else for(let Kt in yt.data)l.buffer.presenceUpdates.data[Kt]=yt.data[Kt];tt.reverse.unshift(jt),tt.presence=!0}else{let jt;if(Q)jt=0;else{let ie=_t(yt.opId);jt=l.unacknowledgedOps.delete(ie)?2:1}let Kt=N(yt,jt);if(Kt.modified){let ie=Kt.modified.node._id;ie&&st.has(ie)||(tt.storageUpdates.set(_t(Kt.modified.node._id),$i(tt.storageUpdates.get(_t(Kt.modified.node._id)),Kt.modified)),tt.reverse.unshift(...Kt.reverse)),(yt.type===2||yt.type===7||yt.type===4)&&st.add(_t(yt.id))}}return{ops:gt,reverse:tt.reverse,updates:{storageUpdates:tt.storageUpdates,presence:tt.presence}}}function N(F,Q){if(iu(F))return{modified:!1};switch(F.type){case 6:case 3:case 5:{let tt=l.nodes.get(F.id);return tt===void 0?{modified:!1}:tt._apply(F,Q===0)}case 1:{let tt=l.nodes.get(F.id);return tt===void 0?{modified:!1}:tt.parent.type==="HasParent"&&ea(tt.parent.node)?tt.parent.node._setChildKey(pr(F.parentKey),tt,Q):{modified:!1}}case 4:case 2:case 7:case 8:{if(F.parentId===void 0)return{modified:!1};let tt=l.nodes.get(F.parentId);return tt===void 0?{modified:!1}:tt._attachChild(F,Q)}}}function D(F,Q){let tt={};l.buffer.presenceUpdates===null&&(l.buffer.presenceUpdates={type:"partial",data:{}});for(let st in F){let gt=F[st];gt!==void 0&&(l.buffer.presenceUpdates.data[st]=gt,tt[st]=l.myPresence.current[st])}l.myPresence.patch(F),l.activeBatch?(Q?.addToHistory&&l.activeBatch.reverseOps.unshift({type:"presence",data:tt}),l.activeBatch.updates.presence=!0):(at(),a(()=>{Q?.addToHistory&&U([{type:"presence",data:tt}],u),z({presence:!0},u)}))}function C(F){if(F.targetActor!==void 0){let tt=l.others.getUser(F.actor);l.others.setOther(F.actor,F.data);let st=l.others.getUser(F.actor);if(tt===void 0&&st!==void 0)return{type:"enter",user:st}}else l.others.patchOther(F.actor,F.data);let Q=l.others.getUser(F.actor);if(Q)return{type:"update",updates:F.data,user:Q}}function H(F){let Q=l.others.getUser(F.actor);return Q?(l.others.removeConnection(F.actor),{type:"leave",user:Q}):null}function q(F,Q){l.dynamicSessionInfo.set({actor:F.actor,nonce:F.nonce,scopes:F.scopes}),l.idFactory=Su(F.actor),A(Q);for(let tt of l.others.connectionIds())F.users[tt]===void 0&&l.others.removeConnection(tt);for(let tt in F.users){let st=F.users[tt],gt=Number(tt);l.others.setConnection(gt,st.id,st.info,st.scopes)}return{type:"reset"}}function L(){return l.undoStack.length>0}function M(){return l.redoStack.length>0}function V(F){F(()=>{b.history.notify({canUndo:L(),canRedo:M()})})}function $(F){l.others.setConnection(F.actor,F.id,F.info,F.scopes),l.buffer.messages.push({type:100,data:l.myPresence.current,targetActor:F.actor}),at();let Q=l.others.getUser(F.actor);return Q?{type:"enter",user:Q}:void 0}function Z(F){return _u(F)?F:null}function et(F){let Q=ro(F);return Q===void 0?null:na(Q)?Wi(Q.map(tt=>Z(tt))):Wi([Z(Q)])}function ct(F,Q){if(F.size===0)return;let tt=[],st=Array.from(F.values()),gt=P(st,!0);tt.push({type:201,ops:gt.ops}),z(gt.updates,Q),x(tt)}function ft(F){if(typeof F.data!="string")return;let Q=et(F.data);if(Q===null||Q.length===0)return;let tt={storageUpdates:new Map,others:[]};a(()=>{for(let st of Q)switch(st.type){case 101:{let gt=$(st);gt&&tt.others.push(gt);break}case 100:{let gt=C(st);gt&&tt.others.push(gt);break}case 103:{let gt=l.others.current;b.customEvent.notify({connectionId:st.actor,user:st.actor<0?null:gt.find(yt=>yt.connectionId===st.actor)??null,event:st.event});break}case 102:{let gt=H(st);gt&&tt.others.push(gt);break}case 300:{b.ydoc.notify(st);break}case 104:{tt.others.push(q(st,u));break}case 200:{ot(st);break}case 201:{let gt=P(st.ops,!1);for(let[yt,jt]of gt.updates.storageUpdates)tt.storageUpdates.set(yt,$i(tt.storageUpdates.get(yt),jt));break}case 299:{js("Storage mutation rejection error",st.reason);break}case 400:case 401:case 405:case 406:case 402:case 403:case 404:{b.comments.notify(st);break}}z(tt,u)})}function at(){let F=l.buffer.storageOperations;if(F.length>0){for(let st of F)l.unacknowledgedOps.set(_t(st.opId),st);Xe()}if(f.getStatus()!=="connected"){l.buffer.storageOperations=[];return}let Q=Date.now(),tt=Q-l.buffer.lastFlushedAt;if(tt>=t.throttleDelay){let st=bt();if(st.length===0)return;x(st),l.buffer={flushTimerID:void 0,lastFlushedAt:Q,messages:[],storageOperations:[],presenceUpdates:null}}else clearTimeout(l.buffer.flushTimerID),l.buffer.flushTimerID=setTimeout(at,t.throttleDelay-tt)}function bt(){let F=[];l.buffer.presenceUpdates&&F.push(l.buffer.presenceUpdates.type==="full"?{type:100,targetActor:-1,data:l.buffer.presenceUpdates.data}:{type:100,data:l.buffer.presenceUpdates.data});for(let Q of l.buffer.messages)F.push(Q);return l.buffer.storageOperations.length>0&&F.push({type:201,ops:l.buffer.storageOperations}),F}function Pt(F,Q){let tt={type:301,update:F,guid:Q};l.buffer.messages.push(tt),b.ydoc.notify(tt),at()}function Ct(F,Q={shouldQueueEventIfNotReady:!1}){f.getStatus()!=="connected"&&!Q.shouldQueueEventIfNotReady||(l.buffer.messages.push({type:103,event:F}),at())}function G(F){l.buffer.storageOperations.push(...F),at()}let W=null,nt=null;function ot(F){let Q=new Map(l.unacknowledgedOps);T(F,u),ct(Q,u),nt?.(),Xe(),b.storageDidLoad.notify()}async function X(){if(!f.authValue)return;let Q=await(await w(f.authValue,t.roomId)).json();ot({type:200,items:Q})}function dt(F){let Q=l.buffer.messages;t.unstable_streamData?X():Q.some(tt=>tt.type===200)||Q.push({type:200}),F.flush&&at()}function ut(){return W===null&&(dt({flush:!0}),W=new Promise(F=>{nt=F}),Xe()),W}function pt(){let F=l.root;return F!==void 0?F:(ut(),null)}async function kt(){return l.root!==void 0?Promise.resolve({root:l.root}):(await ut(),{root:_t(l.root)})}function Rt(F,Q){l.buffer.messages.find(tt=>tt.type===300&&tt.vector===F&&tt.guid===Q)||l.buffer.messages.push({type:300,vector:F,guid:Q}),at()}function mt(){if(l.activeBatch)throw new Error("undo is not allowed during a batch");let F=l.undoStack.pop();if(F===void 0)return;l.pausedHistory=null;let Q=P(F,!0);a(()=>{z(Q.updates,u),l.redoStack.push(Q.reverse),V(u)});for(let tt of Q.ops)tt.type!=="presence"&&l.buffer.storageOperations.push(tt);at()}function Wt(){if(l.activeBatch)throw new Error("redo is not allowed during a batch");let F=l.redoStack.pop();if(F===void 0)return;l.pausedHistory=null;let Q=P(F,!0);a(()=>{z(Q.updates,u),l.undoStack.push(Q.reverse),V(u)});for(let tt of Q.ops)tt.type!=="presence"&&l.buffer.storageOperations.push(tt);at()}function Et(){l.undoStack.length=0,l.redoStack.length=0}function re(F){if(l.activeBatch)return F();let Q;return a(()=>{l.activeBatch={ops:[],updates:{storageUpdates:new Map,presence:!1,others:[]},reverseOps:[]};try{Q=F()}finally{let tt=l.activeBatch;l.activeBatch=null,tt.reverseOps.length>0&&U(tt.reverseOps,u),tt.ops.length>0&&(l.redoStack.length=0),tt.ops.length>0&&G(tt.ops),z(tt.updates,u),at()}}),Q}function Be(){l.pausedHistory===null&&(l.pausedHistory=[])}function or(){let F=l.pausedHistory;l.pausedHistory=null,F!==null&&F.length>0&&R(F,a)}function qe(){return l.root===void 0?W===null?"not-loaded":"loading":l.unacknowledgedOps.size===0?"synchronized":"synchronizing"}let Rn=qe();function Xe(){let F=qe();Rn!==F&&(Rn=F,b.storageStatus.notify(F))}let pn=new Gi(l.others,F=>F.map((Q,tt)=>Is(`Other ${tt}`,Q))),ye={status:b.status.observable,lostConnection:b.lostConnection.observable,customEvent:b.customEvent.observable,others:b.others.observable,self:b.self.observable,myPresence:b.myPresence.observable,error:b.error.observable,storage:b.storage.observable,history:b.history.observable,storageDidLoad:b.storageDidLoad.observable,storageStatus:b.storageStatus.observable,ydoc:b.ydoc.observable,comments:b.comments.observable},Fe=Tu(t.roomId,s.authenticate,_);async function oe(F,Q){let tt=await s.authenticate(),st=await _(t.roomId,F,tt,Q);if(!st.ok&&st.status>=400&&st.status<600){let yt;try{let jt=await st.json();yt=new ni(jt.message,st.status,jt)}catch{yt=new ni(st.statusText,st.status)}throw yt}let gt;try{gt=await st.json()}catch{gt={}}return gt}function se(){return oe("/notification-settings")}function ae(F){return oe("/notification-settings",{method:"POST",body:JSON.stringify(F),headers:{"Content-Type":"application/json"}})}async function Qe(F){await oe("/inbox-notifications/read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:F})})}let he=new oo(async F=>{let Q=F.flat();return await Qe(Q),Q},{delay:xu});async function tn(F){await he.get(F)}return Object.defineProperty({[ei]:{get presenceBuffer(){return hr(l.buffer.presenceUpdates?.data??null)},get undoStack(){return hr(l.undoStack)},get nodeCount(){return l.nodes.size},getSelf_forDevTools:()=>k.current,getOthers_forDevTools:()=>pn.current,simulate:{explicitClose:F=>f._privateSendMachineEvent({type:"EXPLICIT_SOCKET_CLOSE",event:F}),rawSend:F=>f.send(F)},comments:{...Fe},notifications:{getRoomNotificationSettings:se,updateRoomNotificationSettings:ae,markInboxNotificationAsRead:tn}},id:t.roomId,subscribe:Iu(ye),connect:()=>f.connect(),reconnect:()=>f.reconnect(),disconnect:()=>f.disconnect(),destroy:()=>{o(),f.destroy()},updatePresence:D,updateYDoc:Pt,broadcastEvent:Ct,batch:re,history:{undo:mt,redo:Wt,canUndo:L,canRedo:M,clear:Et,pause:Be,resume:or},fetchYDoc:Rt,getStorage:kt,getStorageSnapshot:pt,getStorageStatus:qe,events:ye,getStatus:()=>f.getStatus(),getConnectionState:()=>f.getLegacyStatus(),getSelf:()=>O.current,getPresence:()=>l.myPresence.current,getOthers:()=>l.others.current},ei,{enumerable:!1})}function Iu(n){function t(i,o){return n.storage.subscribe(s=>{let f=s.filter(l=>Qs(l.node,i));f.length>0&&o(f)})}function e(i,o){return n.storage.subscribe(s=>{for(let f of s)f.node._id===i._id&&o(f.node)})}function r(i,o,s){if(typeof i=="string"&&Lu(i)){if(typeof o!="function")throw new Error("Second argument must be a callback function");let f=o;switch(i){case"event":return n.customEvent.subscribe(f);case"my-presence":return n.myPresence.subscribe(f);case"others":{let l=f;return n.others.subscribe(u=>{let{others:a,...d}=u;return l(a,d)})}case"error":return n.error.subscribe(f);case"connection":{let l=f;return n.status.subscribe(u=>l(Fs(u)))}case"status":return n.status.subscribe(f);case"lost-connection":return n.lostConnection.subscribe(f);case"history":return n.history.subscribe(f);case"storage-status":return n.storageStatus.subscribe(f);default:return Ne(i,`"${String(i)}" is not a valid event name`)}}if(o===void 0||typeof i=="function")if(typeof i=="function"){let f=i;return n.storage.subscribe(f)}else throw new Error("Please specify a listener callback");if(Xt(i)){let f=i;return s?.isDeep?t(f,o):e(f,o)}throw new Error(`${String(i)} is not a value that can be subscribed to.`)}return r}function Lu(n){return n==="my-presence"||n==="others"||n==="event"||n==="error"||n==="history"||n==="status"||n==="storage-status"||n==="lost-connection"||n==="connection"}function Cu(n,t){return async()=>t.getAuthValue({requestedScope:"room:read",roomId:n})}function Du(n,t,e){return r=>{let i=e??(typeof WebSocket>"u"?void 0:WebSocket);if(i===void 0)throw new on("To use Liveblocks client in a non-DOM environment, you need to provide a WebSocket polyfill.");let o=new URL(t);if(o.protocol=o.protocol==="http:"?"ws":"wss",o.pathname="/v7",o.searchParams.set("roomId",n),r.type==="secret")o.searchParams.set("tok",r.token.raw);else if(r.type==="public")o.searchParams.set("pubkey",r.publicApiKey);else return Ne(r,"Unhandled case");return o.searchParams.set("version",dr||"dev"),new i(o.toString())}}function Ru(){let n=Gs({threads:{},queries:{},optimisticUpdates:[],inboxNotifications:{},notificationSettings:{}});return{...n,deleteThread(t){n.set(e=>({...e,threads:Pu(e.threads,t),inboxNotifications:Object.fromEntries(Object.entries(e.inboxNotifications).filter(([r,i])=>i.threadId!==t))}))},updateThreadAndNotification(t,e){n.set(r=>{let i=r.threads[t.id];return{...r,threads:i===void 0||ia(t,i)===1?{...r.threads,[t.id]:t}:r.threads,inboxNotifications:e===void 0?r.inboxNotifications:{...r.inboxNotifications,[e.id]:e}}})},updateThreadsAndNotifications(t,e,r,i,o){n.set(s=>({...s,threads:Uu(s.threads,{newThreads:t,deletedThreads:r}),inboxNotifications:Mu(s.inboxNotifications,{newInboxNotifications:e,deletedNotifications:i}),queries:o!==void 0?{...s.queries,[o]:{isLoading:!1}}:s.queries}))},updateRoomInboxNotificationSettings(t,e,r){n.set(i=>({...i,notificationSettings:{...i.notificationSettings,[t]:e},queries:{...i.queries,[r]:{isLoading:!1}}}))},pushOptimisticUpdate(t){n.set(e=>({...e,optimisticUpdates:[...e.optimisticUpdates,t]}))},setQueryState(t,e){n.set(r=>({...r,queries:{...r.queries,[t]:e}}))}}}function Pu(n,t){if(Object.prototype.hasOwnProperty.call(n,t)){let{[t]:e,...r}=n;return r}return n}function ia(n,t){return n.updatedAt&&t.updatedAt?n.updatedAt>t.updatedAt?1:n.updatedAt<t.updatedAt?-1:0:n.updatedAt||t.updatedAt?n.updatedAt?1:-1:n.createdAt>t.createdAt?1:n.createdAt<t.createdAt?-1:0}function Uu(n,t){let e={...n};return t.newThreads.forEach(r=>{let i=e[r.id];i&&ia(i,r)===1||(e[r.id]=r)}),t.deletedThreads.forEach(({id:r,deletedAt:i})=>{let o=e[r];o!==void 0&&(o.deletedAt=i,o.updatedAt=i,o.comments=[])}),e}function Mu(n,t){let e={...n};return t.newInboxNotifications.forEach(r=>{let i=e[r.id];i&&ju(i,r)===1||(e[r.id]=r)}),t.deletedNotifications.forEach(({id:r})=>delete e[r]),e}function ju(n,t){return n.notifiedAt>t.notifiedAt?1:n.notifiedAt<t.notifiedAt?-1:n.readAt&&t.readAt?n.readAt>t.readAt?1:n.readAt<t.readAt?-1:0:n.readAt||t.readAt?n.readAt?1:-1:0}var Bu=16,qu=1e3,Fu=100,Vu=15e3,Hu=200,zu=1e3,Ku=3e4,$u=5e3,Gu=50,Wu=50;function Yu(n){if("liveblocksServer"in n)throw new Error("Client option no longer supported");return typeof n.baseUrl=="string"&&n.baseUrl.startsWith("http")?n.baseUrl:qc}function no(n){return n.type==="public"?n.publicApiKey:n.token.raw}function co(n){let t=n,e=Zu(t.throttle??Fu),r=Xu(t.lostConnectionTimeout??$u),i=Ju(t.backgroundKeepAliveTimeout),o=Yu(t),s=Mc(n),f=new Map;function l(k){k.id,f.delete(k.id),k.destroy()}function u(k){let T=()=>{let I=T;k.unsubs.delete(I)?k.unsubs.size===0&&l(k.room):Ie("This leave function was already called. Calling it more than once has no effect.")};return k.unsubs.add(T),{room:k.room,leave:T}}function a(k,T){let I=f.get(k);if(I!==void 0)return u(I);T.initialPresence===null||T.initialPresence;let R=Nu({initialPresence:T.initialPresence??{},initialStorage:T.initialStorage},{roomId:k,throttleDelay:e,lostConnectionTimeout:r,backgroundKeepAliveTimeout:i,polyfills:t.polyfills,delegates:t.mockedDelegates??{createSocket:Du(k,o,t.polyfills?.WebSocket),authenticate:Cu(k,s)},enableDebugLogging:t.enableDebugLogging,unstable_batchedUpdates:T?.unstable_batchedUpdates,baseUrl:o,unstable_fallbackToHTTP:!!t.unstable_fallbackToHTTP,unstable_streamData:!!t.unstable_streamData}),U={room:R,unsubs:new Set};if(f.set(k,U),T.autoConnect??T.shouldInitiallyConnect??!0){if(typeof atob>"u"){if(t.polyfills?.atob===void 0)throw new Error("You need to polyfill atob to use the client in your environment. Please follow the instructions at https://liveblocks.io/docs/errors/liveblocks-client/atob-polyfill");global.atob=t.polyfills.atob}R.connect()}return u(U)}function d(k,T){let{room:I,leave:R}=a(k,T);return I}function m(k){let T=f.get(k)?.room;return T||null}function v(k){let T=f.get(k)?.unsubs??new Set;for(let I of T)I()}function y(){s.reset();for(let{room:k}of f.values())Ac(k.getStatus())||k.reconnect()}let g=Gs(null),{getInboxNotifications:p,getUnreadInboxNotificationsCount:h,markAllInboxNotificationsAsRead:c,markInboxNotificationAsRead:b}=Wc({baseUrl:o,fetcher:t.polyfills?.fetch||fetch,authManager:s,currentUserIdStore:g}),_=Ru(),w=t.resolveUsers,S=Cs(()=>!w,"Set the resolveUsers option in createClient to specify user info."),x=ks(async k=>{let T=k.flat(),I=await w?.({userIds:T});return S(),I??T.map(()=>{})},{delay:Gu}),O=t.resolveRoomsInfo,E=Cs(()=>!O,"Set the resolveRoomsInfo option in createClient to specify room info."),A=ks(async k=>{let T=k.flat(),I=await O?.({roomIds:T});return E(),I??T.map(()=>{})},{delay:Wu});return Object.defineProperty({logout:y,enter:d,getRoom:m,leave:v,enterRoom:a,[ei]:{notifications:{getInboxNotifications:p,getUnreadInboxNotificationsCount:h,markAllInboxNotificationsAsRead:c,markInboxNotificationAsRead:b},currentUserIdStore:g,resolveMentionSuggestions:t.resolveMentionSuggestions,cacheStore:_,usersStore:x,roomsInfoStore:A,getRoomIds(){return Array.from(f.keys())}}},ei,{enumerable:!1})}var ni=class extends Error{constructor(n,t,e){super(n),this.message=n,this.status=t,this.details=e}};function uo(n,t,e,r,i){if(typeof t!="number"||t<e||r!==void 0&&t>r)throw new Error(r!==void 0?`${n} should be between ${i??e} and ${r}.`:`${n} should be at least ${i??e}.`);return t}function Ju(n){if(n!==void 0)return uo("backgroundKeepAliveTimeout",n,Vu)}function Zu(n){return uo("throttle",n,Bu,qu)}function Xu(n){return uo("lostConnectionTimeout",n,Hu,Ku,zu)}function Cs(n,...t){let e=!1;return()=>{}}var Qu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dh=new RegExp(Object.keys(Qu).map(n=>`\\${n}`).join("|"),"g");var tf={_:"\\_","*":"\\*","#":"\\#","`":"\\`","~":"\\~","!":"\\!","|":"\\|","(":"\\(",")":"\\)","{":"\\{","}":"\\}","[":"\\[","]":"\\]"},Rh=new RegExp(Object.keys(tf).map(n=>`\\${n}`).join("|"),"g");gr(Ds,dr,uc);var ef="@liveblocks/client",nf="1.10.0",rf="esm";gr(ef,nf,rf);var ua="3.7.8",of=ua,Vn=typeof Buffer=="function",oa=typeof TextDecoder=="function"?new TextDecoder:void 0,sa=typeof TextEncoder=="function"?new TextEncoder:void 0,sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yr=Array.prototype.slice.call(sf),ai=(n=>{let t={};return n.forEach((e,r)=>t[e]=r),t})(yr),af=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ne=String.fromCharCode.bind(String),aa=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0)),fa=n=>n.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),da=n=>n.replace(/[^A-Za-z0-9\+\/]/g,""),ha=n=>{let t,e,r,i,o="",s=n.length%3;for(let f=0;f<n.length;){if((e=n.charCodeAt(f++))>255||(r=n.charCodeAt(f++))>255||(i=n.charCodeAt(f++))>255)throw new TypeError("invalid character found");t=e<<16|r<<8|i,o+=yr[t>>18&63]+yr[t>>12&63]+yr[t>>6&63]+yr[t&63]}return s?o.slice(0,s-3)+"===".substring(s):o},po=typeof btoa=="function"?n=>btoa(n):Vn?n=>Buffer.from(n,"binary").toString("base64"):ha,fo=Vn?n=>Buffer.from(n).toString("base64"):n=>{let e=[];for(let r=0,i=n.length;r<i;r+=4096)e.push(ne.apply(null,n.subarray(r,r+4096)));return po(e.join(""))},li=(n,t=!1)=>t?fa(fo(n)):fo(n),lf=n=>{if(n.length<2){var t=n.charCodeAt(0);return t<128?n:t<2048?ne(192|t>>>6)+ne(128|t&63):ne(224|t>>>12&15)+ne(128|t>>>6&63)+ne(128|t&63)}else{var t=65536+(n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320);return ne(240|t>>>18&7)+ne(128|t>>>12&63)+ne(128|t>>>6&63)+ne(128|t&63)}},cf=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,pa=n=>n.replace(cf,lf),la=Vn?n=>Buffer.from(n,"utf8").toString("base64"):sa?n=>fo(sa.encode(n)):n=>po(pa(n)),Fn=(n,t=!1)=>t?fa(la(n)):la(n),ca=n=>Fn(n,!0),uf=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,ff=n=>{switch(n.length){case 4:var t=(7&n.charCodeAt(0))<<18|(63&n.charCodeAt(1))<<12|(63&n.charCodeAt(2))<<6|63&n.charCodeAt(3),e=t-65536;return ne((e>>>10)+55296)+ne((e&1023)+56320);case 3:return ne((15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2));default:return ne((31&n.charCodeAt(0))<<6|63&n.charCodeAt(1))}},ga=n=>n.replace(uf,ff),ya=n=>{if(n=n.replace(/\s+/g,""),!af.test(n))throw new TypeError("malformed base64.");n+="==".slice(2-(n.length&3));let t,e,r,i=[];for(let o=0;o<n.length;)t=ai[n.charAt(o++)]<<18|ai[n.charAt(o++)]<<12|(e=ai[n.charAt(o++)])<<6|(r=ai[n.charAt(o++)]),e===64?i.push(ne(t>>16&255)):r===64?i.push(ne(t>>16&255,t>>8&255)):i.push(ne(t>>16&255,t>>8&255,t&255));return i.join("")},go=typeof atob=="function"?n=>atob(da(n)):Vn?n=>Buffer.from(n,"base64").toString("binary"):ya,ma=Vn?n=>aa(Buffer.from(n,"base64")):n=>aa(go(n).split("").map(t=>t.charCodeAt(0))),va=n=>ma(ba(n)),df=Vn?n=>Buffer.from(n,"base64").toString("utf8"):oa?n=>oa.decode(ma(n)):n=>ga(go(n)),ba=n=>da(n.replace(/[-_]/g,t=>t=="-"?"+":"/")),ho=n=>df(ba(n)),hf=n=>{if(typeof n!="string")return!1;let t=n.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},_a=n=>({value:n,enumerable:!1,writable:!0,configurable:!0}),wa=function(){let n=(t,e)=>Object.defineProperty(String.prototype,t,_a(e));n("fromBase64",function(){return ho(this)}),n("toBase64",function(t){return Fn(this,t)}),n("toBase64URI",function(){return Fn(this,!0)}),n("toBase64URL",function(){return Fn(this,!0)}),n("toUint8Array",function(){return va(this)})},Ea=function(){let n=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,_a(e));n("toBase64",function(t){return li(this,t)}),n("toBase64URI",function(){return li(this,!0)}),n("toBase64URL",function(){return li(this,!0)})},pf=()=>{wa(),Ea()},Hn={version:ua,VERSION:of,atob:go,atobPolyfill:ya,btoa:po,btoaPolyfill:ha,fromBase64:ho,toBase64:Fn,encode:Fn,encodeURI:ca,encodeURL:ca,utob:pa,btou:ga,decode:ho,isValid:hf,fromUint8Array:li,toUint8Array:va,extendString:wa,extendUint8Array:Ea,extendBuiltins:pf};var le=()=>new Map,ci=n=>{let t=le();return n.forEach((e,r)=>{t.set(r,e)}),t},Le=(n,t,e)=>{let r=n.get(t);return r===void 0&&n.set(t,r=e()),r},Oa=(n,t)=>{let e=[];for(let[r,i]of n)e.push(t(i,r));return e},Aa=(n,t)=>{for(let[e,r]of n)if(t(r,e))return!0;return!1};var Ge=()=>new Set;var ui=n=>n[n.length-1];var Sa=(n,t)=>{for(let e=0;e<t.length;e++)n.push(t[e])},Ce=Array.from;var mo=Array.isArray;var fi=class{constructor(){this._observers=le()}on(t,e){return Le(this._observers,t,Ge).add(e),e}once(t,e){let r=(...i)=>{this.off(t,r),e(...i)};this.on(t,r)}off(t,e){let r=this._observers.get(t);r!==void 0&&(r.delete(e),r.size===0&&this._observers.delete(t))}emit(t,e){return Ce((this._observers.get(t)||le()).values()).forEach(r=>r(...e))}destroy(){this._observers=le()}};var pe=Math.floor;var zn=Math.abs;var di=(n,t)=>n<t?n:t,We=(n,t)=>n>t?n:t,ap=Number.isNaN;var hi=n=>n!==0?n<0:1/n<0;var bo=Number.MAX_SAFE_INTEGER,lp=Number.MIN_SAFE_INTEGER,cp=1<<31;var ka=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&pe(n)===n),up=Number.isNaN,fp=Number.parseInt;var gf=String.fromCharCode,dp=String.fromCodePoint,hp=gf(65535),yf=n=>n.toLowerCase(),mf=/^\s*/g,vf=n=>n.replace(mf,""),bf=/([A-Z])/g,_o=(n,t)=>vf(n.replace(bf,e=>`${t}${yf(e)}`));var _f=n=>{let t=unescape(encodeURIComponent(n)),e=t.length,r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.codePointAt(i);return r},$n=typeof TextEncoder<"u"?new TextEncoder:null,wf=n=>$n.encode(n),xa=$n?wf:_f;var Kn=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Kn&&Kn.decode(new Uint8Array).length===1&&(Kn=null);var En=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},br=()=>new En;var Ef=n=>{let t=n.cpos;for(let e=0;e<n.bufs.length;e++)t+=n.bufs[e].length;return t};var we=n=>{let t=new Uint8Array(Ef(n)),e=0;for(let r=0;r<n.bufs.length;r++){let i=n.bufs[r];t.set(i,e),e+=i.length}return t.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),e),t},Of=(n,t)=>{let e=n.cbuf.length;e-n.cpos<t&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(We(e,t)*2),n.cpos=0)},Qt=(n,t)=>{let e=n.cbuf.length;n.cpos===e&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(e*2),n.cpos=0),n.cbuf[n.cpos++]=t};var yi=Qt;var xt=(n,t)=>{for(;t>127;)Qt(n,128|127&t),t=pe(t/128);Qt(n,127&t)},mi=(n,t)=>{let e=hi(t);for(e&&(t=-t),Qt(n,(t>63?128:0)|(e?64:0)|63&t),t=pe(t/64);t>0;)Qt(n,(t>127?128:0)|127&t),t=pe(t/128)},Eo=new Uint8Array(3e4),Af=Eo.length/3,Sf=(n,t)=>{if(t.length<Af){let e=$n.encodeInto(t,Eo).written||0;xt(n,e);for(let r=0;r<e;r++)Qt(n,Eo[r])}else ce(n,xa(t))},kf=(n,t)=>{let e=unescape(encodeURIComponent(t)),r=e.length;xt(n,r);for(let i=0;i<r;i++)Qt(n,e.codePointAt(i))},On=$n&&$n.encodeInto?Sf:kf;var _r=(n,t)=>{let e=n.cbuf.length,r=n.cpos,i=di(e-r,t.length),o=t.length-i;n.cbuf.set(t.subarray(0,i),r),n.cpos+=i,o>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(We(e*2,o)),n.cbuf.set(t.subarray(i)),n.cpos=o)},ce=(n,t)=>{xt(n,t.byteLength),_r(n,t)},Oo=(n,t)=>{Of(n,t);let e=new DataView(n.cbuf.buffer,n.cpos,t);return n.cpos+=t,e},Tf=(n,t)=>Oo(n,4).setFloat32(0,t,!1),xf=(n,t)=>Oo(n,8).setFloat64(0,t,!1),Nf=(n,t)=>Oo(n,8).setBigInt64(0,t,!1);var Ia=new DataView(new ArrayBuffer(4)),If=n=>(Ia.setFloat32(0,n),Ia.getFloat32(0)===n),Wn=(n,t)=>{switch(typeof t){case"string":Qt(n,119),On(n,t);break;case"number":ka(t)&&zn(t)<=2147483647?(Qt(n,125),mi(n,t)):If(t)?(Qt(n,124),Tf(n,t)):(Qt(n,123),xf(n,t));break;case"bigint":Qt(n,122),Nf(n,t);break;case"object":if(t===null)Qt(n,126);else if(mo(t)){Qt(n,117),xt(n,t.length);for(let e=0;e<t.length;e++)Wn(n,t[e])}else if(t instanceof Uint8Array)Qt(n,116),ce(n,t);else{Qt(n,118);let e=Object.keys(t);xt(n,e.length);for(let r=0;r<e.length;r++){let i=e[r];On(n,i),Wn(n,t[i])}}break;case"boolean":Qt(n,t?120:121);break;default:Qt(n,127)}},vr=class extends En{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&xt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}};var La=n=>{n.count>0&&(mi(n.encoder,n.count===1?n.s:-n.s),n.count>1&&xt(n.encoder,n.count-2))},An=class{constructor(){this.encoder=new En,this.s=0,this.count=0}write(t){this.s===t?this.count++:(La(this),this.count=1,this.s=t)}toUint8Array(){return La(this),we(this.encoder)}};var Ca=n=>{if(n.count>0){let t=n.diff*2+(n.count===1?0:1);mi(n.encoder,t),n.count>1&&xt(n.encoder,n.count-2)}},Yn=class{constructor(){this.encoder=new En,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Ca(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Ca(this),we(this.encoder)}},gi=class{constructor(){this.sarr=[],this.s="",this.lensE=new An}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){let t=new En;return this.sarr.push(this.s),this.s="",On(t,this.sarr.join("")),_r(t,this.lensE.toUint8Array()),we(t)}};var De=n=>new Error(n),Ee=()=>{throw De("Method unimplemented")},Oe=()=>{throw De("Unexpected case")};var Ra=De("Unexpected end of array"),Pa=De("Integer out of Range"),Jn=class{constructor(t){this.arr=t,this.pos=0}},xn=n=>new Jn(n),Ua=n=>n.pos!==n.arr.length;var Cf=(n,t)=>{let e=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,t);return n.pos+=t,e},ue=n=>Cf(n,St(n));var Sn=n=>n.arr[n.pos++];var St=n=>{let t=0,e=1,r=n.arr.length;for(;n.pos<r;){let i=n.arr[n.pos++];if(t=t+(i&127)*e,e*=128,i<128)return t;if(t>bo)throw Pa}throw Ra},bi=n=>{let t=n.arr[n.pos++],e=t&63,r=64,i=(t&64)>0?-1:1;if(!(t&128))return i*e;let o=n.arr.length;for(;n.pos<o;){if(t=n.arr[n.pos++],e=e+(t&127)*r,r*=128,t<128)return i*e;if(e>bo)throw Pa}throw Ra};var Df=n=>{let t=St(n);if(t===0)return"";{let e=String.fromCodePoint(Sn(n));if(--t<100)for(;t--;)e+=String.fromCodePoint(Sn(n));else for(;t>0;){let r=t<1e4?t:1e4,i=n.arr.subarray(n.pos,n.pos+r);n.pos+=r,e+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(e))}},Rf=n=>Kn.decode(ue(n)),kn=Kn?Rf:Df;var Ao=(n,t)=>{let e=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,t);return n.pos+=t,e},Pf=n=>Ao(n,4).getFloat32(0,!1),Uf=n=>Ao(n,8).getFloat64(0,!1),Mf=n=>Ao(n,8).getBigInt64(0,!1);var jf=[n=>{},n=>null,bi,Pf,Uf,Mf,n=>!1,n=>!0,kn,n=>{let t=St(n),e={};for(let r=0;r<t;r++){let i=kn(n);e[i]=Zn(n)}return e},n=>{let t=St(n),e=[];for(let r=0;r<t;r++)e.push(Zn(n));return e},ue],Zn=n=>jf[127-Sn(n)](n),wr=class extends Jn{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Ua(this)?this.count=St(this)+1:this.count=-1),this.count--,this.s}};var Tn=class extends Jn{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=bi(this);let t=hi(this.s);this.count=1,t&&(this.s=-this.s,this.count=St(this)+2)}return this.count--,this.s}};var Xn=class extends Jn{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let t=bi(this),e=t&1;this.diff=pe(t/2),this.count=1,e&&(this.count=St(this)+2)}return this.s+=this.diff,this.count--,this.s}},vi=class{constructor(t){this.decoder=new Tn(t),this.str=kn(this.decoder),this.spos=0}read(){let t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}};var yp=crypto.subtle,Ma=crypto.getRandomValues.bind(crypto);var So=()=>Ma(new Uint32Array(1))[0];var qf="10000000-1000-4000-8000"+-1e11,ja=()=>qf.replace(/[018]/g,n=>(n^So()&15>>n/4).toString(16));var Ba=Date.now;var ko=n=>new Promise(n);var bp=Promise.all.bind(Promise);var To=n=>n===void 0?null:n;var xo=class{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}},qa=new xo,Kf=!0;try{typeof localStorage<"u"&&localStorage&&(qa=localStorage,Kf=!1)}catch{}var Fa=qa;var Ha=Object.assign,Gf=Object.keys;var za=(n,t)=>{for(let e in n)t(n[e],e)};var Va=n=>Gf(n).length;var Ka=n=>{for(let t in n)return!1;return!0},Wf=(n,t)=>{for(let e in n)if(!t(n[e],e))return!1;return!0},Yf=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),$a=(n,t)=>n===t||Va(n)===Va(t)&&Wf(n,(e,r)=>(e!==void 0||Yf(t,r))&&t[r]===e);var Er=(n,t,e=0)=>{try{for(;e<n.length;e++)n[e](...t)}finally{e<n.length&&Er(n,t,e+1)}};var Ga=n=>n;var Wa=(n,t)=>t.includes(n);var Or=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";var _p=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,Re,Zf=[],Xf=()=>{if(Re===void 0)if(Or){Re=le();let n=process.argv,t=null;for(let e=0;e<n.length;e++){let r=n[e];r[0]==="-"?(t!==null&&Re.set(t,""),t=r):t!==null?(Re.set(t,r),t=null):Zf.push(r)}t!==null&&Re.set(t,"")}else typeof location=="object"?(Re=le(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){let[t,e]=n.split("=");Re.set(`--${_o(t,"-")}`,e),Re.set(`-${_o(t,"-")}`,e)}})):Re=le();return Re},No=n=>Xf().has(n);var Io=n=>Or?To(process.env[n.toUpperCase().replaceAll("-","_")]):To(Fa.getItem(n));var Ja=n=>No("--"+n)||Io(n)!==null,wp=Ja("production"),Qf=Or&&Wa(process.env.FORCE_COLOR,["true","1","2"]),Za=Qf||!No("--no-colors")&&!Ja("no-color")&&(!Or||process.stdout.isTTY)&&(!Or||No("--color")||Io("COLORTERM")!==null||(Io("TERM")||"").includes("color"));var ed=n=>new Uint8Array(n);var Xa=n=>{let t=ed(n.byteLength);return t.set(n),t};var Lo=class{constructor(t,e){this.left=t,this.right=e}},Pe=(n,t)=>new Lo(n,t);var Nn=typeof document<"u"?document:{};var Ep=typeof DOMParser<"u"?new DOMParser:null;var Qa=n=>Oa(n,(t,e)=>`${e}:${t};`).join("");var Op=Nn.ELEMENT_NODE,Ap=Nn.TEXT_NODE,Sp=Nn.CDATA_SECTION_NODE,kp=Nn.COMMENT_NODE,Tp=Nn.DOCUMENT_NODE,xp=Nn.DOCUMENT_TYPE_NODE,Np=Nn.DOCUMENT_FRAGMENT_NODE;var Ue=Symbol;var Ar=Ue(),Sr=Ue(),Co=Ue(),Do=Ue(),Ro=Ue(),kr=Ue(),Po=Ue(),Tr=Ue(),Uo=Ue(),tl=n=>{n.length===1&&n[0]?.constructor===Function&&(n=n[0]());let t=[],e=[],r=0;for(;r<n.length;r++){let i=n[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&e.push(t.join(""));r<n.length;r++){let i=n[r];i instanceof Symbol||e.push(i)}return e};var Ip=Ba();var ad={[Ar]:Pe("font-weight","bold"),[Sr]:Pe("font-weight","normal"),[Co]:Pe("color","blue"),[Ro]:Pe("color","green"),[Do]:Pe("color","grey"),[kr]:Pe("color","red"),[Po]:Pe("color","purple"),[Tr]:Pe("color","orange"),[Uo]:Pe("color","black")},ld=n=>{n.length===1&&n[0]?.constructor===Function&&(n=n[0]());let t=[],e=[],r=le(),i=[],o=0;for(;o<n.length;o++){let s=n[o],f=ad[s];if(f!==void 0)r.set(f.left,f.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){let l=Qa(r);o>0||l.length>0?(t.push("%c"+s),e.push(l)):t.push(s)}else break}}for(o>0&&(i=e,i.unshift(t.join("")));o<n.length;o++){let s=n[o];s instanceof Symbol||i.push(s)}return i},cd=Za?ld:tl,el=(...n)=>{console.log(...cd(n)),ud.forEach(t=>t.print(n))};var ud=Ge();var nl=n=>({[Symbol.iterator](){return this},next:n}),rl=(n,t)=>nl(()=>{let e;do e=n.next();while(!e.done&&!t(e.value));return e}),_i=(n,t)=>nl(()=>{let{done:e,value:r}=n.next();return{done:e,value:e?void 0:t(r)}});var Nr=class{constructor(t,e){this.clock=t,this.len=e}},In=class{constructor(){this.clients=new Map}},ml=(n,t,e)=>t.clients.forEach((r,i)=>{let o=n.doc.store.clients.get(i);for(let s=0;s<r.length;s++){let f=r[s];Nl(n,o,f.clock,f.len,e)}}),gd=(n,t)=>{let e=0,r=n.length-1;for(;e<=r;){let i=pe((e+r)/2),o=n[i],s=o.clock;if(s<=t){if(t<s+o.len)return i;e=i+1}else r=i-1}return null},vl=(n,t)=>{let e=n.clients.get(t.client);return e!==void 0&&gd(e,t.clock)!==null},ts=n=>{n.clients.forEach(t=>{t.sort((i,o)=>i.clock-o.clock);let e,r;for(e=1,r=1;e<t.length;e++){let i=t[r-1],o=t[e];i.clock+i.len>=o.clock?i.len=We(i.len,o.clock+o.len-i.clock):(r<e&&(t[r]=o),r++)}t.length=r})},yd=n=>{let t=new In;for(let e=0;e<n.length;e++)n[e].clients.forEach((r,i)=>{if(!t.clients.has(i)){let o=r.slice();for(let s=e+1;s<n.length;s++)Sa(o,n[s].clients.get(i)||[]);t.clients.set(i,o)}});return ts(t),t},ki=(n,t,e,r)=>{Le(n.clients,t,()=>[]).push(new Nr(e,r))},bl=()=>new In,md=n=>{let t=bl();return n.clients.forEach((e,r)=>{let i=[];for(let o=0;o<e.length;o++){let s=e[o];if(s.deleted){let f=s.id.clock,l=s.length;if(o+1<e.length)for(let u=e[o+1];o+1<e.length&&u.deleted;u=e[++o+1])l+=u.length;i.push(new Nr(f,l))}}i.length>0&&t.clients.set(r,i)}),t},rr=(n,t)=>{xt(n.restEncoder,t.clients.size),Ce(t.clients.entries()).sort((e,r)=>r[0]-e[0]).forEach(([e,r])=>{n.resetDsCurVal(),xt(n.restEncoder,e);let i=r.length;xt(n.restEncoder,i);for(let o=0;o<i;o++){let s=r[o];n.writeDsClock(s.clock),n.writeDsLen(s.len)}})},es=n=>{let t=new In,e=St(n.restDecoder);for(let r=0;r<e;r++){n.resetDsCurVal();let i=St(n.restDecoder),o=St(n.restDecoder);if(o>0){let s=Le(t.clients,i,()=>[]);for(let f=0;f<o;f++)s.push(new Nr(n.readDsClock(),n.readDsLen()))}}return t},sl=(n,t,e)=>{let r=new In,i=St(n.restDecoder);for(let o=0;o<i;o++){n.resetDsCurVal();let s=St(n.restDecoder),f=St(n.restDecoder),l=e.clients.get(s)||[],u=te(e,s);for(let a=0;a<f;a++){let d=n.readDsClock(),m=d+n.readDsLen();if(d<u){u<m&&ki(r,s,u,m-u);let v=Me(l,d),y=l[v];for(!y.deleted&&y.id.clock<d&&(l.splice(v+1,0,Mi(t,y,d-y.id.clock)),v++);v<l.length&&(y=l[v++],y.id.clock<m);)y.deleted||(m<y.id.clock+y.length&&l.splice(v,0,Mi(t,y,m-y.id.clock)),y.delete(t))}else ki(r,s,d,m-d)}}if(r.clients.size>0){let o=new Ye;return xt(o.restEncoder,0),rr(o,r),o.toUint8Array()}return null};var _l=So,Ln=class n extends fi{constructor({guid:t=ja(),collectionid:e=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:f=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=_l(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new Li,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=f,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=ko(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});let l=()=>ko(u=>{let a=d=>{(d===void 0||d===!0)&&(this.off("sync",a),u())};this.on("sync",a)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){let t=this._item;t!==null&&!this.shouldLoad&&Vt(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ce(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Vt(this,t,e)}get(t,e=Yt){let r=Le(this.share,t,()=>{let o=new e;return o._integrate(this,null),o}),i=r.constructor;if(e!==Yt&&i!==e)if(i===Yt){let o=new e;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Pi)}getText(t=""){return this.get(t,Ur)}getMap(t=""){return this.get(t,Rr)}getXmlElement(t=""){return this.get(t,Mr)}getXmlFragment(t=""){return this.get(t,er)}toJSON(){let t={};return this.share.forEach((e,r)=>{t[r]=e.toJSON()}),t}destroy(){Ce(this.subdocs).forEach(e=>e.destroy());let t=this._item;if(t!==null){this._item=null;let e=t.content;e.doc=new n({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Vt(t.parent.doc,r=>{let i=e.doc;t.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}},Ti=class{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return St(this.restDecoder)}readDsLen(){return St(this.restDecoder)}},xi=class extends Ti{readLeftID(){return Lt(St(this.restDecoder),St(this.restDecoder))}readRightID(){return Lt(St(this.restDecoder),St(this.restDecoder))}readClient(){return St(this.restDecoder)}readInfo(){return Sn(this.restDecoder)}readString(){return kn(this.restDecoder)}readParentInfo(){return St(this.restDecoder)===1}readTypeRef(){return St(this.restDecoder)}readLen(){return St(this.restDecoder)}readAny(){return Zn(this.restDecoder)}readBuf(){return Xa(ue(this.restDecoder))}readJSON(){return JSON.parse(kn(this.restDecoder))}readKey(){return kn(this.restDecoder)}},Bo=class{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=St(this.restDecoder),this.dsCurrVal}readDsLen(){let t=St(this.restDecoder)+1;return this.dsCurrVal+=t,t}},dn=class extends Bo{constructor(t){super(t),this.keys=[],St(t),this.keyClockDecoder=new Xn(ue(t)),this.clientDecoder=new Tn(ue(t)),this.leftClockDecoder=new Xn(ue(t)),this.rightClockDecoder=new Xn(ue(t)),this.infoDecoder=new wr(ue(t),Sn),this.stringDecoder=new vi(ue(t)),this.parentInfoDecoder=new wr(ue(t),Sn),this.typeRefDecoder=new Tn(ue(t)),this.lenDecoder=new Tn(ue(t))}readLeftID(){return new fn(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new fn(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Zn(this.restDecoder)}readBuf(){return ue(this.restDecoder)}readJSON(){return Zn(this.restDecoder)}readKey(){let t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{let e=this.stringDecoder.read();return this.keys.push(e),e}}},Ni=class{constructor(){this.restEncoder=br()}toUint8Array(){return we(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){xt(this.restEncoder,t)}writeDsLen(t){xt(this.restEncoder,t)}},Cn=class extends Ni{writeLeftID(t){xt(this.restEncoder,t.client),xt(this.restEncoder,t.clock)}writeRightID(t){xt(this.restEncoder,t.client),xt(this.restEncoder,t.clock)}writeClient(t){xt(this.restEncoder,t)}writeInfo(t){yi(this.restEncoder,t)}writeString(t){On(this.restEncoder,t)}writeParentInfo(t){xt(this.restEncoder,t?1:0)}writeTypeRef(t){xt(this.restEncoder,t)}writeLen(t){xt(this.restEncoder,t)}writeAny(t){Wn(this.restEncoder,t)}writeBuf(t){ce(this.restEncoder,t)}writeJSON(t){On(this.restEncoder,JSON.stringify(t))}writeKey(t){On(this.restEncoder,t)}},Ii=class{constructor(){this.restEncoder=br(),this.dsCurrVal=0}toUint8Array(){return we(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){let e=t-this.dsCurrVal;this.dsCurrVal=t,xt(this.restEncoder,e)}writeDsLen(t){t===0&&Oe(),xt(this.restEncoder,t-1),this.dsCurrVal+=t}},Ye=class extends Ii{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Yn,this.clientEncoder=new An,this.leftClockEncoder=new Yn,this.rightClockEncoder=new Yn,this.infoEncoder=new vr(yi),this.stringEncoder=new gi,this.parentInfoEncoder=new vr(yi),this.typeRefEncoder=new An,this.lenEncoder=new An}toUint8Array(){let t=br();return xt(t,0),ce(t,this.keyClockEncoder.toUint8Array()),ce(t,this.clientEncoder.toUint8Array()),ce(t,this.leftClockEncoder.toUint8Array()),ce(t,this.rightClockEncoder.toUint8Array()),ce(t,we(this.infoEncoder)),ce(t,this.stringEncoder.toUint8Array()),ce(t,we(this.parentInfoEncoder)),ce(t,this.typeRefEncoder.toUint8Array()),ce(t,this.lenEncoder.toUint8Array()),_r(t,we(this.restEncoder)),we(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Wn(this.restEncoder,t)}writeBuf(t){ce(this.restEncoder,t)}writeJSON(t){Wn(this.restEncoder,t)}writeKey(t){let e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}},vd=(n,t,e,r)=>{r=We(r,t[0].id.clock);let i=Me(t,r);xt(n.restEncoder,t.length-i),n.writeClient(e),xt(n.restEncoder,r);let o=t[i];o.write(n,r-o.id.clock);for(let s=i+1;s<t.length;s++)t[s].write(n,0)},ns=(n,t,e)=>{let r=new Map;e.forEach((i,o)=>{te(t,o)>i&&r.set(o,i)}),ji(t).forEach((i,o)=>{e.has(o)||r.set(o,0)}),xt(n.restEncoder,r.size),Ce(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{vd(n,t.clients.get(i),i,o)})},bd=(n,t)=>{let e=le(),r=St(n.restDecoder);for(let i=0;i<r;i++){let o=St(n.restDecoder),s=new Array(o),f=n.readClient(),l=St(n.restDecoder);e.set(f,{i:0,refs:s});for(let u=0;u<o;u++){let a=n.readInfo();switch(31&a){case 0:{let d=n.readLen();s[u]=new fe(Lt(f,l),d),l+=d;break}case 10:{let d=St(n.restDecoder);s[u]=new de(Lt(f,l),d),l+=d;break}default:{let d=(a&192)===0,m=new ee(Lt(f,l),null,(a&128)===128?n.readLeftID():null,null,(a&64)===64?n.readRightID():null,d?n.readParentInfo()?t.get(n.readString()):n.readLeftID():null,d&&(a&32)===32?n.readString():null,Wl(n,a));s[u]=m,l+=m.length}}}}return e},_d=(n,t,e)=>{let r=[],i=Ce(e.keys()).sort((v,y)=>v-y);if(i.length===0)return null;let o=()=>{if(i.length===0)return null;let v=e.get(i[i.length-1]);for(;v.refs.length===v.i;)if(i.pop(),i.length>0)v=e.get(i[i.length-1]);else return null;return v},s=o();if(s===null)return null;let f=new Li,l=new Map,u=(v,y)=>{let g=l.get(v);(g==null||g>y)&&l.set(v,y)},a=s.refs[s.i++],d=new Map,m=()=>{for(let v of r){let y=v.id.client,g=e.get(y);g?(g.i--,f.clients.set(y,g.refs.slice(g.i)),e.delete(y),g.i=0,g.refs=[]):f.clients.set(y,[v]),i=i.filter(p=>p!==y)}r.length=0};for(;;){if(a.constructor!==de){let y=Le(d,a.id.client,()=>te(t,a.id.client))-a.id.clock;if(y<0)r.push(a),u(a.id.client,a.id.clock-1),m();else{let g=a.getMissing(n,t);if(g!==null){r.push(a);let p=e.get(g)||{refs:[],i:0};if(p.refs.length===p.i)u(g,te(t,g)),m();else{a=p.refs[p.i++];continue}}else(y===0||y<a.length)&&(a.integrate(n,y),d.set(a.id.client,a.id.clock+a.length))}}if(r.length>0)a=r.pop();else if(s!==null&&s.i<s.refs.length)a=s.refs[s.i++];else{if(s=o(),s===null)break;a=s.refs[s.i++]}}if(f.clients.size>0){let v=new Ye;return ns(v,f,new Map),xt(v.restEncoder,0),{missing:l,update:v.toUint8Array()}}return null},wd=(n,t)=>ns(n,t.doc.store,t.beforeState),Ed=(n,t,e,r=new dn(n))=>Vt(t,i=>{i.local=!1;let o=!1,s=i.doc,f=s.store,l=bd(r,s),u=_d(i,f,l),a=f.pendingStructs;if(a){for(let[m,v]of a.missing)if(v<te(f,m)){o=!0;break}if(u){for(let[m,v]of u.missing){let y=a.missing.get(m);(y==null||y>v)&&a.missing.set(m,v)}a.update=Ci([a.update,u.update])}}else f.pendingStructs=u;let d=sl(r,i,f);if(f.pendingDs){let m=new dn(xn(f.pendingDs));St(m.restDecoder);let v=sl(m,i,f);d&&v?f.pendingDs=Ci([d,v]):f.pendingDs=d||v}else f.pendingDs=d;if(o){let m=f.pendingStructs.update;f.pendingStructs=null,wl(i.doc,m)}},e,!1);var wl=(n,t,e,r=dn)=>{let i=xn(t);Ed(i,n,e,new r(i))},El=(n,t,e)=>wl(n,t,e,xi),Od=(n,t,e=new Map)=>{ns(n,t.store,e),rr(n,md(t.store))},Ad=(n,t=new Uint8Array([0]),e=new Ye)=>{let r=Al(t);Od(e,n,r);let i=[e.toUint8Array()];if(n.store.pendingDs&&i.push(n.store.pendingDs),n.store.pendingStructs&&i.push(Md(n.store.pendingStructs.update,t)),i.length>1){if(e.constructor===Cn)return Pd(i.map((o,s)=>s===0?o:Bd(o)));if(e.constructor===Ye)return Ci(i)}return i[0]},Ol=(n,t)=>Ad(n,t,new Cn),Sd=n=>{let t=new Map,e=St(n.restDecoder);for(let r=0;r<e;r++){let i=St(n.restDecoder),o=St(n.restDecoder);t.set(i,o)}return t},Al=n=>Sd(new Ti(xn(n))),Sl=(n,t)=>(xt(n.restEncoder,t.size),Ce(t.entries()).sort((e,r)=>r[0]-e[0]).forEach(([e,r])=>{xt(n.restEncoder,e),xt(n.restEncoder,r)}),n),kd=(n,t)=>Sl(n,ji(t.store)),Td=(n,t=new Ii)=>(n instanceof Map?Sl(t,n):kd(t,n),t.toUint8Array()),kl=n=>Td(n,new Ni),qo=class{constructor(){this.l=[]}},al=()=>new qo,ll=(n,t)=>n.l.push(t),cl=(n,t)=>{let e=n.l,r=e.length;n.l=e.filter(i=>t!==i),r===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Tl=(n,t,e)=>Er(n.l,[t,e]),fn=class{constructor(t,e){this.client=t,this.clock=e}},wi=(n,t)=>n===t||n!==null&&t!==null&&n.client===t.client&&n.clock===t.clock,Lt=(n,t)=>new fn(n,t);var xd=n=>{for(let[t,e]of n.doc.share.entries())if(e===n)return t;throw Oe()};var Fo=class{constructor(t,e){this.ds=t,this.sv=e}};var Nd=(n,t)=>new Fo(n,t),Hp=Nd(bl(),new Map);var Qn=(n,t)=>t===void 0?!n.deleted:t.sv.has(n.id.client)&&(t.sv.get(n.id.client)||0)>n.id.clock&&!vl(t.ds,n.id),Vo=(n,t)=>{let e=Le(n.meta,Vo,Ge),r=n.doc.store;e.has(t)||(t.sv.forEach((i,o)=>{i<te(r,o)&&hn(n,Lt(o,i))}),ml(n,t.ds,i=>{}),e.add(t))};var Li=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},ji=n=>{let t=new Map;return n.clients.forEach((e,r)=>{let i=e[e.length-1];t.set(r,i.id.clock+i.length)}),t},te=(n,t)=>{let e=n.clients.get(t);if(e===void 0)return 0;let r=e[e.length-1];return r.id.clock+r.length},xl=(n,t)=>{let e=n.clients.get(t.id.client);if(e===void 0)e=[],n.clients.set(t.id.client,e);else{let r=e[e.length-1];if(r.id.clock+r.length!==t.id.clock)throw Oe()}e.push(t)},Me=(n,t)=>{let e=0,r=n.length-1,i=n[r],o=i.id.clock;if(o===t)return r;let s=pe(t/(o+i.length-1)*r);for(;e<=r;){if(i=n[s],o=i.id.clock,o<=t){if(t<o+i.length)return s;e=s+1}else r=s-1;s=pe((e+r)/2)}throw Oe()},Id=(n,t)=>{let e=n.clients.get(t.client);return e[Me(e,t.clock)]},Mo=Id,Ho=(n,t,e)=>{let r=Me(t,e),i=t[r];return i.id.clock<e&&i instanceof ee?(t.splice(r+1,0,Mi(n,i,e-i.id.clock)),r+1):r},hn=(n,t)=>{let e=n.doc.store.clients.get(t.client);return e[Ho(n,e,t.clock)]},ul=(n,t,e)=>{let r=t.clients.get(e.client),i=Me(r,e.clock),o=r[i];return e.clock!==o.id.clock+o.length-1&&o.constructor!==fe&&r.splice(i+1,0,Mi(n,o,e.clock-o.id.clock+1)),o},Ld=(n,t,e)=>{let r=n.clients.get(t.id.client);r[Me(r,t.id.clock)]=e},Nl=(n,t,e,r,i)=>{if(r===0)return;let o=e+r,s=Ho(n,t,e),f;do f=t[s++],o<f.id.clock+f.length&&Ho(n,t,o),i(f);while(s<t.length&&t[s].id.clock<o)},zo=class{constructor(t,e,r){this.doc=t,this.deleteSet=new In,this.beforeState=ji(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},fl=(n,t)=>t.deleteSet.clients.size===0&&!Aa(t.afterState,(e,r)=>t.beforeState.get(r)!==e)?!1:(ts(t.deleteSet),wd(n,t),rr(n,t.deleteSet),!0),dl=(n,t,e)=>{let r=t._item;(r===null||r.id.clock<(n.beforeState.get(r.id.client)||0)&&!r.deleted)&&Le(n.changed,t,Ge).add(e)},Ai=(n,t)=>{let e=n[t],r=n[t-1],i=t;for(;i>0;e=r,r=n[--i-1]){if(r.deleted===e.deleted&&r.constructor===e.constructor&&r.mergeWith(e)){e instanceof ee&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,r);continue}break}let o=t-i;return o&&n.splice(t+1-o,o),o},Cd=(n,t,e)=>{for(let[r,i]of n.clients.entries()){let o=t.clients.get(r);for(let s=i.length-1;s>=0;s--){let f=i[s],l=f.clock+f.len;for(let u=Me(o,f.clock),a=o[u];u<o.length&&a.id.clock<l;a=o[++u]){let d=o[u];if(f.clock+f.len<=d.id.clock)break;d instanceof ee&&d.deleted&&!d.keep&&e(d)&&d.gc(t,!1)}}}},Dd=(n,t)=>{n.clients.forEach((e,r)=>{let i=t.clients.get(r);for(let o=e.length-1;o>=0;o--){let s=e[o],f=di(i.length-1,1+Me(i,s.clock+s.len-1));for(let l=f,u=i[l];l>0&&u.id.clock>=s.clock;u=i[l])l-=1+Ai(i,l)}})};var Il=(n,t)=>{if(t<n.length){let e=n[t],r=e.doc,i=r.store,o=e.deleteSet,s=e._mergeStructs;try{ts(o),e.afterState=ji(e.doc.store),r.emit("beforeObserverCalls",[e,r]);let f=[];e.changed.forEach((l,u)=>f.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(e,l)})),f.push(()=>{e.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(a=>a.target._item===null||!a.target._item.deleted),l.forEach(a=>{a.currentTarget=u,a._path=null}),l.sort((a,d)=>a.path.length-d.path.length),Tl(u._dEH,l,e))})}),f.push(()=>r.emit("afterTransaction",[e,r])),Er(f,[]),e._needFormattingCleanup&&Jd(e)}finally{r.gc&&Cd(o,i,r.gcFilter),Dd(o,i),e.afterState.forEach((a,d)=>{let m=e.beforeState.get(d)||0;if(m!==a){let v=i.clients.get(d),y=We(Me(v,m),1);for(let g=v.length-1;g>=y;)g-=1+Ai(v,g)}});for(let a=s.length-1;a>=0;a--){let{client:d,clock:m}=s[a].id,v=i.clients.get(d),y=Me(v,m);y+1<v.length&&Ai(v,y+1)>1||y>0&&Ai(v,y)}if(!e.local&&e.afterState.get(r.clientID)!==e.beforeState.get(r.clientID)&&(el(Tr,Ar,"[yjs] ",Sr,kr,"Changed the client-id because another client seems to be using it."),r.clientID=_l()),r.emit("afterTransactionCleanup",[e,r]),r._observers.has("update")){let a=new Cn;fl(a,e)&&r.emit("update",[a.toUint8Array(),e.origin,r,e])}if(r._observers.has("updateV2")){let a=new Ye;fl(a,e)&&r.emit("updateV2",[a.toUint8Array(),e.origin,r,e])}let{subdocsAdded:f,subdocsLoaded:l,subdocsRemoved:u}=e;(f.size>0||u.size>0||l.size>0)&&(f.forEach(a=>{a.clientID=r.clientID,a.collectionid==null&&(a.collectionid=r.collectionid),r.subdocs.add(a)}),u.forEach(a=>r.subdocs.delete(a)),r.emit("subdocs",[{loaded:l,added:f,removed:u},r,e]),u.forEach(a=>a.destroy())),n.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,n])):Il(n,t+1)}}},Vt=(n,t,e=null,r=!0)=>{let i=n._transactionCleanups,o=!1,s=null;n._transaction===null&&(o=!0,n._transaction=new zo(n,e,r),i.push(n._transaction),i.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{s=t(n._transaction)}finally{if(o){let f=n._transaction===i[0];n._transaction=null,f&&Il(i,0)}}return s};function*Rd(n){let t=St(n.restDecoder);for(let e=0;e<t;e++){let r=St(n.restDecoder),i=n.readClient(),o=St(n.restDecoder);for(let s=0;s<r;s++){let f=n.readInfo();if(f===10){let l=St(n.restDecoder);yield new de(Lt(i,o),l),o+=l}else if(31&f){let l=(f&192)===0,u=new ee(Lt(i,o),null,(f&128)===128?n.readLeftID():null,null,(f&64)===64?n.readRightID():null,l?n.readParentInfo()?n.readString():n.readLeftID():null,l&&(f&32)===32?n.readString():null,Wl(n,f));yield u,o+=u.length}else{let l=n.readLen();yield new fe(Lt(i,o),l),o+=l}}}}var Ir=class{constructor(t,e){this.gen=Rd(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===de);return this.curr}};var Lr=class{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}},Pd=n=>Ci(n,xi,Cn);var Ud=(n,t)=>{if(n.constructor===fe){let{client:e,clock:r}=n.id;return new fe(Lt(e,r+t),n.length-t)}else if(n.constructor===de){let{client:e,clock:r}=n.id;return new de(Lt(e,r+t),n.length-t)}else{let e=n,{client:r,clock:i}=e.id;return new ee(Lt(r,i+t),null,Lt(r,i+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},Ci=(n,t=dn,e=Ye)=>{if(n.length===1)return n[0];let r=n.map(a=>new t(xn(a))),i=r.map(a=>new Ir(a,!0)),o=null,s=new e,f=new Lr(s);for(;i=i.filter(m=>m.curr!==null),i.sort((m,v)=>{if(m.curr.id.client===v.curr.id.client){let y=m.curr.id.clock-v.curr.id.clock;return y===0?m.curr.constructor===v.curr.constructor?0:m.curr.constructor===de?1:-1:y}else return v.curr.id.client-m.curr.id.client}),i.length!==0;){let a=i[0],d=a.curr.id.client;if(o!==null){let m=a.curr,v=!1;for(;m!==null&&m.id.clock+m.length<=o.struct.id.clock+o.struct.length&&m.id.client>=o.struct.id.client;)m=a.next(),v=!0;if(m===null||m.id.client!==d||v&&m.id.clock>o.struct.id.clock+o.struct.length)continue;if(d!==o.struct.id.client)cn(f,o.struct,o.offset),o={struct:m,offset:0},a.next();else if(o.struct.id.clock+o.struct.length<m.id.clock)if(o.struct.constructor===de)o.struct.length=m.id.clock+m.length-o.struct.id.clock;else{cn(f,o.struct,o.offset);let y=m.id.clock-o.struct.id.clock-o.struct.length;o={struct:new de(Lt(d,o.struct.id.clock+o.struct.length),y),offset:0}}else{let y=o.struct.id.clock+o.struct.length-m.id.clock;y>0&&(o.struct.constructor===de?o.struct.length-=y:m=Ud(m,y)),o.struct.mergeWith(m)||(cn(f,o.struct,o.offset),o={struct:m,offset:0},a.next())}}else o={struct:a.curr,offset:0},a.next();for(let m=a.curr;m!==null&&m.id.client===d&&m.id.clock===o.struct.id.clock+o.struct.length&&m.constructor!==de;m=a.next())cn(f,o.struct,o.offset),o={struct:m,offset:0}}o!==null&&(cn(f,o.struct,o.offset),o=null),rs(f);let l=r.map(a=>es(a)),u=yd(l);return rr(s,u),s.toUint8Array()},Md=(n,t,e=dn,r=Ye)=>{let i=Al(t),o=new r,s=new Lr(o),f=new e(xn(n)),l=new Ir(f,!1);for(;l.curr;){let a=l.curr,d=a.id.client,m=i.get(d)||0;if(l.curr.constructor===de){l.next();continue}if(a.id.clock+a.length>m)for(cn(s,a,We(m-a.id.clock,0)),l.next();l.curr&&l.curr.id.client===d;)cn(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===d&&l.curr.id.clock+l.curr.length<=m;)l.next()}rs(s);let u=es(f);return rr(o,u),o.toUint8Array()};var Ll=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:we(n.encoder.restEncoder)}),n.encoder.restEncoder=br(),n.written=0)},cn=(n,t,e)=>{n.written>0&&n.currClient!==t.id.client&&Ll(n),n.written===0&&(n.currClient=t.id.client,n.encoder.writeClient(t.id.client),xt(n.encoder.restEncoder,t.id.clock+e)),t.write(n.encoder,e),n.written++},rs=n=>{Ll(n);let t=n.encoder.restEncoder;xt(t,n.clientStructs.length);for(let e=0;e<n.clientStructs.length;e++){let r=n.clientStructs[e];xt(t,r.written),_r(t,r.restEncoder)}},jd=(n,t,e,r)=>{let i=new e(xn(n)),o=new Ir(i,!1),s=new r,f=new Lr(s);for(let u=o.curr;u!==null;u=o.next())cn(f,t(u),0);rs(f);let l=es(i);return rr(s,l),s.toUint8Array()};var Bd=n=>jd(n,Ga,dn,Cn),hl="You must not compute changes after the event-handler fired.",tr=class{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=qd(this.currentTarget,this.target))}deletes(t){return vl(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw De(hl);let t=new Map,e=this.target;this.transaction.changed.get(e).forEach(i=>{if(i!==null){let o=e._map.get(i),s,f;if(this.adds(o)){let l=o.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(o))if(l!==null&&this.deletes(l))s="delete",f=ui(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",f=ui(l.content.getContent())):(s="add",f=void 0)}else if(this.deletes(o))s="delete",f=ui(o.content.getContent());else return;t.set(i,{action:s,oldValue:f})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw De(hl);let e=this.target,r=Ge(),i=Ge(),o=[];if(t={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let f=null,l=()=>{f&&o.push(f)};for(let u=e._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((f===null||f.delete===void 0)&&(l(),f={delete:0}),f.delete+=u.length,i.add(u)):this.adds(u)?((f===null||f.insert===void 0)&&(l(),f={insert:[]}),f.insert=f.insert.concat(u.content.getContent()),r.add(u)):((f===null||f.retain===void 0)&&(l(),f={retain:0}),f.retain+=u.length);f!==null&&f.retain===void 0&&l()}this._changes=t}return t}},qd=(n,t)=>{let e=[];for(;t._item!==null&&t!==n;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let r=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)i.deleted||r++,i=i.right;e.unshift(r)}t=t._item.parent}return e},Cl=80,is=0,Ko=class{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=is++}},Fd=n=>{n.timestamp=is++},Dl=(n,t,e)=>{n.p.marker=!1,n.p=t,t.marker=!0,n.index=e,n.timestamp=is++},Vd=(n,t,e)=>{if(n.length>=Cl){let r=n.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return Dl(r,t,e),r}else{let r=new Ko(t,e);return n.push(r),r}},Bi=(n,t)=>{if(n._start===null||t===0||n._searchMarker===null)return null;let e=n._searchMarker.length===0?null:n._searchMarker.reduce((o,s)=>zn(t-o.index)<zn(t-s.index)?o:s),r=n._start,i=0;for(e!==null&&(r=e.p,i=e.index,Fd(e));r.right!==null&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>t;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return e!==null&&zn(e.index-i)<r.parent.length/Cl?(Dl(e,r,i),e):Vd(n._searchMarker,r,i)},Cr=(n,t,e)=>{for(let r=n.length-1;r>=0;r--){let i=n[r];if(e>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){n.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||e>0&&t===i.index)&&(i.index=We(t,i.index+e))}};var qi=(n,t,e)=>{let r=n,i=t.changedParentTypes;for(;Le(i,n,()=>[]).push(e),n._item!==null;)n=n._item.parent;Tl(r._eH,e,t)},Yt=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=al(),this._dEH=al(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw Ee()}clone(){throw Ee()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){ll(this._eH,t)}observeDeep(t){ll(this._dEH,t)}unobserve(t){cl(this._eH,t)}unobserveDeep(t){cl(this._dEH,t)}toJSON(){}},Rl=(n,t,e)=>{t<0&&(t=n._length+t),e<0&&(e=n._length+e);let r=e-t,i=[],o=n._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){let s=o.content.getContent();if(s.length<=t)t-=s.length;else{for(let f=t;f<s.length&&r>0;f++)i.push(s[f]),r--;t=0}}o=o.right}return i},Pl=n=>{let t=[],e=n._start;for(;e!==null;){if(e.countable&&!e.deleted){let r=e.content.getContent();for(let i=0;i<r.length;i++)t.push(r[i])}e=e.right}return t};var Dr=(n,t)=>{let e=0,r=n._start;for(;r!==null;){if(r.countable&&!r.deleted){let i=r.content.getContent();for(let o=0;o<i.length;o++)t(i[o],e++,n)}r=r.right}},Ul=(n,t)=>{let e=[];return Dr(n,(r,i)=>{e.push(t(r,i,n))}),e},Hd=n=>{let t=n._start,e=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),r=0,t=t.right}let i=e[r++];return e.length<=r&&(e=null),{done:!1,value:i}}}},Ml=(n,t)=>{let e=Bi(n,t),r=n._start;for(e!==null&&(r=e.p,t-=e.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Di=(n,t,e,r)=>{let i=e,o=n.doc,s=o.clientID,f=o.store,l=e===null?t._start:e.right,u=[],a=()=>{u.length>0&&(i=new ee(Lt(s,te(f,s)),i,i&&i.lastId,l,l&&l.id,t,null,new nr(u)),i.integrate(n,0),u=[])};r.forEach(d=>{if(d===null)u.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(d);break;default:switch(a(),d.constructor){case Uint8Array:case ArrayBuffer:i=new ee(Lt(s,te(f,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Br(new Uint8Array(d))),i.integrate(n,0);break;case Ln:i=new ee(Lt(s,te(f,s)),i,i&&i.lastId,l,l&&l.id,t,null,new qr(d)),i.integrate(n,0);break;default:if(d instanceof Yt)i=new ee(Lt(s,te(f,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Ze(d)),i.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),a()},jl=()=>De("Length exceeded!"),Bl=(n,t,e,r)=>{if(e>t._length)throw jl();if(e===0)return t._searchMarker&&Cr(t._searchMarker,e,r.length),Di(n,t,null,r);let i=e,o=Bi(t,e),s=t._start;for(o!==null&&(s=o.p,e-=o.index,e===0&&(s=s.prev,e+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(e<=s.length){e<s.length&&hn(n,Lt(s.id.client,s.id.clock+e));break}e-=s.length}return t._searchMarker&&Cr(t._searchMarker,i,r.length),Di(n,t,s,r)},zd=(n,t,e)=>{let i=(t._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return Di(n,t,i,e)},ql=(n,t,e,r)=>{if(r===0)return;let i=e,o=r,s=Bi(t,e),f=t._start;for(s!==null&&(f=s.p,e-=s.index);f!==null&&e>0;f=f.right)!f.deleted&&f.countable&&(e<f.length&&hn(n,Lt(f.id.client,f.id.clock+e)),e-=f.length);for(;r>0&&f!==null;)f.deleted||(r<f.length&&hn(n,Lt(f.id.client,f.id.clock+r)),f.delete(n),r-=f.length),f=f.right;if(r>0)throw jl();t._searchMarker&&Cr(t._searchMarker,i,-o+r)},Ri=(n,t,e)=>{let r=t._map.get(e);r!==void 0&&r.delete(n)},os=(n,t,e,r)=>{let i=t._map.get(e)||null,o=n.doc,s=o.clientID,f;if(r==null)f=new nr([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:f=new nr([r]);break;case Uint8Array:f=new Br(r);break;case Ln:f=new qr(r);break;default:if(r instanceof Yt)f=new Ze(r);else throw new Error("Unexpected content type")}new ee(Lt(s,te(o.store,s)),i,i&&i.lastId,null,null,t,e,f).integrate(n,0)},ss=(n,t)=>{let e=n._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},Fl=n=>{let t={};return n._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},Vl=(n,t)=>{let e=n._map.get(t);return e!==void 0&&!e.deleted};var Kd=(n,t)=>{let e={};return n._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&Qn(o,t)&&(e[i]=o.content.getContent()[o.length-1])}),e},Ei=n=>rl(n.entries(),t=>!t[1].deleted),$o=class extends tr{constructor(t,e){super(t,e),this._transaction=e}},Pi=class n extends Yt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){let e=new n;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new n}clone(){let t=new n;return t.insert(0,this.toArray().map(e=>e instanceof Yt?e.clone():e)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),qi(this,t,new $o(this,t))}insert(t,e){this.doc!==null?Vt(this.doc,r=>{Bl(r,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?Vt(this.doc,e=>{zd(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?Vt(this.doc,r=>{ql(r,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return Ml(this,t)}toArray(){return Pl(this)}slice(t=0,e=this.length){return Rl(this,t,e)}toJSON(){return this.map(t=>t instanceof Yt?t.toJSON():t)}map(t){return Ul(this,t)}forEach(t){Dr(this,t)}[Symbol.iterator](){return Hd(this)}_write(t){t.writeTypeRef(dh)}},$d=n=>new Pi,Go=class extends tr{constructor(t,e,r){super(t,e),this.keysChanged=r}},Rr=class n extends Yt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new n}clone(){let t=new n;return this.forEach((e,r)=>{t.set(r,e instanceof Yt?e.clone():e)}),t}_callObserver(t,e){qi(this,t,new Go(this,t,e))}toJSON(){let t={};return this._map.forEach((e,r)=>{if(!e.deleted){let i=e.content.getContent()[e.length-1];t[r]=i instanceof Yt?i.toJSON():i}}),t}get size(){return[...Ei(this._map)].length}keys(){return _i(Ei(this._map),t=>t[0])}values(){return _i(Ei(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return _i(Ei(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((e,r)=>{e.deleted||t(e.content.getContent()[e.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Vt(this.doc,e=>{Ri(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?Vt(this.doc,r=>{os(r,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return ss(this,t)}has(t){return Vl(this,t)}clear(){this.doc!==null?Vt(this.doc,t=>{this.forEach(function(e,r,i){Ri(t,i,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(hh)}},Gd=n=>new Rr,un=(n,t)=>n===t||typeof n=="object"&&typeof t=="object"&&n&&t&&$a(n,t),Pr=class{constructor(t,e,r,i){this.left=t,this.right=e,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Oe(),this.right.content.constructor){case Jt:this.right.deleted||ir(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}},pl=(n,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case Jt:t.right.deleted||ir(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&hn(n,Lt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Oi=(n,t,e,r)=>{let i=new Map,o=r?Bi(t,e):null;if(o){let s=new Pr(o.p.left,o.p,o.index,i);return pl(n,s,e-o.index)}else{let s=new Pr(null,t._start,0,i);return pl(n,s,e)}},Hl=(n,t,e,r)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===Jt&&un(r.get(e.right.content.key),e.right.content.value));)e.right.deleted||r.delete(e.right.content.key),e.forward();let i=n.doc,o=i.clientID;r.forEach((s,f)=>{let l=e.left,u=e.right,a=new ee(Lt(o,te(i.store,o)),l,l&&l.lastId,u,u&&u.id,t,null,new Jt(f,s));a.integrate(n,0),e.right=a,e.forward()})},ir=(n,t)=>{let{key:e,value:r}=t;r===null?n.delete(e):n.set(e,r)},zl=(n,t)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===Jt&&un(t[n.right.content.key]||null,n.right.content.value)))break;n.forward()}},Kl=(n,t,e,r)=>{let i=n.doc,o=i.clientID,s=new Map;for(let f in r){let l=r[f],u=e.currentAttributes.get(f)||null;if(!un(u,l)){s.set(f,u);let{left:a,right:d}=e;e.right=new ee(Lt(o,te(i.store,o)),a,a&&a.lastId,d,d&&d.id,t,null,new Jt(f,l)),e.right.integrate(n,0),e.forward()}}return s},jo=(n,t,e,r,i)=>{e.currentAttributes.forEach((m,v)=>{i[v]===void 0&&(i[v]=null)});let o=n.doc,s=o.clientID;zl(e,i);let f=Kl(n,t,e,i),l=r.constructor===String?new Je(r):r instanceof Yt?new Ze(r):new Dn(r),{left:u,right:a,index:d}=e;t._searchMarker&&Cr(t._searchMarker,e.index,l.getLength()),a=new ee(Lt(s,te(o.store,s)),u,u&&u.lastId,a,a&&a.id,t,null,l),a.integrate(n,0),e.right=a,e.index=d,e.forward(),Hl(n,t,e,f)},gl=(n,t,e,r,i)=>{let o=n.doc,s=o.clientID;zl(e,i);let f=Kl(n,t,e,i);t:for(;e.right!==null&&(r>0||f.size>0&&(e.right.deleted||e.right.content.constructor===Jt));){if(!e.right.deleted)switch(e.right.content.constructor){case Jt:{let{key:l,value:u}=e.right.content,a=i[l];if(a!==void 0){if(un(a,u))f.delete(l);else{if(r===0)break t;f.set(l,u)}e.right.delete(n)}else e.currentAttributes.set(l,u);break}default:r<e.right.length&&hn(n,Lt(e.right.id.client,e.right.id.clock+r)),r-=e.right.length;break}e.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;e.right=new ee(Lt(s,te(o.store,s)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new Je(l)),e.right.integrate(n,0),e.forward()}Hl(n,t,e,f)},$l=(n,t,e,r,i)=>{let o=t,s=le();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===Jt){let u=o.content;s.set(u.key,u)}o=o.right}let f=0,l=!1;for(;t!==o;){if(e===t&&(l=!0),!t.deleted){let u=t.content;switch(u.constructor){case Jt:{let{key:a,value:d}=u,m=r.get(a)||null;(s.get(a)!==u||m===d)&&(t.delete(n),f++,!l&&(i.get(a)||null)===d&&m!==d&&(m===null?i.delete(a):i.set(a,m))),!l&&!t.deleted&&ir(i,u);break}}}t=t.right}return f},Wd=(n,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;let e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Jt){let r=t.content.key;e.has(r)?t.delete(n):e.add(r)}t=t.left}},Yd=n=>{let t=0;return Vt(n.doc,e=>{let r=n._start,i=n._start,o=le(),s=ci(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Jt:ir(s,i.content);break;default:t+=$l(e,r,i,o,s),o=ci(s),r=i;break}i=i.right}}),t},Jd=n=>{let t=new Set,e=n.doc;for(let[r,i]of n.afterState.entries()){let o=n.beforeState.get(r)||0;i!==o&&Nl(n,e.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===Jt&&s.constructor!==fe&&t.add(s.parent)})}Vt(e,r=>{ml(n,n.deleteSet,i=>{if(i instanceof fe||!i.parent._hasFormatting||t.has(i.parent))return;let o=i.parent;i.content.constructor===Jt?t.add(o):Wd(r,i)});for(let i of t)Yd(i)})},yl=(n,t,e)=>{let r=e,i=ci(t.currentAttributes),o=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Ze:case Dn:case Je:e<t.right.length&&hn(n,Lt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(n);break}t.forward()}o&&$l(n,o,t.right,i,t.currentAttributes);let s=(t.left||t.right).parent;return s._searchMarker&&Cr(s._searchMarker,t.index,-r+e),t},Wo=class extends tr{constructor(t,e,r){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){let t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){let t=this.target.doc,e=[];Vt(t,r=>{let i=new Map,o=new Map,s=this.target._start,f=null,l={},u="",a=0,d=0,m=()=>{if(f!==null){let v=null;switch(f){case"delete":d>0&&(v={delete:d}),d=0;break;case"insert":(typeof u=="object"||u.length>0)&&(v={insert:u},i.size>0&&(v.attributes={},i.forEach((y,g)=>{y!==null&&(v.attributes[g]=y)}))),u="";break;case"retain":a>0&&(v={retain:a},Ka(l)||(v.attributes=Ha({},l))),a=0;break}v&&e.push(v),f=null}};for(;s!==null;){switch(s.content.constructor){case Ze:case Dn:this.adds(s)?this.deletes(s)||(m(),f="insert",u=s.content.getContent()[0],m()):this.deletes(s)?(f!=="delete"&&(m(),f="delete"),d+=1):s.deleted||(f!=="retain"&&(m(),f="retain"),a+=1);break;case Je:this.adds(s)?this.deletes(s)||(f!=="insert"&&(m(),f="insert"),u+=s.content.str):this.deletes(s)?(f!=="delete"&&(m(),f="delete"),d+=s.length):s.deleted||(f!=="retain"&&(m(),f="retain"),a+=s.length);break;case Jt:{let{key:v,value:y}=s.content;if(this.adds(s)){if(!this.deletes(s)){let g=i.get(v)||null;un(g,y)?y!==null&&s.delete(r):(f==="retain"&&m(),un(y,o.get(v)||null)?delete l[v]:l[v]=y)}}else if(this.deletes(s)){o.set(v,y);let g=i.get(v)||null;un(g,y)||(f==="retain"&&m(),l[v]=g)}else if(!s.deleted){o.set(v,y);let g=l[v];g!==void 0&&(un(g,y)?g!==null&&s.delete(r):(f==="retain"&&m(),y===null?delete l[v]:l[v]=y))}s.deleted||(f==="insert"&&m(),ir(i,s.content));break}}s=s.right}for(m();e.length>0;){let v=e[e.length-1];if(v.retain!==void 0&&v.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}},Ur=class n extends Yt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new n}clone(){let t=new n;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);let r=new Wo(this,t,e);qi(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===Je&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?Vt(this.doc,r=>{let i=new Pr(null,this._start,0,new Map);for(let o=0;o<t.length;o++){let s=t[o];if(s.insert!==void 0){let f=!e&&typeof s.insert=="string"&&o===t.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof f!="string"||f.length>0)&&jo(r,this,i,f,s.attributes||{})}else s.retain!==void 0?gl(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&yl(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,r){let i=[],o=new Map,s=this.doc,f="",l=this._start;function u(){if(f.length>0){let d={},m=!1;o.forEach((y,g)=>{m=!0,d[g]=y});let v={insert:f};m&&(v.attributes=d),i.push(v),f=""}}let a=()=>{for(;l!==null;){if(Qn(l,t)||e!==void 0&&Qn(l,e))switch(l.content.constructor){case Je:{let d=o.get("ychange");t!==void 0&&!Qn(l,t)?(d===void 0||d.user!==l.id.client||d.type!=="removed")&&(u(),o.set("ychange",r?r("removed",l.id):{type:"removed"})):e!==void 0&&!Qn(l,e)?(d===void 0||d.user!==l.id.client||d.type!=="added")&&(u(),o.set("ychange",r?r("added",l.id):{type:"added"})):d!==void 0&&(u(),o.delete("ychange")),f+=l.content.str;break}case Ze:case Dn:{u();let d={insert:l.content.getContent()[0]};if(o.size>0){let m={};d.attributes=m,o.forEach((v,y)=>{m[y]=v})}i.push(d);break}case Jt:Qn(l,t)&&(u(),ir(o,l.content));break}l=l.right}u()};return t||e?Vt(s,d=>{t&&Vo(d,t),e&&Vo(d,e),a()},"cleanup"):a(),i}insert(t,e,r){if(e.length<=0)return;let i=this.doc;i!==null?Vt(i,o=>{let s=Oi(o,this,t,!r);r||(r={},s.currentAttributes.forEach((f,l)=>{r[l]=f})),jo(o,this,s,e,r)}):this._pending.push(()=>this.insert(t,e,r))}insertEmbed(t,e,r){let i=this.doc;i!==null?Vt(i,o=>{let s=Oi(o,this,t,!r);jo(o,this,s,e,r||{})}):this._pending.push(()=>this.insertEmbed(t,e,r||{}))}delete(t,e){if(e===0)return;let r=this.doc;r!==null?Vt(r,i=>{yl(i,Oi(i,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,r){if(e===0)return;let i=this.doc;i!==null?Vt(i,o=>{let s=Oi(o,this,t,!1);s.right!==null&&gl(o,this,s,e,r)}):this._pending.push(()=>this.format(t,e,r))}removeAttribute(t){this.doc!==null?Vt(this.doc,e=>{Ri(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?Vt(this.doc,r=>{os(r,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return ss(this,t)}getAttributes(){return Fl(this)}_write(t){t.writeTypeRef(ph)}},Zd=n=>new Ur,xr=class{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===Mr||e.constructor===er)&&e._start!==null)t=e._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}},er=class n extends Yt{constructor(){super(),this._prelimContent=[]}get firstChild(){let t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new n}clone(){let t=new n;return t.insert(0,this.toArray().map(e=>e instanceof Yt?e.clone():e)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new xr(this,t)}querySelector(t){t=t.toUpperCase();let r=new xr(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Ce(new xr(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){qi(this,t,new Yo(this,e,t))}toString(){return Ul(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},r){let i=t.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Dr(this,o=>{i.insertBefore(o.toDOM(t,e,r),null)}),i}insert(t,e){this.doc!==null?Vt(this.doc,r=>{Bl(r,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)Vt(this.doc,r=>{let i=t&&t instanceof Yt?t._item:t;Di(r,this,i,e)});else{let r=this._prelimContent,i=t===null?0:r.findIndex(o=>o===t)+1;if(i===0&&t!==null)throw De("Reference item not found");r.splice(i,0,...e)}}delete(t,e=1){this.doc!==null?Vt(this.doc,r=>{ql(r,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return Pl(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Ml(this,t)}slice(t=0,e=this.length){return Rl(this,t,e)}forEach(t){Dr(this,t)}_write(t){t.writeTypeRef(yh)}},Xd=n=>new er,Mr=class n extends er{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){let t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){let t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new n(this.nodeName)}clone(){let t=new n(this.nodeName),e=this.getAttributes();return za(e,(r,i)=>{typeof r=="string"&&t.setAttribute(i,r)}),t.insert(0,this.toArray().map(r=>r instanceof Yt?r.clone():r)),t}toString(){let t=this.getAttributes(),e=[],r=[];for(let f in t)r.push(f);r.sort();let i=r.length;for(let f=0;f<i;f++){let l=r[f];e.push(l+'="'+t[l]+'"')}let o=this.nodeName.toLocaleLowerCase(),s=e.length>0?" "+e.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Vt(this.doc,e=>{Ri(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?Vt(this.doc,r=>{os(r,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return ss(this,t)}hasAttribute(t){return Vl(this,t)}getAttributes(t){return t?Kd(this,t):Fl(this)}toDOM(t=document,e={},r){let i=t.createElement(this.nodeName),o=this.getAttributes();for(let s in o){let f=o[s];typeof f=="string"&&i.setAttribute(s,f)}return Dr(this,s=>{i.appendChild(s.toDOM(t,e,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(gh),t.writeKey(this.nodeName)}},Qd=n=>new Mr(n.readKey()),Yo=class extends tr{constructor(t,e,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}},Jo=class n extends Rr{constructor(t){super(),this.hookName=t}_copy(){return new n(this.hookName)}clone(){let t=new n(this.hookName);return this.forEach((e,r)=>{t.set(r,e)}),t}toDOM(t=document,e={},r){let i=e[this.hookName],o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(mh),t.writeKey(this.hookName)}},th=n=>new Jo(n.readKey()),Zo=class n extends Ur{get nextSibling(){let t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){let t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new n}clone(){let t=new n;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,r){let i=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{let e=[];for(let i in t.attributes){let o=[];for(let s in t.attributes[i])o.push({key:s,value:t.attributes[i][s]});o.sort((s,f)=>s.key<f.key?-1:1),e.push({nodeName:i,attrs:o})}e.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<e.length;i++){let o=e[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){let f=o.attrs[s];r+=` ${f.key}="${f.value}"`}r+=">"}r+=t.insert;for(let i=e.length-1;i>=0;i--)r+=`</${e[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(vh)}},eh=n=>new Zo,jr=class{constructor(t,e){this.id=t,this.length=e}get deleted(){throw Ee()}mergeWith(t){return!1}write(t,e,r){throw Ee()}integrate(t,e){throw Ee()}},nh=0,fe=class extends jr{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),xl(t.doc.store,this)}write(t,e){t.writeInfo(nh),t.writeLen(this.length-e)}getMissing(t,e){return null}},Br=class n{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new n(this.content)}splice(t){throw Ee()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}},rh=n=>new Br(n.readBuf()),Ui=class n{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new n(this.len)}splice(t){let e=new n(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){ki(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}},ih=n=>new Ui(n.readLen()),Gl=(n,t)=>new Ln({guid:n,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1}),qr=class n{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;let e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new n(Gl(this.doc.guid,this.opts))}splice(t){throw Ee()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}},oh=n=>new qr(Gl(n.readString(),n.readAny())),Dn=class n{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new n(this.embed)}splice(t){throw Ee()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}},sh=n=>new Dn(n.readJSON()),Jt=class n{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new n(this.key,this.value)}splice(t){throw Ee()}mergeWith(t){return!1}integrate(t,e){let r=e.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}},ah=n=>new Jt(n.readKey(),n.readJSON()),Xo=class n{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new n(this.arr)}splice(t){let e=new n(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){let r=this.arr.length;t.writeLen(r-e);for(let i=e;i<r;i++){let o=this.arr[i];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}},lh=n=>{let t=n.readLen(),e=[];for(let r=0;r<t;r++){let i=n.readString();i==="undefined"?e.push(void 0):e.push(JSON.parse(i))}return new Xo(e)},nr=class n{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new n(this.arr)}splice(t){let e=new n(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){let r=this.arr.length;t.writeLen(r-e);for(let i=e;i<r;i++){let o=this.arr[i];t.writeAny(o)}}getRef(){return 8}},ch=n=>{let t=n.readLen(),e=[];for(let r=0;r<t;r++)e.push(n.readAny());return new nr(e)},Je=class n{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new n(this.str)}splice(t){let e=new n(this.str.slice(t));this.str=this.str.slice(0,t);let r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",e.str="\uFFFD"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}},uh=n=>new Je(n.readString()),fh=[$d,Gd,Zd,Qd,Xd,th,eh],dh=0,hh=1,ph=2,gh=3,yh=4,mh=5,vh=6,Ze=class n{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new n(this.type._copy())}splice(t){throw Ee()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}},bh=n=>new Ze(fh[n.readTypeRef()](n));var Mi=(n,t,e)=>{let{client:r,clock:i}=t.id,o=new ee(Lt(r,i+e),t,Lt(r,i+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Lt(t.redone.client,t.redone.clock+e)),t.right=o,o.right!==null&&(o.right.left=o),n._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=e,o};var ee=class n extends jr{constructor(t,e,r,i,o,s,f,l){super(t,l.getLength()),this.origin=r,this.left=e,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=f,this.redone=null,this.content=l,this.info=this.content.isCountable()?2:0}set marker(t){(this.info&8)>0!==t&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(t){this.keep!==t&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(t){this.deleted!==t&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=te(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=te(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===fn&&this.id.client!==this.parent.client&&this.parent.clock>=te(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ul(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=hn(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===fe||this.right&&this.right.constructor===fe)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===n&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===fn){let r=Mo(e,this.parent);r.constructor===fe?this.parent=null:this.parent=r.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=ul(t,t.doc.store,Lt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;let o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),wi(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(wi(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(Mo(t.doc.store,i.origin)))o.has(Mo(t.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){let r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),xl(t.doc.store,this),this.content.integrate(t,this),dl(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new fe(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Lt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&wi(t.origin,this.lastId)&&this.right===t&&wi(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){let e=this.parent._searchMarker;return e&&e.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){let e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),ki(t.deleteSet,this.id.client,this.id.clock,this.length),dl(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw Oe();this.content.gc(t),e?Ld(t,this,new fe(this.id,this.length)):this.content=new Ui(this.length)}write(t,e){let r=e>0?Lt(this.id.client,this.id.clock+e-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&31|(r===null?0:128)|(i===null?0:64)|(o===null?0:32);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),i!==null&&t.writeRightID(i),r===null&&i===null){let f=this.parent;if(f._item!==void 0){let l=f._item;if(l===null){let u=xd(f);t.writeParentInfo(!0),t.writeString(u)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else f.constructor===String?(t.writeParentInfo(!0),t.writeString(f)):f.constructor===fn?(t.writeParentInfo(!1),t.writeLeftID(f)):Oe();o!==null&&t.writeString(o)}this.content.write(t,e)}},Wl=(n,t)=>_h[t&31](n),_h=[()=>{Oe()},ih,lh,rh,uh,sh,ah,bh,ch,oh,()=>{Oe()}],wh=10,de=class extends jr{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){Oe()}write(t,e){t.writeInfo(wh),xt(t.restEncoder,this.length-e)}getMissing(t,e){return null}},Yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Jl="__ $YJS$ __";Yl[Jl]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Yl[Jl]=!0;var as=()=>new Map,Eh=(n,t,e)=>{let r=n.get(t);return r===void 0&&n.set(t,r=e()),r},Oh=()=>new Set,Ah=Array.from,Kp=Array.isArray,ls=class{constructor(){this._observers=as()}on(n,t){Eh(this._observers,n,Oh).add(t)}once(n,t){let e=(...r)=>{this.off(n,e),t(...r)};this.on(n,e)}off(n,t){let e=this._observers.get(n);e!==void 0&&(e.delete(t),e.size===0&&this._observers.delete(n))}emit(n,t){return Ah((this._observers.get(n)||as()).values()).forEach(e=>e(...t))}destroy(){this._observers=as()}},je="__yjs",Sh=class extends ls{constructor(n,t){super(),this.states=new Map,this.meta=new Map,this._checkInterval=0,this.doc=n,this.room=t,this.clientID=n.clientID,this.othersUnsub=this.room.events.others.subscribe(e=>{e.type==="leave"&&(this.emit("change",[{added:[],updated:[],removed:[e.user.connectionId]},"presence"]),this.emit("update",[{added:[],updated:[],removed:[e.user.connectionId]},"presence"])),e.type==="enter"&&(this.emit("change",[{added:[e.user.connectionId],updated:[],removed:[]},"presence"]),this.emit("update",[{added:[e.user.connectionId],updated:[],removed:[]},"presence"])),e.type==="update"&&(this.emit("change",[{added:[],updated:[e.user.connectionId],removed:[]},"presence"]),this.emit("update",[{added:[],updated:[e.user.connectionId],removed:[]},"presence"]))})}destroy(){this.emit("destroy",[this]),this.othersUnsub(),this.setLocalState(null),super.destroy()}getLocalState(){let n=this.room.getPresence();return Object.keys(n).length===0||typeof n[je]>"u"?null:n[je]}setLocalState(n){let t=this.room.getSelf()?.presence;if(n===null){if(t===void 0)return;this.room.updatePresence({...t,[je]:null}),this.emit("update",[{added:[],updated:[],removed:[this.clientID]},"local"]);return}let e=t?.[je],r=e===void 0?[this.clientID]:[],i=e===void 0?[]:[this.clientID];this.room.updatePresence({[je]:{...e||{},...n||{}}}),this.emit("update",[{added:r,updated:i,removed:[]},"local"])}setLocalStateField(n,t){let e=this.room.getSelf()?.presence[je],r={[n]:t};this.room.updatePresence({[je]:{...e||{},...r}})}getStates(){let n=this.room.getOthers(),t=this.room.getSelf()?.presence[je],e=n.reduce((r,i)=>(i.connectionId&&i.presence[je]!==void 0&&r.set(i.connectionId,i.presence[je]||{}),r),new Map);return t!==void 0&&e.set(this.clientID,t),e}},Xl=class extends ls{constructor({doc:n,isRoot:t,updateDoc:e,fetchDoc:r}){super(),this.unsubscribers=[],this._synced=!1,this.handleServerUpdate=({update:i,stateVector:o})=>{if(El(this.doc,Hn.toUint8Array(i),"backend"),o){try{let s=Ol(this.doc,Hn.toUint8Array(o));this.updateRoomDoc(Hn.fromUint8Array(s))}catch(s){console.warn(s)}this.synced=!0}},this.syncDoc=()=>{this.synced=!1;let i=Hn.fromUint8Array(kl(this.doc));this.fetchRoomDoc(i)},this.updateHandler=(i,o)=>{if(o!=="backend"){let s=Hn.fromUint8Array(i);this.updateRoomDoc(s)}},this.doc=n,this.doc.on("update",this.updateHandler),this.updateRoomDoc=i=>{e(i,t?void 0:this.doc.guid)},this.fetchRoomDoc=i=>{r(i,t?void 0:this.doc.guid)},this.syncDoc()}get synced(){return this._synced}set synced(n){this._synced!==n&&(this._synced=n,this.emit("synced",[n]),this.emit("sync",[n]))}destroy(){this.doc.off("update",this.updateHandler),this.unsubscribers.forEach(n=>n()),this._observers=new Map,this.doc.destroy()}},kh="@liveblocks/yjs",Th="1.10.0",xh="esm";gr(kh,Th,xh);var Nh={autoloadSubdocs:!1},Ql=class extends ls{constructor(n,t,e=Nh){super(),this.unsubscribers=[],this.subdocHandlers=new Map,this.handleSubdocs=({loaded:i,removed:o,added:s})=>{if(i.forEach(this.createSubdocHandler),this.options.autoloadSubdocs)for(let f of s)this.subdocHandlers.has(f.guid)||f.load();for(let f of o)this.subdocHandlers.has(f.guid)&&(this.subdocHandlers.get(f.guid)?.destroy(),this.subdocHandlers.delete(f.guid))},this.updateDoc=(i,o)=>{this.room.updateYDoc(i,o)},this.fetchDoc=(i,o)=>{this.room.fetchYDoc(i,o)},this.createSubdocHandler=i=>{if(this.subdocHandlers.has(i.guid)){this.subdocHandlers.get(i.guid)?.syncDoc();return}let o=new Xl({doc:i,isRoot:!1,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc});this.subdocHandlers.set(i.guid,o)},this.loadSubdoc=i=>{for(let o of this.rootDoc.subdocs)if(o.guid===i)return o.load(),!0;return!1},this.syncDoc=()=>{this.rootDoc.clientID=this.room.getSelf()?.connectionId||this.rootDoc.clientID,this.awareness.clientID=this.rootDoc.clientID,this.rootDocHandler.syncDoc();for(let[i,o]of this.subdocHandlers)o.syncDoc()},this.rootDoc=t,this.room=n,this.options=e,this.rootDocHandler=new Xl({doc:t,isRoot:!0,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc});let r=this.room.getSelf()?.connectionId;r&&(this.rootDoc.clientID=r),this.awareness=new Sh(this.rootDoc,this.room),this.unsubscribers.push(this.room.events.status.subscribe(i=>{i==="connected"?this.rootDocHandler.syncDoc():this.rootDocHandler.synced=!1})),this.unsubscribers.push(this.room.events.ydoc.subscribe(i=>{let{type:o}=i;if(o===lo.UPDATE_YDOC)return;let{stateVector:s,update:f,guid:l}=i;l!==void 0?this.subdocHandlers.get(l)?.handleServerUpdate({update:f,stateVector:s}):this.rootDocHandler.handleServerUpdate({update:f,stateVector:s})})),this.rootDocHandler.on("synced",()=>{let i=this.rootDocHandler.synced;for(let[o,s]of this.subdocHandlers)s.syncDoc();this.emit("synced",[i]),this.emit("sync",[i])}),this.rootDoc.on("subdocs",this.handleSubdocs),this.syncDoc()}get synced(){return this.rootDocHandler.synced}destroy(){this.unsubscribers.forEach(n=>n()),this.awareness.destroy(),this.rootDocHandler.destroy(),this._observers=new Map;for(let[n,t]of this.subdocHandlers)t.destroy();this.subdocHandlers.clear(),super.destroy()}disconnect(){}connect(){}};function tc(){let n=document.getElementById("editor");if(!n){console.error("#editor element not found");return}let t=n.dataset.roomId||"studyguide-default",e=n.dataset.userDisplay||"anonymous";try{cs.default.register("modules/cursors",ec.default)}catch{}let r=new cs.default("#editor",{theme:"snow",modules:{toolbar:"#editor-toolbar",cursors:{hideDelay:500,transformOnTextChange:!0,selectionChangeSource:null}}});try{let i=co({authEndpoint:"/api/liveblocks-auth"}),o=typeof i.enterRoom=="function"?i.enterRoom(t,{initialPresence:{}}):typeof i.enter=="function"?i.enter(t,{initialPresence:{}}):null;if(!o||!o.room)throw new Error("Failed to enter Liveblocks room; client API mismatch");let{room:s}=o,f=new Ln,l=new Ql(s,f),u=f.getText("quill"),a=l.awareness,d=y=>{let g=0;for(let h=0;h<(y||"").length;h++)g=(g<<5)-g+y.charCodeAt(h);return`hsl(${Math.abs(g)%360}, 70%, 55%)`};a.setLocalStateField("user",{name:e||"anonymous",color:d(e||"anonymous")});let m=r.getModule("cursors");if(m){let y=(g,p)=>{let h=String(g);if(!p||!p.cursor||!p.user){try{m.removeCursor(h)}catch{}return}let{name:c="anonymous",color:b="#00AAFF"}=p.user||{};try{m.createCursor(h,c,b)}catch{}try{m.moveCursor(h,p.cursor)}catch{}};r.on("selection-change",(g,p,h)=>{if(h==="user"){let c=g?{index:g.index,length:g.length}:null;a.setLocalStateField("cursor",c)}}),a.on("update",({added:g,updated:p,removed:h})=>{let c=a.getStates();[...g,...p].forEach(b=>y(b,c.get(b))),h.forEach(b=>{try{m.removeCursor(String(b))}catch{}})}),a.getStates().forEach((g,p)=>y(p,g))}u.observe(y=>{try{if(y&&y.transaction&&y.transaction.local)return;if(y.delta)r.updateContents(y.delta);else if(typeof y.changes=="object"&&y.changes.delta)r.updateContents(y.changes.delta);else{let g=u.toDelta?u.toDelta():null;g&&r.setContents(g)}}catch{}}),r.on("text-change",(y,g,p)=>{if(p==="user")try{f.transact(()=>{if(typeof u.applyDelta=="function")u.applyDelta(y.ops);else{let h=0;(y.ops||[]).forEach(c=>{c.retain&&(h+=c.retain),c.insert&&(u.insert(h,typeof c.insert=="string"?c.insert:"\uFFFC"),h+=typeof c.insert=="string"?c.insert.length:1),c.delete&&u.delete(h,c.delete)})}},"quill")}catch(h){console.warn("Failed to apply local delta to Yjs",h)}});let v=`studyguide:${t}`;r.on("text-change",()=>{try{let y=r.getContents();window.localStorage.setItem(v,JSON.stringify(y))}catch{}})}catch(i){console.error("Failed to initialize Quill + Liveblocks:",i)}}document.readyState==="complete"||document.readyState==="interactive"?tc():document.addEventListener("DOMContentLoaded",tc);
/*! Bundled license information:

quill/dist/quill.js:
  (*!
   * Quill Editor v1.3.7
   * https://quilljs.com/
   * Copyright (c) 2014, Jason Chen
   * Copyright (c) 2013, salesforce.com
   *)

quill-cursors/dist/quill-cursors.js:
  (*! For license information please see quill-cursors.js.LICENSE.txt *)
*/
